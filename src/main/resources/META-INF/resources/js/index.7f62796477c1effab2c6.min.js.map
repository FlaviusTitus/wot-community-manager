{"version":3,"file":"js/index.7f62796477c1effab2c6.min.js","mappings":"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","sources":["webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-common-utils/src/javascript/String.js","webpack://wot-campa-manager-backend/webpack/bootstrap","webpack://wot-campa-manager-backend/webpack/runtime/global","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-httpinterceptor/src/Utils.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-httpinterceptor/src/Constants.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-httpinterceptor/src/Manager.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-httpinterceptor/src/XMLHttpRequest.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-httpinterceptor/src/Fetch.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-httpinterceptor/src/Interceptor.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-httpinterceptor/src/interceptors/TokenInterceptor.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-httpinterceptor/src/interceptors/OAuthInterceptor.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-httpinterceptor/src/interceptors/index.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-httpinterceptor/src/index.js","webpack://wot-campa-manager-backend/./client/js/Constants.js","webpack://wot-campa-manager-backend/./client/js/services/LocalStorageService.js","webpack://wot-campa-manager-backend/./client/js/services/LoginService.js","webpack://wot-campa-manager-backend/./client/js/HttpInterceptor.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/utils/ExtendPrototype.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/utils/Utils.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/utils/Extender.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/extentions/EventSupport.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/EventTarget.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/extentions/DataSupport.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/extentions/ManipulationSupport.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/Node.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/extentions/QuerySupport.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/extentions/AttributeSupport.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/Element.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/extentions/ReadyEventSupport.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/Document.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/DocumentFragment.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/extentions/HtmlClassSupport.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/extentions/ShowHideSupport.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/HTMLElement.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/extentions/ValueSupport.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/HTMLInputElement.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/HTMLTextAreaElement.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/HTMLSelectElement.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/utils/DelegaterBuilder.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/extentions/ListSupport.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/NodeList.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/dom/HtmlCollection.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-extdom/src/Global.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-common-utils/src/ObjectProperty.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-common-utils/src/ObjectUtils.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-common-utils/src/PromiseUtils.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-components/src/utils/EventHelper.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-components/src/Component.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-components/src/Constants.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-components/src/utils/DefineComponentHelper.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-components/src/utils/NodeHelper.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-common-utils/src/PrivateProperty.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-app-toolbox/src/Route/Nodename.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-app-toolbox/src/Route/Events.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-app-toolbox/src/RouteLink/Nodename.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-app-toolbox/src/RouteLink/Events.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-common-utils/src/Global.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-expression-language/src/DefaultValue.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-expression-language/src/Context.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-expression-language/src/ExpressionResolver.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/Template.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-app-toolbox/src/Route/Attributes.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-app-toolbox/src/Route/index.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-app-toolbox/src/RouteLink/Attributes.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-app-toolbox/src/RouteLink/index.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-app-toolbox/src/View/Nodename.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/Directive.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/Context.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/Element.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/elements/Replace.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/directives/Initial.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/directives/Data.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/directives/If.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/directives/Choose.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/directives/Include.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/directives/Foreach.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/directives/Repeat.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/directives/Text.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/directives/Attributes.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/directives/AttachElement.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/directives/OnFinished.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-template-language/src/Renderer.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-app-toolbox/src/View/index.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-components/src/utils/WeakData.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-app-toolbox/src/Application.js","webpack://wot-campa-manager-backend/./client/js/javascript-extentions/Date.js","webpack://wot-campa-manager-backend/./client/js/RegistrateServiceWorker.js","webpack://wot-campa-manager-backend/./client/js/components/HTMLDialogExtentionElement.js","webpack://wot-campa-manager-backend/./client/js/components/HTMLLoginElement.js","webpack://wot-campa-manager-backend/./client/js/components/HTMLClanElement.js","webpack://wot-campa-manager-backend/./client/js/services/ServiceUtils.js","webpack://wot-campa-manager-backend/./client/js/services/MemberService.js","webpack://wot-campa-manager-backend/./client/js/components/HTMLMemberElement.js","webpack://wot-campa-manager-backend/./client/js/services/CampaignService.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/Constants.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/handels/ConditionHandle.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/handels/EditableHandle.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/handels/ValidationHandle.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/handels/MessageHandle.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-common-utils/src/ValueHelper.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/utils/DataHelper.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/utils/StateHelper.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/Base.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/BaseField.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/utils/ValueHelper.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/utils/EventHelper.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/wrapper/Wrapper.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/wrapper/Text.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/wrapper/File.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/wrapper/index.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/wrapper/Checkbox.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/wrapper/Radio.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/wrapper/Select.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/Field.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/Validation.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/utils/NodeHelper.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/utils/ValidationHelper.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/Container.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/FormButton.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/list/DeleteRow.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/list/Row.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/list/AddRow.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/list/Rows.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/List.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/Page.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/Message.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/controls/BackButton.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/controls/NextButton.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/controls/SummaryButton.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/controls/SubmitButton.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/Control.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/Step.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/ProgressBar.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/submitActions/SubmitActionResult.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/submitActions/BaseSubmitAction.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/submitActions/DefaultFormSubmitAction.js","webpack://wot-campa-manager-backend/./node_modules/@default-js/defaultjs-html-form/src/Form.js","webpack://wot-campa-manager-backend/./client/js/components/HTMLCampaignsElement.js","webpack://wot-campa-manager-backend/./client/js/services/CampaignRegistrationService.js","webpack://wot-campa-manager-backend/./client/js/components/HTMLCampaignElement.js","webpack://wot-campa-manager-backend/./client/js/components/HTMLCampaignMemberElement.js","webpack://wot-campa-manager-backend/./client/js/services/TeamService.js","webpack://wot-campa-manager-backend/./client/js/components/HTMLTeamElement.js","webpack://wot-campa-manager-backend/./client/js/components/HTMLTeamsElement.js","webpack://wot-campa-manager-backend/./client/js/components/HTMLTeamMemberSearchField.js","webpack://wot-campa-manager-backend/./client/pages/index/js/FormUtils.js","webpack://wot-campa-manager-backend/./client/pages/index/js/DateFormat.js","webpack://wot-campa-manager-backend/./client/pages/index/js/Management.js"],"sourcesContent":["if (!String.prototype.hashcode)\r\n\tString.prototype.hashcode = function() {\r\n\t\tif (this.length === 0)\r\n\t\t\treturn 0;\r\n\t\t\r\n\t\tlet hash = 0;\r\n\t\tconst length = this.length;\r\n\t\tfor (let i = 0; i < length; i++) {\r\n\t\t\tconst c = this.charCodeAt(i);\r\n\t\t\thash = ((hash << 5) - hash) + c;\r\n\t\t\thash |= 0; // Convert to 32bit integer\r\n\t\t}\r\n\t\treturn hash;\r\n\t};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","const GLOBAL = (() => {\n\tif (typeof self !== 'undefined') { return self; }\n\tif (typeof window !== 'undefined') { return window; }\n\tif (typeof global !== 'undefined') { return global; }\n\treturn {};\n})();\n\nexport {GLOBAL};\nconst Utils = {\n\tGLOBAL : GLOBAL\n};\n\nexport default Utils; ","import {GLOBAL} from \"./Utils\";\r\nexport const ORGFETCH = GLOBAL.fetch;","import { GLOBAL } from \"./Utils\";\r\nimport { ORGFETCH } from \"./Constants\";\r\nconst CURRENTORIGIN = GLOBAL.location.origin;\r\n\r\nclass Manager {\r\n\t#cache = {};\r\n\t#ignoredUrls = {};\r\n\t#ignoredOrigins = {};\r\n\t#ignoreDocumentOrigin = false;\r\n\t#interceptors = [];\r\n\t#setup = [];\r\n\t#readyCheck;\r\n\r\n\tconstructor() { }\r\n\r\n\tset ignoreDocumentOrigin(value) {\r\n\t\tthis.#ignoreDocumentOrigin = value;\r\n\t}\r\n\r\n\taddOriginToIgnore(origins) {\r\n\t\tif (origins instanceof Array)\r\n\t\t\tfor (let origin of origins)\r\n\t\t\t\tthis.#ignoredOrigins[origin.toString()] = true;\r\n\t\telse\r\n\t\t\tthis.#ignoredOrigins[origins.toString()] = true;\r\n\t}\r\n\r\n\taddUrlToIgnore(urls) {\r\n\t\tif (urls instanceof Array)\r\n\t\t\tfor (let url of urls)\r\n\t\t\t\tthis.#ignoredUrls[url.toString()] = true;\r\n\t\telse\r\n\t\t\tthis.#ignoredUrls[urls.toString()] = true;\r\n\t}\r\n\r\n\tsetup(setup) {\r\n\t\tif (typeof setup === \"function\" || setup instanceof Promise)\r\n\t\t\tthis.#setup.push(setup);\r\n\t}\r\n\r\n\taddInterceptor(aInterceptor) {\r\n\t\tif(aInterceptor instanceof Array)\r\n\t\t\treturn aInterceptor.forEach(interceptor => this.addInterceptor(interceptor));\r\n\t\tif (typeof aInterceptor !== \"object\")\r\n\t\t\tthrow new Error(\"function required an interceptor\");\r\n\t\tif (typeof aInterceptor.doAccept !== \"function\")\r\n\t\t\tthrow new Error(\"The interceptor required a \\\"doAccept\\\" function!\");\r\n\t\tif (typeof aInterceptor.doHandle !== \"function\")\r\n\t\t\tthrow new Error(\"The interceptor required a \\\"doHandle\\\" function!\");\r\n\r\n\t\tthis.#interceptors.push(aInterceptor);\r\n\t\tthis.reset();\r\n\t}\r\n\r\n\tget ready() {\r\n\t\treturn (async () => {\t\t\t\r\n\t\t\tif (this.#setup.length == 0)\r\n\t\t\t\treturn true;\r\n\r\n\t\t\tif(this.#readyCheck)\r\n\t\t\t\treturn this.#readyCheck;\r\n\r\n\t\t\tthis.#readyCheck = (async () => {\r\n\t\t\t\twhile(this.#setup.length != 0){\r\n\t\t\t\t\tconst setup = this.#setup[0];\r\n\t\t\t\t\tif (setup){\r\n\t\t\t\t\t\tconst interceptors = setup instanceof Promise ? await setup : await setup();\r\n\t\t\t\t\t\tif(interceptors)\r\n\t\t\t\t\t\t\tinterceptors instanceof Array ? interceptors.forEach(interceptor => this.addInterceptor(interceptor)) : this.addInterceptor(interceptors);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tthis.#setup.shift();\r\n\t\t\t\t}\r\n\t\t\t\tthis.#readyCheck = null;\r\n\t\t\t\treturn this.ready;\r\n\t\t\t})();\r\n\r\n\t\t\treturn this.#readyCheck;\r\n\t\t})();\r\n\t}\r\n\r\n\tasync doIntercept(aData) {\r\n\t\tawait this.ready;\r\n\r\n\t\tconst origin = aData.metadata.origin;\r\n\r\n\t\tif (this.#isIgnored(origin, aData.url.toString()))\r\n\t\t\treturn aData;\r\n\r\n\t\tconst { url, metadata } = aData;\r\n\t\tconst chain = await this.#getChain(origin, { url, metadata });\r\n\t\tif (!chain)\r\n\t\t\treturn aData;\r\n\r\n\t\tfor (let interceptor of chain)\r\n\t\t\taData = await interceptor.doHandle(aData);\r\n\r\n\t\treturn aData;\r\n\t}\r\n\r\n\treset() {\r\n\t\tthis.#cache = {};\r\n\t}\r\n\r\n\tasync uncheckedFetch(url, request) {\r\n\t\treturn ORGFETCH(url, request);\r\n\t}\r\n\r\n\t#isIgnored(origin, url) {\r\n\t\tif (this.#ignoredUrls[url])\r\n\t\t\treturn true\r\n\t\tif (this.#ignoreDocumentOrigin && origin == CURRENTORIGIN)\r\n\t\t\treturn true;\r\n\t\tif (this.#ignoredOrigins[origin])\r\n\t\t\treturn true;\r\n\r\n\t\treturn false\r\n\t}\r\n\r\n\tasync #getChain(origin, data) {\r\n\t\tlet chain = this.#cache[origin];\r\n\t\tif (!chain) {\r\n\t\t\tchain = this.#interceptorForOrigin(origin, data);\r\n\t\t\tthis.#cache[origin] = chain;\r\n\t\t}\r\n\r\n\t\treturn chain;\r\n\t}\r\n\r\n\tasync #interceptorForOrigin(origin, data) {\r\n\t\tconst result = [];\r\n\t\tfor (let interceptor of this.#interceptors) {\r\n\t\t\tif (await interceptor.doAccept(data))\r\n\t\t\t\tresult.push(interceptor)\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n};\r\n\r\nconst INSTANCE = new Manager();\r\nsetTimeout(() => INSTANCE.ready, 10);\r\n\r\n\r\nexport default INSTANCE;\r\nexport {Manager};","import Manager from \"./Manager\";\r\nimport {GLOBAL} from \"./Utils\";\r\n\r\nif(typeof GLOBAL.XMLHttpRequest !== \"undefined\"){\r\n\tconst ORGXHR = GLOBAL.XMLHttpRequest;\r\n\tconst executeRequest = function(aData){\r\n\t\tORGXHR.prototype.open.call(this, aData.request.method, aData.url, aData.metadata.async, aData.metadata.username, aData.metadata.password);\r\n\t\tif(typeof aData.request.headers !== \"undefined\")\r\n\t\t\tObject.getOwnPropertyNames(aData.request.headers)\r\n\t\t\t.forEach(aHeader =>{\r\n\t\t\t\tORGXHR.prototype.setRequestHeader.call(this, aHeader, aData.request.headers[aHeader]);\r\n\t\t\t});\r\n\t\tORGXHR.prototype.send.call(this, aData.request.body);\r\n\t}\r\n\tconst XHR = function (){\r\n\t\tconst xhr = new ORGXHR(arguments);\r\n\t\tlet data = undefined;\r\n\t\t\r\n\t\txhr.setRequestHeader = function(aName, aValue){\r\n\t\t\tdata.request.headers = data.request.headers || {};\r\n\t\t\tdata.request.headers[aName] = aValue;\r\n\t\t};\r\n\t\t\r\n\t\txhr.open = function(aMethod, aUrl, isAsync, aUsername, aPassword){\r\n\t\t\tconst url = new URL(aUrl, GLOBAL.location.origin);\r\n\t\t\tdata = {\r\n\t\t\t\turl : new URL(aUrl, location),\r\n\t\t\t\trequest : {\r\n\t\t\t\t\tmethod : aMethod\r\n\t\t\t\t},\r\n\t\t\t\tmetadata : {\r\n\t\t\t\t\tmethod : aMethod,\r\n\t\t\t\t\torigin: url.origin,\r\n\t\t\t\t\tprotocol : url.protocol,\r\n\t\t\t\t\thostname: url.hostname,\r\n\t\t\t\t\tport: url.port,\r\n\t\t\t\t\tpath : url.pathname,\r\n\t\t\t\t\tquery: url.search,\r\n\t\t\t\t\thash : url.hash,\r\n\t\t\t\t\tasync : typeof isAsync === \"boolean\" ? isAsync : true,\r\n\t\t\t\t\tusername : aUsername,\r\n\t\t\t\t\tpassword : aPassword\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t};\r\n\t\t\r\n\t\txhr.send = function(aBody){\r\n\t\t\tif(data.metadata.async){\r\n\t\t\t\tdata.request.body = aBody; \r\n\t    \t\tManager.doIntercept(data)\r\n\t    \t\t.then(executeRequest.bind(xhr))\r\n\t    \t\t[\"catch\"](console.error);\r\n\t\t    }\r\n\t\t\telse\r\n\t\t\t\texecuteRequest.call(xhr, data);\r\n\t\t};\r\n\t\t\r\n\t\treturn xhr;\r\n\t};\r\n\t\r\n\tGLOBAL.XMLHttpRequest = XHR;\r\n\tGLOBAL.XMLHttpRequest.prototype = ORGXHR.prototype;\r\n\tGLOBAL.XMLHttpRequest.prototype.constructor = XHR;\r\n}","import Manager from \"./Manager\";\r\nimport {GLOBAL} from \"./Utils\";\r\nimport {ORGFETCH} from \"./Constants\";\r\n\t\r\nGLOBAL.fetch = async function(aUrl, aRequest){\r\n\tconst url = new URL(aUrl, GLOBAL.location);\r\n\tconst data = await Manager.doIntercept({\r\n\t\t\turl : new URL(aUrl, location),\r\n\t\t\trequest : aRequest || {},\r\n\t\t\tmetadata : {\r\n\t\t\t\tmethod : typeof aRequest === \"undefined\" ? \"GET\" : (aRequest.method || \"GET\"),\r\n\t\t\t\torigin: url.origin,\r\n\t\t\t\tprotocol : url.protocol,\r\n\t\t\t\thostname: url.hostname,\r\n\t\t\t\tport: url.port,\r\n\t\t\t\tpath : url.pathname,\r\n\t\t\t\thash : url.hash,\r\n\t\t\t\tquery: url.search,\r\n\t\t\t\tasync : true\r\n\t\t\t}\r\n\t\t});\r\n\t\t\t\r\n\treturn ORGFETCH(data.url, data.request);\r\n};","import {ORGFETCH} from \"./Constants\";\r\n\r\nexport default class Interceptor{\r\n    async doAccept(data){}\r\n    async doHandle(data){}\r\n    async unceckedFetch(url, request){\r\n\t\treturn ORGFETCH(url, request);\r\n\t}\r\n\r\n};","/**\r\n * aSetup  =>\r\n * {\r\n * \tcondition : [string | string[] | function(aData}],\r\n * \tfetchToken : function(),\r\n *  appendToken : function(aToken, aData),\r\n *  (optional) refreshInterval,\r\n *  (optional) refreshToken : function()\r\n * }\r\n */\r\n\r\nconst defaultTokenAppender = async (token, data) => {\r\n\tdata.request.headers = data.request.headers || {};\r\n\tdata.request.headers[\"Authorization\"] = `Bearer ${token}`;\r\n\treturn data;\r\n}\r\n\r\nimport Interceptor from \"../Interceptor\";\r\nexport default class TokenInterceptor extends Interceptor {\r\n\r\n\t#token = null;\r\n\t#lastData = {};\r\n\t#condition;\r\n\t#fetchToken;\r\n\t#appendToken;\r\n\t#refreshInterval;\r\n\t#refreshToken;\r\n\r\n\tconstructor({ condition, fetchToken, appendToken, refreshInterval = 60 * 1000, refreshToken }) {\r\n\t\tsuper();\r\n\t\tif(typeof condition !== \"string\" && !(condition instanceof Array) && typeof condition !== \"function\")\r\n\t\t\tthrow new Error(`Parameter \"condition\" must be a \"string\", \"array\" or \"function\"!`);\r\n\t\tthis.#condition = condition;\r\n\t\t\r\n\t\tif(typeof fetchToken !== \"function\")\r\n\t\t\tthrow new Error(`Parameter \"fetchToken\" must be a \"function\"!`);\r\n\t\tthis.#fetchToken = fetchToken;\r\n\r\n\t\tif(appendToken && typeof appendToken !== \"function\")\r\n\t\t\tthrow new Error(`Parameter \"appendToken\" must be a \"function\"!`);\r\n\t\tthis.#appendToken = appendToken || defaultTokenAppender;\r\n\r\n\t\tthis.#refreshInterval = refreshInterval;\r\n\t\tthis.#refreshToken = refreshToken;\r\n\t}\r\n\r\n\tasync doAccept(data) {\r\n\t\tconst type = typeof this.#condition;\r\n\t\tconst condition = this.#condition;\r\n\t\tconst origin = data.metadata.origin;\r\n\t\tif (type === \"function\") return await condition(data);\r\n\t\telse if (type === \"string\") return condition == origin;\r\n\t\telse if (condition instanceof Array)\r\n\t\t\treturn condition.includes(origin);\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\tasync doHandle(data) {\r\n\t\tif (!this.#token) {\r\n\t\t\tconst { url, metadata } = data;\r\n\t\t\tthis.#lastData = { url, metadata };\r\n\t\t\tthis.#token = this.#fetchToken({ url, metadata });\r\n\t\t\tthis.#startRefresh();\r\n\t\t}\r\n\r\n\t\treturn this.#callAppendToken(data);\r\n\t}\r\n\r\n\tasync #callAppendToken(data) {\r\n\t\tconst appender = this.#appendToken;\r\n\t\tconst token = await this.#token;\r\n\t\tconst result = await appender(token, data);\r\n\r\n\t\treturn result ? result : data;\r\n\t}\r\n\r\n\t#startRefresh() {\r\n\t\tif (this.#refreshInterval > 0) {\r\n\t\t\tconst refreshToken = this.#refreshToken || (() => this.#fetchToken(this.#lastData));\r\n\t\t\tconst timeout = async () => {\r\n\t\t\t\tif (this.#refreshToken)\r\n\t\t\t\t\tawait this.#refreshToken(this.#lastData);\r\n\t\t\t\telse\r\n\t\t\t\t\tawait this.#fetchToken(this.#lastData);\r\n\r\n\t\t\t\tsetTimeout(timeout,this.#refreshInterval );\r\n\t\t\t};\r\n\r\n\r\n\t\t\tsetTimeout(timeout , this.#refreshInterval);\r\n\t\t}\r\n\t}\r\n};","import TokenInterceptor from \"./TokenInterceptor\"\r\n\r\nconst OAuthInterceptor = function(aSetup){\r\n\tconst setup = aSetup;\r\n\tsetup.fetchToken = async () => {\r\n\t\tconst response = await fetch(setup.login.url, {\r\n\t\t\tmethod: (setup.login.method || \"get\")\r\n\t\t});\r\n\t\tresponse = await response.json();\r\n\t\treturn response[setup.login.response.valueSelector];\r\n\t};\r\n\treturn TokenInterceptor(aSetup);\r\n};\r\n\r\nexport default OAuthInterceptor;\r\n","import OAuthInterceptor from \"./OAuthInterceptor\";\r\nimport TokenInterceptor from \"./TokenInterceptor\";\r\n\r\n\r\nexport default  {\r\n\tOAuthInterceptor,\r\n\tTokenInterceptor\r\n};","import {GLOBAL} from \"./Utils\";\r\nimport \"./XMLHttpRequest\";\r\nimport \"./Fetch\";\r\nimport Manager from \"./Manager\";\r\nimport Interceptor from \"./Interceptor\";\r\nimport interceptors from \"./interceptors\";\r\n\r\nGLOBAL.defaultjs = GLOBAL.defaultjs || {};\r\nGLOBAL.defaultjs.httpinterceptor = GLOBAL.defaultjs.httpinterceptor || {\r\n\tVERSION : \"${version}\",\r\n\tManager,\r\n\tInterceptor,\r\n\tinterceptors\r\n};","export const TEMPLATE_BASEPATH = \"/templates\";\r\nexport const EVENT__GLOBAL_ACTION_RELOADPARENT = \"global:action:reload-parent\";\r\nexport const URL_LOGIN = \"/api/system/login\";\r\nexport const URL_ACCESS = \"/api/system/access\";\r\nexport const PAGEURL = new URL(location);\r\n\r\nexport const ROLEMAPPING = {\r\n\t\"ex-member\" : \"EX Member\",\r\n\t\"reservist\" : \"Reservist\",\r\n\t\"recruit\" : \"Anwärter\",\r\n\t\"private\" : \"Member\",\r\n\t\"junior_officer\" : \"Member\",\r\n\t\"combat_officer\" : \"Feldkommandent\",\r\n\t\"personnel_officer\": \"Personal Offizier\",\r\n\t\"recruitment_officer\" : \"Anwerber\",\r\n\t\"executive_officer\": \"Ausführender Offizier\",\r\n\t\"commander\" : \"Clan Leader\"\r\n}\r\n\r\nexport const APPGLOBAL = {\r\n\tROLEMAPPING\r\n};\r\nwindow.APPGLOBALS = APPGLOBAL;","const STORAGE = window.localStorage;\r\n\r\n\r\nexport const storeValue = (key, data) => {\r\n\tSTORAGE.setItem(key, JSON.stringify({ data}));\r\n};\r\n\r\nexport const loadValue = (key) => {\r\n\tconst { data } = JSON.parse(STORAGE.getItem(key) || \"{}\");\r\n\treturn data;\r\n};\r\n\r\nexport const deleteValue = (key) => {\r\n\tSTORAGE.removeItem(key);\r\n};","import { APPGLOBAL, PAGEURL, URL_LOGIN, URL_ACCESS } from \"../Constants.js\";\r\nimport { loadValue, storeValue, deleteValue } from \"./LocalStorageService.js\";\r\n\r\nconst SECOND = 1000;\r\nconst MINUTE = 60 * SECOND;\r\nconst DAY = 24 * 60 * MINUTE;\r\n\r\nconst STORAGE_ITEM__LOGIN = \"cached-login\";\r\n\r\nlet isloggedIn = false;\r\nlet ACCESSRIGHTS = {};\r\nlet MEMBER;\r\nlet ACCESSTOKEN;\r\nlet EXPIREAT;\r\n\r\nconst isExpired = (expireAt) => {\r\n\tif (expireAt - (Date.now() + DAY) < 0)\r\n\t\treturn true;\r\n\r\n\treturn false;\r\n}\r\n\r\nconst access = async () => {\r\n\r\n\tlet response = await fetch(new URL(URL_ACCESS, location));\r\n\tif (response.status == 401) return false;\r\n\tif (response.status == 403) return null;\r\n\r\n\tresponse = await response.json();\r\n\tstoreValue(STORAGE_ITEM__LOGIN, response);\r\n\r\n\tconst { member, accessToken, expireAt, accessRights } = response;\r\n\t\r\n\tif (isExpired(expireAt))\r\n\t\treturn false;\r\n\t\r\n\tMEMBER = member;\r\n\tACCESSTOKEN = accessToken;\r\n\tEXPIREAT = expireAt;\r\n\tACCESSRIGHTS = accessRights;\r\n\r\n\tAPPGLOBALS.member = MEMBER\r\n\tAPPGLOBALS.accessRights = ACCESSRIGHTS;\r\n\r\n\tscheduleNexAccessTokenRefresh();\r\n\r\n\treturn true;\r\n};\r\n\r\nconst cachedLogin = async () => {\r\n\tconst cachedLogin = loadValue(STORAGE_ITEM__LOGIN);\r\n\tif (!cachedLogin)\r\n\t\treturn false;\r\n\r\n\tconst { member, accessToken, expireAt } = cachedLogin;\r\n\r\n\tif (isExpired(expireAt)){\r\n\t\tdeleteValue(STORAGE_ITEM__LOGIN);\r\n\t\treturn false;\r\n\t}\r\n\r\n\tconst url = new URL(URL_LOGIN, location);\r\n\tconst params = url.searchParams;\r\n\tparams.set(\"status\", \"ok\");\r\n\tparams.set(\"access_token\", accessToken);\r\n\tparams.set(\"account_id\", member.id);\r\n\tparams.set(\"expires_at\", expireAt - Date.now());\r\n\r\n\tawait fetch(url);\r\n};\r\n\r\nconst scheduleNexAccessTokenRefresh = () => {\r\n\tconst timeOffset = EXPIREAT - (Date.now() + MINUTE);\r\n\r\n\tsetTimeout(async () => {\r\n\t\tawait access();\r\n\t}, timeOffset);\r\n};\r\n\r\nexport const login = async () => {\r\n\tif (!isloggedIn) {\r\n\t\tawait cachedLogin();\r\n\t\tif (!await access()) {\r\n\t\t\tlocation.href = new URL(URL_LOGIN, location).toString();\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tisloggedIn = true;\r\n\t}\r\n\r\n\treturn MEMBER;\r\n};\r\n\r\nexport const fullAccessData = () => {\r\n\treturn {\r\n\t\taccessToken: ACCESSTOKEN,\r\n\t\texpireAt: EXPIREAT,\r\n\t\tmember: MEMBER,\r\n\t\taccessRights: ACCESSRIGHTS\r\n\t}\r\n}\r\n\r\nexport const accessRights = () => {\r\n\treturn ACCESSRIGHTS;\r\n}\r\n\r\nexport const member = () => {\r\n\treturn MEMBER;\r\n}\r\n\r\nexport const accessToken = () => {\r\n\treturn ACCESSTOKEN;\r\n}\r\n\r\n\r\n","import \"@default-js/defaultjs-httpinterceptor\";\r\nimport Manager from \"@default-js/defaultjs-httpinterceptor/src/Manager.js\";\r\nimport Interceptor from \"@default-js/defaultjs-httpinterceptor/src/Interceptor.js\";\r\nimport { accessToken } from \"./services/LoginService.js\";\r\n\r\nexport default class AuthInterceptor extends Interceptor {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tasync doAccept(data) {\r\n\t\treturn location.origin == data.metadata.origin;\r\n\t}\r\n\r\n\tasync doHandle(data) {\r\n\t\tconst token = accessToken();\r\n\t\tif (token) {\r\n\t\t\tdata.request.headers = data.request.headers || {};\r\n\t\t\tdata.request.headers[\"Authorization\"] = `Bearer ${token}`;\r\n\t\t}\r\n\t\treturn data;\r\n\t}\r\n}\r\n\r\nManager.addInterceptor(new AuthInterceptor());\r\n","const extendPrototype = function(){\r\n\tconst args = Array.from(arguments);\r\n\tconst type = args.shift();\t\r\n\twhile(args.length > 0){\r\n\t\tconst extender = args.shift();\r\n\t\textender(type);\r\n\t}\r\n};\r\n\r\nexport default extendPrototype;","const Utils = {\r\n\tglobal : (() => {\r\n\t\tif(typeof window !== \"undefined\") return window;\r\n\t\tif(typeof global !== \"undefined\") return global;\r\n\t\tif(typeof self !== \"undefined\") return self;\r\n\t\treturn {};\t\t\r\n\t})(),\r\n\tglobalVar : function(aName, aInitValue){\r\n\t\tif(arguments.length === 2 && typeof Utils.global[aName] === \"undefined\")\r\n\t\t\tUtils.global[aName] = aInitValue;\r\n\t\t\r\n\t\treturn Utils.global[aName];\t\t\r\n\t}\r\n};\r\n\r\nexport default Utils;","import Utils from \"./Utils\";\r\n\r\nconst EXTENSIONS_MAP = Utils.globalVar(\"___DOM_API_EXTENSION_MAP___\", {});\r\nconst Extender = function(aName, aExtention){\r\n\treturn function(aType){\t\r\n\t\tlet extensions = EXTENSIONS_MAP[aType.name];\r\n\t\tif(!extensions)\r\n\t\t\textensions = EXTENSIONS_MAP[aType.name] = {};\t\t\r\n\t\t\r\n\t\tif(!extensions[aName]){\r\n\t\t\textensions[aName] = true;\r\n\t\t\taExtention(aType.prototype);\r\n\t\t}\r\n\t\telse\r\n\t\t\tconsole.warn(\"duplicated load of extension \\\"\" + aName + \"\\\"!\");\r\n\t}\r\n};\r\n\r\nexport default Extender;","import Extender from \"../../utils/Extender\";\r\n\r\nconst DEFAULT_TIMEOUT = 100;\r\nconst support = Extender(\"EventSupport\", (Prototype) => {\r\n\tconst EVENTSPLITER = /(\\s+)|(\\s*,\\s*)/;\r\n\tconst getWrapperHandleMap = (element) => {\r\n\t\tif (!element.__wrapperhandlemap__) element.__wrapperhandlemap__ = new Map();\r\n\r\n\t\treturn element.__wrapperhandlemap__;\r\n\t};\r\n\r\n\tconst getTriggerTimeouts = (element) => {\r\n\t\tif (!element.___EVENTTRIGGERTIMEOUTS___) element.___EVENTTRIGGERTIMEOUTS___ = {};\r\n\r\n\t\treturn element.___EVENTTRIGGERTIMEOUTS___;\r\n\t};\r\n\r\n\tconst removeWrapper = (element, data, eventTypes) => {\r\n\t\tconst { wrapper, option, events, handle } = data;\r\n\t\tconst capture = option.capture;\r\n\t\tif (eventTypes) {\r\n\t\t\teventTypes = typeof eventTypes === \"string\" ? eventTypes.split(EVENTSPLITER) : eventTypes;\r\n\t\t\tfor (let event of eventTypes) {\r\n\t\t\t\tconst index = events.indexOf(event);\r\n\t\t\t\tif (index >= 0) {\r\n\t\t\t\t\telement.removeEventListener(event, wrapper, capture);\r\n\t\t\t\t\tevents.splice(index, 1);\r\n\t\t\t\t}\r\n\t\t\t\tif (events.length == 0) getWrapperHandleMap(element).delete(handle);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfor (let event of events) {\r\n\t\t\t\telement.removeEventListener(event, wrapper, capture);\r\n\t\t\t}\r\n\t\t\tgetWrapperHandleMap(element).delete(handle);\r\n\t\t}\r\n\t};\r\n\r\n\tPrototype.on = function () {\r\n\t\tif (arguments.length < 2) throw new Error(\"Too less arguments!\");\r\n\r\n\t\tconst args = Array.from(arguments);\r\n\t\tlet events = typeof args[0] === \"string\" ? args.shift().split(EVENTSPLITER) : args.shift();\r\n\t\tconst filter = typeof args[0] === \"string\" ? args.shift() : null;\r\n\t\tconst handle = args.shift();\r\n\t\tconst option = typeof args[0] === \"undefined\" ? { capture: false, once: false, passive: false } : typeof args[0] === \"boolean\" ? { capture: args.shift(), once: false, passive: false } : args.shift();\r\n\t\tconst wrapper = function (event) {\r\n\t\t\tif (filter) {\r\n\t\t\t\tconst target = event.target;\r\n\t\t\t\tif (typeof target.is === \"function\" && !target.is(filter)) return;\r\n\t\t\t}\r\n\t\t\tconst result = handle.apply(null, arguments);\r\n\t\t\tif (option.once) removeWrapper(this, wrapper);\r\n\t\t\treturn result;\r\n\t\t};\r\n\r\n\t\tgetWrapperHandleMap(this).set(handle, { handle, wrapper: wrapper, events, option });\r\n\r\n\t\tfor (let event of events) {\r\n\t\t\tthis.addEventListener(event, wrapper, option);\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\t};\r\n\r\n\tPrototype.removeOn = function (handle, event, capture) {\r\n\t\tconst data = getWrapperHandleMap(this).get(handle);\r\n\t\tif (data) removeWrapper(this, data, event);\r\n\t\telse this.removeEventListener(handle, event, capture);\r\n\r\n\t\treturn this;\r\n\t};\r\n\r\n\tPrototype.trigger = function () {\r\n\t\tconst args = Array.from(arguments);\r\n\t\tconst timeout = typeof args[0] === \"number\" ? args.shift() : -1;\r\n\t\tif (timeout >= 0) {\r\n\t\t\tconst type = args[0];\r\n\t\t\tconst timeouts = getTriggerTimeouts(this);\r\n\t\t\tconst timeoutid = timeouts[type];\r\n\t\t\tif (timeoutid) clearTimeout(timeoutid);\r\n\r\n\t\t\ttimeouts[type] = setTimeout(() => {\r\n\t\t\t\tdelete timeouts[type];\r\n\t\t\t\tthis.trigger.apply(this, args);\r\n\t\t\t}, timeout);\r\n\t\t} else {\r\n\t\t\tconst type = args.shift();\r\n\t\t\tconst delegate = args[0] instanceof Event ? args.shift() : null;\r\n\t\t\tconst data = args.length >= 1 ? (args.length == 1 ? args.shift() : args) : delegate;\r\n\t\t\tconst event = data ? new CustomEvent(type, { bubbles: true, cancelable: true, composed: true, detail: data }) : new Event(type, { bubbles: true, cancelable: true, composed: true });\r\n\r\n\t\t\tif (delegate) event.delegatedEvent = delegate;\r\n\t\t\tthis.dispatchEvent(event);\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n});\r\nexport default support;\r\n","import extendPrototype from \"../utils/ExtendPrototype\";\nimport EventSupport from \"./extentions/EventSupport\";\n\nextendPrototype(EventTarget, EventSupport);","import Extender from \"../../utils/Extender\";\r\nconst support = Extender(\"DataSupport\", Prototype => {\r\n\tPrototype.data = function() {\r\n\t\tconst data = {};\r\n\t\tif (typeof this.dataset !== \"undefined\")\r\n\t\t\tfor (name in this.dataset)\r\n\t\t\t\tdata[name] = this.dataset[name];\r\n\r\n\t\tthis.data = (function() {\r\n\t\t\tif (arguments.length == 0)\r\n\t\t\t\treturn data;\r\n\t\t\telse if (arguments.length == 1)\r\n\t\t\t\treturn data[arguments[0]];\r\n\t\t\telse if (typeof arguments[1] === \"undefined\" || arguments[1] == null)\r\n\t\t\t\tdelete data[arguments[0]];\r\n\t\t\telse\r\n\t\t\t\tdata[arguments[0]] = arguments[1];\r\n\r\n\t\t\treturn this;\r\n\t\t}).bind(this);\r\n\r\n\t\treturn this.data.apply(null, arguments);\r\n\t};\r\n});\r\nexport default support;","import Extender from \"../../utils/Extender\";\r\nimport Utils from \"../../utils/Utils\";\r\n\r\nconst support = Extender(\"ManipulationSupport\", Prototype => {\t\r\n\tPrototype.empty = function(){\r\n\t\tlet nodes = this.childNodes\r\n\t\twhile(nodes.length != 0)\t\t\t\r\n\t\t\tnodes[0].remove(true);\r\n\t\t\r\n\t\treturn this;\r\n\t};\r\n\t\r\n\tPrototype.content = function(){\r\n\t\treturn this.childNodes;\r\n\t};\t\r\n\t\r\n\tPrototype.html = function(){\r\n\t\tif(arguments.length == 0)\t\t\t\r\n\t\t\treturn this.innerHTML;\r\n\t\telse if(arguments.length == 1 && typeof arguments[0] === \"boolean\")\r\n\t\t\tif(arguments[0])\r\n\t\t\t\treturn this.outerHTML;\r\n\t\t\telse\r\n\t\t\t\treturn this.innerHTML;\r\n\t\telse \r\n\t\t\tArray.from(arguments).forEach(content => {\r\n\t\t\t\tthis.empty();\r\n\t\t\t\tif(typeof content === \"string\")\r\n\t\t\t\t\tthis.append(content);\r\n\t\t\t\telse if(content instanceof Node || content instanceof NodeList || content instanceof HTMLCollection){\r\n\t\t\t\t\tthis.append(content);\r\n\t\t\t\t}\r\n\t\t\t});\t\t\r\n\t\t\t\r\n\t\treturn this;\r\n\t};\r\n\t\r\n\tconst append = function(){\r\n\t\tconst append = Prototype.appendChild.bind(this);\r\n\t\tfor(let i = 0; i < arguments.length; i++){\r\n\t\t\tlet arg = arguments[i];\r\n\t\t\tif(arg instanceof Node)\r\n\t\t\t\tthis.appendChild(arg);\r\n\t\t\telse if(typeof arg === \"string\")\r\n\t\t\t\tcreate(arg).forEach(append);\r\n\t\t\telse if(typeof arg.forEach === \"function\")\r\n\t\t\t\targ.forEach(append);\r\n\t\t}\r\n\t};\t\r\n\tPrototype.append = append;\r\n\t\r\n\tconst prepend = function(aFirstElement, aElement){\r\n\t\tthis.insertBefore(aElement, aFirstElement);\r\n\t};\r\n\tPrototype.prepend = function(){\r\n\t\tif(this.childNodes.length == 0)\r\n\t\t\tappend.apply(this, arguments);\r\n\t\telse {\r\n\t\t\tconst first = this.childNodes.first();\r\n\t\t\tconst insert = prepend.bind(this, first);\r\n\t\t\tfor(let i = 0; i < arguments.length; i++){\r\n\t\t\t\tconst arg = arguments[i];\r\n\t\t\t\tif(arg instanceof Node)\r\n\t\t\t\t\tinsert(arg);\r\n\t\t\t\telse if(typeof arg === \"string\")\r\n\t\t\t\t\targ.forEach(insert);\r\n\t\t\t\telse if(typeof arg.forEach === \"function\")\r\n\t\t\t\t\targ.forEach(insert);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t\r\n\tPrototype.replace = function(){\r\n\t\tif(arguments.length < 1)\r\n\t\t\tthrow new Error(\"Insufficient arguments! One or two nodes required!\");\r\n\t\t\r\n\t\tconst parent = arguments.length == 1 ? this.parentNode : this;\r\n\t\tconst oldNode = arguments.length == 1 ? this : arguments[0];\r\n\t\tconst newNode = arguments.length == 1 ? arguments[0] : arguments[1];\r\n\t\t\r\n\t\tif(newNode instanceof Array || newNode instanceof NodeList || newNode instanceof HTMLCollection){\r\n\t\t\tnewNode.forEach(aItem => parent.insertBefore(aItem, oldNode));\r\n\t\t\toldNode.remove();\r\n\t\t}\r\n\t\telse\r\n\t\t\tparent.replaceChild(newNode,oldNode);\r\n\t};\r\n\t\r\n\tPrototype.after = function(){\r\n\t\tif(this.parentNode == null)\r\n\t\t\tthrow new Error(\"Can't insert nodes after this node! Parent node not available!\");\r\n\t\t\r\n\t\tconst parent = this.parentNode;\r\n\t\tconst next = this.nextSibling;\r\n\t\tif(next)\r\n\t\t\tPrototype.before.apply(next, arguments);\r\n\t\telse\r\n\t\t\tPrototype.append.apply(parent, arguments);\r\n\t};\t\r\n\t\r\n\tPrototype.before = function(){\r\n\t\tif(this.parentNode == null)\r\n\t\t\tthrow new Error(\"Can't insert nodes after this node! Parent node not available!\");\r\n\t\t\r\n\t\tconst parent = this.parentNode;\r\n\t\tconst inserter = (node) => {parent.insertBefore(node, this);}\r\n\t\tfor(let i = 0; i < arguments.length; i++){\r\n\t\t\tconst arg = arguments[i];\r\n\t\t\tif(arg instanceof Node)\r\n\t\t\t\tinserter(arg);\r\n\t\t\telse if(typeof arg === \"string\")\r\n\t\t\t\targ.forEach(inserter);\r\n\t\t\telse if(typeof arg.forEach === \"function\")\r\n\t\t\t\targ.forEach(inserter);\r\n\t\t}\r\n\t};\t\r\n});\r\nexport default support;","import extendPrototype from \"../utils/ExtendPrototype\";\r\nimport DataSupport from \"./extentions/DataSupport\";\r\nimport ManipulationSupport from \"./extentions/ManipulationSupport\";\r\n\r\nextendPrototype(Node,DataSupport,ManipulationSupport);","import Extender from \"../../utils/Extender\";\r\n\r\nconst parentSelector = /:parent(\\(\\\"([^\\)]*)\\\"\\))?/i;\r\nconst queryExecuter = function (aElement, aSelector) {\r\n\tlet match = parentSelector.exec(aSelector);\r\n\tif (match) {\r\n\t\tlet result = aElement;\r\n\t\tif (match.index > 0) {\r\n\t\t\tresult = aElement.querySelectorAll(aSelector.substr(0, match.index));\r\n\t\t\tif (result.length == 0) return;\r\n\t\t}\r\n\t\tresult = result.parent(match[2]);\r\n\t\tif (result) {\r\n\t\t\tlet nextSelector = aSelector.substr(match.index + match[0].length).trim();\r\n\t\t\tif (nextSelector.length > 0) result = result.find(nextSelector);\r\n\r\n\t\t\treturn result;\r\n\t\t}\r\n\t} else return aElement.querySelectorAll(aSelector);\r\n};\r\n\r\nconst support = Extender(\"QuerySupport\", (Prototype) => {\r\n\tPrototype.find = function () {\r\n\t\tlet nodes = [];\r\n\t\tlet args = Array.from(arguments);\r\n\t\tlet arg = args.shift();\r\n\t\twhile (arg) {\r\n\t\t\tif (typeof arg === \"string\") {\r\n\t\t\t\tlet result = queryExecuter(this, arg);\r\n\t\t\t\tif (result) nodes.push(result);\r\n\t\t\t}\r\n\r\n\t\t\targ = args.shift();\r\n\t\t}\r\n\r\n\t\tlet result = NodeList.from.apply(null, nodes);\r\n\t\treturn result;\r\n\t};\r\n\r\n\tPrototype.is = function () {\r\n\t\tif (this instanceof Document || this instanceof DocumentFragment) return false;\r\n\t\telse if (arguments.length == 1) {\r\n\t\t\tif (typeof arguments[0] === \"string\") return this.matches(arguments[0]);\r\n\t\t\telse if (typeof arguments[0].length === \"number\") {\r\n\t\t\t\tlet filter = arguments[0];\r\n\t\t\t\tfor (let i = 0; i < filter.length; i++) if (this.matches(filter[i])) return true;\r\n\t\t\t}\r\n\t\t} else if (arguments.length > 1) return this.is(Array.from(arguments));\r\n\r\n\t\treturn false;\r\n\t};\r\n\r\n\tPrototype.parent = function (selector, ignoreShadowRoot) {\r\n\t\tif (!this.parentNode) return null;\r\n\t\tignoreShadowRoot = typeof selector === \"boolean\" ? selector : ignoreShadowRoot;\r\n\t\tselector = typeof selector === \"string\" ? selector : null;\r\n\r\n\t\tlet parent = this.parentNode;\r\n\t\tif (parent instanceof ShadowRoot && ignoreShadowRoot) parent = parent.host;\r\n\r\n\t\tif (selector) {\r\n\t\t\ttry {\r\n\t\t\t\twhile (parent && !parent.is(selector)) parent = parent.parent(selector, ignoreShadowRoot);\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(\"this:\", this, \"parent:\", parent, \"error:\", e);\r\n\t\t\t}\r\n\t\t\treturn parent;\r\n\t\t}\r\n\t\treturn parent;\r\n\t};\r\n\r\n\tPrototype.parents = function () {\r\n\t\tlet result = new Array();\r\n\t\tlet parent = Prototype.parent.apply(this, arguments);\r\n\t\twhile (parent) {\r\n\t\t\tresult.push(parent);\r\n\t\t\tparent = Prototype.parent.apply(parent, arguments);\r\n\t\t}\r\n\r\n\t\treturn NodeList.from(result);\r\n\t};\r\n\r\n\tPrototype.selector = function () {\r\n\t\tif (this instanceof Document || this instanceof DocumentFragment) return undefined;\r\n\t\telse if (this.id) return \"#\" + this.id;\r\n\t\telse {\r\n\t\t\tlet selector = this.tagName.toLowerCase();\r\n\t\t\tlet parent = this.parent();\r\n\t\t\tif (parent) {\r\n\t\t\t\tlet sameTagSiblings = parent.find(\":scope>\" + selector);\r\n\t\t\t\tif (sameTagSiblings instanceof NodeList) {\r\n\t\t\t\t\tlet index = sameTagSiblings.indexOf(this);\r\n\t\t\t\t\tif (index > 0) selector += \":nth-child(\" + (index + 1) + \")\";\r\n\t\t\t\t}\r\n\t\t\t\tlet parentSelector = parent.selector();\r\n\t\t\t\treturn parentSelector ? parentSelector + \">\" + selector : selector;\r\n\t\t\t}\r\n\t\t\treturn selector;\r\n\t\t}\r\n\t};\r\n\r\n\tPrototype.closest = function (aQuery) {\r\n\t\treturn this.closests(aQuery).first();\r\n\t};\r\n\r\n\tPrototype.closests = function (aQuery) {\r\n\t\tconst result = this.find(aQuery);\r\n\t\tif (result.length != 0) return result;\r\n\t\t\r\n\t\tconst parent = this.parentElement;\r\n\t\tif (parent) return parent.closests(aQuery);\r\n\r\n\t\treturn NodeList.from([]);\r\n\t};\r\n\r\n\tPrototype.nested = function (aQuery) {\r\n\t\tif (this.is(aQuery)) return NodeList.from(this);\r\n\r\n\t\tlet nested = this.find(aQuery);\r\n\t\tif (nested && nested.length > 0) return nested;\r\n\t\telse return NodeList.from(this.parent(aQuery));\r\n\t};\r\n});\r\nexport default support;\r\n","import Extender from \"../../utils/Extender\";\r\n\r\nconst support = Extender(\"AttributeSupport\", Prototype => {\r\n\tPrototype.attr = function() {\r\n\t\tif (arguments.length == 0)\r\n\t\t\treturn this.hasAttributes() ? (() => {\r\n\t\t\t\tconst result = {};\r\n\t\t\t\tthis.getAttributeNames().forEach(name => {\r\n\t\t\t\t\tresult[name] = this.getAttribute(name);\r\n\t\t\t\t});\r\n\t\t\t\treturn result;\r\n\t\t\t})() : undefined;\r\n\t\telse if (arguments.length == 1)\r\n\t\t\treturn this.getAttribute(arguments[0]);\r\n\t\telse if (typeof arguments[1] === \"undefined\" || arguments[1] == null)\r\n\t\t\tthis.removeAttribute(arguments[0]);\r\n\t\telse\r\n\t\t\tthis.setAttribute(arguments[0], arguments[1]);\r\n\t\t\r\n\t\treturn this;\r\n\t};\r\n});\r\nexport default support;","import extendPrototype from \"../utils/ExtendPrototype\";\r\nimport QuerySupport from \"./extentions/QuerySupport\";\r\nimport AttributeSupport from \"./extentions/AttributeSupport\";\r\nimport ManipulationSupport from \"./extentions/ManipulationSupport\";\r\n\r\nextendPrototype(Element,QuerySupport, AttributeSupport, ManipulationSupport);","import Extender from \"../../utils/Extender\";\r\n\r\nconst support = Extender(\"ReadyEventSupport\", Prototype => {\r\n\tPrototype.ready = function(aFunction, once){\t\r\n\t\tthis.on(\"ready\", aFunction, once);\r\n\t\tif(document.readyState == \"complete\")\t\t\t\r\n\t\t\tthis.trigger(\"ready\");\r\n\t\t\r\n\t\treturn this;\r\n\t};\r\n\t\r\n});\r\nexport default support;","import extendPrototype from \"../utils/ExtendPrototype\";\r\nimport QuerySupport from \"./extentions/QuerySupport\";\r\nimport ReadyEventSupport from \"./extentions/ReadyEventSupport\";\r\n\r\nextendPrototype(Document, QuerySupport, ReadyEventSupport);\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", () => document.trigger(\"ready\"));\r\n\r\n\r\n\r\n","import extendPrototype from \"../utils/ExtendPrototype\";\r\nimport QuerySupport from \"./extentions/QuerySupport\";\r\nimport ManipulationSupport from \"./extentions/ManipulationSupport\";\r\n\r\nextendPrototype(DocumentFragment, QuerySupport, ManipulationSupport);\r\n\r\n\r\n\r\n\r\n","import Extender from \"../../utils/Extender\";\r\n\r\nconst support = Extender(\"HtmlClassSupport\", Prototype => {\t\r\n\tPrototype.addClass = function() {\r\n\t\tif(arguments.length == 1)\r\n\t\t\targuments[0].split(/\\s+/).forEach(clazz => this.classList.add(clazz));\r\n\t\telse if(arguments.length > 1)\r\n\t\t\tArray.prototype.forEach.call(arguments,clazz => this.classList.add(clazz));\r\n\t\t\r\n\t\treturn this;\r\n\t};\r\n\t\r\n\tPrototype.removeClass = function() {\r\n\t\tif(arguments.length == 1)\r\n\t\t\targuments[0].split(/\\s+/).forEach(clazz => this.classList.remove(clazz));\r\n\t\telse if(arguments.length > 1)\r\n\t\t\tArray.prototype.forEach.call(arguments, clazz => this.classList.remove(clazz));\r\n\t\t\r\n\t\treturn this;\t\t\r\n\t};\r\n\t\r\n\tPrototype.toggleClass = function() {\r\n\t\tif(arguments.length == 1)\r\n\t\t\targuments[0].split(/\\s+/).forEach(clazz => this.classList.toggle(clazz));\r\n\t\telse if(arguments.length > 1)\r\n\t\t\tArray.prototype.forEach.call(arguments, clazz => this.classList.toggle(clazz));\r\n\t\t\r\n\t\treturn this;\r\n\t};\r\n});\r\nexport default support;","import Extender from \"../../utils/Extender\";\r\n\r\nconst HIDEVALUE = \"none\";\r\n\r\nconst isHidden = (element) => {\r\n\treturn element.style.display === HIDEVALUE\r\n};\r\n\r\nconst init = (element) => {\t\r\n\tlet display = !isHidden(element) ? element.style.display : \"\";\r\n\t\r\n\telement.show = (function(){\r\n\t\tthis.style.display = display;\r\n\t\treturn this;\t\t\r\n\t}).bind(element);\r\n\t\r\n\telement.hide = (function(){\r\n\t\tthis.style.display = HIDEVALUE;\r\n\t\treturn this;\t\t\r\n\t}).bind(element);\r\n\t\r\n\treturn element;\r\n};\r\n\r\n\r\nconst support = Extender(\"ShowHideSupport\", Prototype => {\r\n\tPrototype.show = function() {\r\n\t\treturn init(this).show.apply(null, arguments)\r\n\t};\r\n\r\n\tPrototype.hide = function() {\r\n\t\treturn init(this).hide.apply(null, arguments)\r\n\t};\r\n\r\n\tPrototype.toggleShow = function() {\r\n\t\treturn isHidden(this) ? this.show() : this.hide();\r\n\t};\r\n\r\n});\r\nexport default support;","import extendPrototype from \"../utils/ExtendPrototype\";\r\nimport HtmlClassSupport from \"./extentions/HtmlClassSupport\";\r\nimport ShowHideSupport from \"./extentions/ShowHideSupport\";\r\n\r\n\r\nextendPrototype(HTMLElement, HtmlClassSupport, ShowHideSupport);","import Extender from \"../../utils/Extender\";\r\n\r\nconst InputTypes = [\r\n\t{\r\n\t\tselector : \"select\",\r\n\t\tget : function(){\r\n\t\t\tconst result = [];\r\n\t\t\tthis.find(\"option\").forEach(option => {\r\n\t\t\t\tif(option.selected)\r\n\t\t\t\t\tresult.push(option.value);\r\n\t\t\t});\t\t\t\r\n\t\t\treturn result;\r\n\t\t},\r\n\t\tset : function(){\t\t\t\t\r\n\t\t\tlet values = [];\r\n\t\t\tconst args = Array.from(arguments);\r\n\t\t\tlet arg = args.shift();\r\n\t\t\twhile(arg){\r\n\t\t\t\tif(Array.isArray(arg))\r\n\t\t\t\t\tvalues = values.concat(arg);\r\n\t\t\t\telse\r\n\t\t\t\t\tvalues.push(arg);\r\n\t\t\t\t\r\n\t\t\t\targ = args.shift();\r\n\t\t\t}\r\n\t\t\tthis.value = values;\r\n\t\t\tthis.find(\"option\").forEach(option => option.selected = values.indexOf(option.value) >= 0);\t\t\t\r\n\t\t\tthis.trigger(\"changed\");\r\n\t\t}\t\t\t\r\n\t},\r\n\t{\r\n\t\tselector : \"input[type=\\\"checkbox\\\"], input[type=\\\"radio\\\"]\",\r\n\t\tget : function(){\r\n\t\t\tif(this.value == \"on\" || this.value == \"off\")\r\n\t\t\t\treturn this.checked;\r\n\t\t\telse if(this.checked)\r\n\t\t\t\treturn this.value;\t\t\t\t\r\n\t\t},\r\n\t\tset : function(aValue){\r\n\t\t\tif(typeof aValue === \"boolean\")\r\n\t\t\t\tthis.checked = aValue;\r\n\t\t\telse if(typeof aValue === \"string\")\r\n\t\t\t\tthis.checked = this.value == aValue;\r\n\t\t\telse if(Array.isArray(aValue))\r\n\t\t\t\tthis.checked = aValue.indexOf(this.value) >= 0;\r\n\t\t\t\r\n\t\t\tthis.trigger(\"changed\");\r\n\t\t}\r\n\t}\r\n];\r\n\r\nconst DefaultInputType = {\r\n\t\tget : function(){\r\n\t\t\treturn this.value;\r\n\t\t},\r\n\t\tset : function(aValue){\r\n\t\t\tthis.value = aValue;\r\n\t\t\tthis.trigger(\"input\");\r\n\t\t}\t\r\n};\r\n\r\nconst getInputType = function(aElement){\r\n\tfor(let i = 0; i < InputTypes.length; i++)\r\n\t\tif(aElement.is(InputTypes[i].selector))\r\n\t\t\treturn InputTypes[i];\t\t\r\n\treturn DefaultInputType;\r\n};\r\n\r\n\r\nconst support = Extender(\"ValueSupport\", Prototype => {\t\r\n\tPrototype.val = function() {\r\n\t\tlet type = getInputType(this);\r\n\t\tif(arguments.length == 0)\r\n\t\t\treturn type.get.apply(this, arguments);\r\n\t\telse\r\n\t\t\ttype.set.apply(this, arguments);\r\n\t\t\t\r\n\t\treturn this;\r\n\t};\t\r\n});\r\nexport default support;","import extendPrototype from \"../utils/ExtendPrototype\";\r\nimport ValueSupport from \"./extentions/ValueSupport\";\r\n\r\n\r\nextendPrototype(HTMLInputElement,ValueSupport);","import extendPrototype from \"../utils/ExtendPrototype\";\r\nimport Extender from \"../utils/Extender\";\r\n\r\n\r\nextendPrototype(HTMLTextAreaElement,Extender(\"ValueSupport\", Prototype => {\t\r\n\tPrototype.val = function() {\r\n\t\tif(arguments.length == 0)\r\n\t\t\treturn this.value;\r\n\t\telse\r\n\t\t\tthis.value = arguments[0]\r\n\t\t\t\r\n\t\treturn this;\r\n\t};\t\r\n}));","import extendPrototype from \"../utils/ExtendPrototype\";\r\nimport ValueSupport from \"./extentions/ValueSupport\";\r\n\r\n\r\nextendPrototype(HTMLSelectElement,ValueSupport);","const DelegaterBuilder = function() {\r\n\tconst args = Array.from(arguments);\r\n\tconst callback = args.shift();\r\n\tconst source = args.shift();\r\n\targs.forEach( target =>{\r\n\t\tObject.getOwnPropertyNames(target)\r\n\t\t.forEach(name => {\r\n\t\t\tconst prop = Object.getOwnPropertyDescriptor(target, name);\r\n\t\t\tif (typeof source[name] === \"undefined\" && typeof prop.value === \"function\")\r\n\t\t\t\tsource[name] = function(){\r\n\t\t\t\t\treturn callback.call(this, name, arguments);\r\n\t\t\t\t};\t\t\t\t\t\t\t\t\t\t\r\n\t\t});\r\n\t});\r\n\t\r\n};\r\nexport default DelegaterBuilder;","import Extender from \"../../utils/Extender\";\r\n\r\nconst support = Extender(\"ListSupport\", Prototype => {\t\t\r\n\tPrototype.indexOf = function() {\r\n\t\tfor(let i = 0; i < this.length; i++)\r\n\t\t\tif(this[i] == arguments[0])\r\n\t\t\t\treturn i;\r\n\t\t\r\n\t\treturn -1;\r\n\t};\r\n\r\n\tPrototype.forEach = function(){\r\n\t\treturn Array.prototype.forEach.apply(Array.from(this), arguments);\r\n\t};\r\n\t\r\n\tPrototype.map = function(){\r\n\t\treturn Array.prototype.map.apply(Array.from(this), arguments);\r\n\t};\r\n\t\r\n\tPrototype.filter = function(){\r\n\t\treturn Array.prototype.filter.apply(Array.from(this), arguments);\r\n\t};\r\n\r\n\tPrototype.first = function(){\r\n\t\tif(this.length > 0)\r\n\t\t\treturn this[0];\r\n\t};\t\r\n\t\r\n\tPrototype.last = function(){\r\n\t\tif(this.length > 0)\r\n\t\t\treturn this[this.length - 1];\r\n\t};\r\n});\r\nexport default support;","import extendPrototype from \"../utils/ExtendPrototype\";\r\nimport DelegaterBuilder from \"../utils/DelegaterBuilder\";\r\nimport ListSupport from \"./extentions/ListSupport\";\r\n\r\nextendPrototype(NodeList, ListSupport);\r\n\r\nNodeList.prototype.applyTo = function(){\r\n\tconst args = Array.from(arguments);\r\n\tconst calling = args.shift();\r\n\tconst isFunction = typeof calling === \"function\";\r\n\tconst results = [];\r\n\tfor(let i = 0; i < this.length; i++){\r\n\t\tconst node = this[i];\r\n\t\tlet\tresult;\r\n\t\tif(isFunction)\r\n\t\t\tresult = calling.apply([node].concat(args));\r\n\t\telse if(typeof node[calling] === \"function\")\r\n\t\t\tresult = node[calling].apply(node, args);\r\n\t\t\r\n\t\tif(result)\r\n\t\t\tresults.push(result);\r\n\t}\r\n\t\r\n\treturn results;\r\n};\r\n\r\nNodeList.prototype.val = function() {\r\n\tif(arguments.length == 0){\r\n\t\tif(this.length > 0){\r\n\t\t\tconst result = new Map();\r\n\t\t\tthis.forEach(node => {\r\n\t\t\t\tif(typeof node.val === \"function\"){\r\n\t\t\t\t\tconst value = node.val();\r\n\t\t\t\t\tif(value)\r\n\t\t\t\t\t\tresult.set((node.name || node.id || node.selector()), node.val());\r\n\t\t\t\t}\r\n\t\t\t});\t\r\n\t\t\treturn result;\r\n\t\t}\r\n\t}\r\n\telse\r\n\t\tNodeList.prototype.applyTo.apply(this, [\"val\"].concat(Array.from(arguments)));\r\n};\r\n\r\nNodeList.from = function(){\r\n\tconst args = Array.from(arguments);\r\n\tconst data = {};\r\n\tlet counter = 0;\r\n\t\r\n\twhile(args.length > 0){\r\n\t\tconst arg = args.shift();\r\n\t\tif(typeof arg !== \"undefined\" && arg != null){\r\n\t\t\tif(arg instanceof Node)\r\n\t\t\t\tdata[counter++] = {value: arg, enumerable: true};\r\n\t\t\telse if(arg instanceof NodeList || arg instanceof HTMLCollection || arg instanceof Array){\r\n\t\t\t\tfor(let i = 0; i < arg.length; i++){\r\n\t\t\t\t\tif(arg[i] && arg[i] instanceof Node){\r\n\t\t\t\t\t\tdata[counter++] = {value: arg[i], enumerable: true};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tdata.length = {value: counter};\r\n\treturn  Object.create(NodeList.prototype, data);\r\n};\r\n\r\n\r\nDelegaterBuilder(function(aFunctionName, theArguments) {\r\n\tlet results = [];\t\r\n\tthis.forEach(node => {\r\n\t\tif(node && typeof node[aFunctionName] === \"function\"){\r\n\t\t\tconst result = node[aFunctionName].apply(node, theArguments);\r\n\t\t\tif(result){ \r\n\t\t\t\tif(result instanceof NodeList)\r\n\t\t\t\t\tresults = results.concat(Array.from(result));\r\n\t\t\t\telse\r\n\t\t\t\t\tresults.push(result);\r\n\t\t\t}\t\t\r\n\t\t}\r\n\t});\r\n\t\r\n\tif(results.length === 0)\r\n\t\treturn undefined;\r\n\telse if(results[0] instanceof Node || results[0] instanceof NodeList)\r\n\t\treturn NodeList.from(results);\r\n\telse\r\n\t\treturn results;\r\n},NodeList.prototype, Node.prototype, HTMLElement.prototype, HTMLInputElement.prototype, Element.prototype, EventTarget.prototype);\r\n","import extendPrototype from \"../utils/ExtendPrototype\";\r\nimport DelegaterBuilder from \"../utils/DelegaterBuilder\";\r\nimport ListSupport from \"./extentions/ListSupport\";\r\n\r\nextendPrototype(HTMLCollection, ListSupport);\r\n\r\nHTMLCollection.prototype.applyTo = function(){\r\n\tconst args = Array.from(arguments);\r\n\tconst calling = args.shift();\r\n\tconst isFunction = typeof calling === \"function\";\r\n\tconst results = [];\r\n\tfor(let i = 0; i < this.length; i++){\r\n\t\tconst node = this[i];\r\n\t\tlet\tresult;\r\n\t\tif(isFunction)\r\n\t\t\tresult = calling.apply([node].concat(args));\r\n\t\telse if(typeof node[calling] === \"function\")\r\n\t\t\tresult = node[calling].apply(node, args);\r\n\t\t\r\n\t\tif(result)\r\n\t\t\tresults.push(result);\r\n\t}\r\n\t\r\n\treturn results;\r\n};\r\n\r\nHTMLCollection.prototype.val = function() {\r\n\tif(arguments.length == 0){\r\n\t\tif(this.length > 0){\r\n\t\t\tconst result = new Map();\r\n\t\t\tthis.forEach(node => {\r\n\t\t\t\tif(typeof node.val === \"function\"){\r\n\t\t\t\t\tconst value = node.val();\r\n\t\t\t\t\tif(value)\r\n\t\t\t\t\t\tresult.set((node.name || node.id || node.selector()), node.val());\r\n\t\t\t\t}\r\n\t\t\t});\t\r\n\t\t\treturn result;\r\n\t\t}\r\n\t}\r\n\telse\r\n\t\tHTMLCollection.prototype.applyTo.apply(this, [\"val\"].concat(Array.from(arguments)));\r\n};\r\n\r\nHTMLCollection.from = function(){\r\n\tconst args = Array.from(arguments);\r\n\tconst data = {};\r\n\tlet counter = 0;\r\n\t\r\n\twhile(args.length > 0){\r\n\t\tconst arg = args.shift();\r\n\t\tif(typeof arg !== \"undefined\" && arg != null){\r\n\t\t\tif(arg instanceof HTMLElement)\r\n\t\t\t\tdata[counter++] = {value: arg, enumerable: true};\r\n\t\t\telse if(arg instanceof HTMLCollection || arg instanceof NodeList || arg instanceof Array){\r\n\t\t\t\tfor(let i = 0; i < arg.length; i++){\r\n\t\t\t\t\tif(arg[i] && arg[i] instanceof HTMLElement){\r\n\t\t\t\t\t\tdata[counter++] = {value: arg[i], enumerable: true};\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tdata.length = {value: counter};\r\n\treturn  Object.create(HTMLCollection.prototype, data);\r\n};\r\n\r\n\r\nDelegaterBuilder(function(aFunctionName, theArguments) {\r\n\tlet results = [];\t\r\n\tthis.forEach(node => {\r\n\t\tif(node && typeof node[aFunctionName] === \"function\"){\r\n\t\t\tlet result = node[aFunctionName].apply(node, theArguments);\r\n\t\t\tif(result){ \r\n\t\t\t\tif(result instanceof HTMLCollection)\r\n\t\t\t\t\tresults = results.concat(Array.from(result));\r\n\t\t\t\telse\r\n\t\t\t\t\tresults.push(result);\r\n\t\t\t}\t\t\r\n\t\t}\r\n\t});\r\n\t\r\n\tif(results.length === 0)\r\n\t\treturn undefined;\r\n\telse if(results[0] instanceof HTMLElement || results[0] instanceof HTMLCollection)\r\n\t\treturn HTMLCollection.from.apply(null, results);\r\n\telse\r\n\t\treturn results;\r\n},HTMLCollection.prototype, Node.prototype, HTMLElement.prototype, HTMLInputElement.prototype, Element.prototype, EventTarget.prototype);\r\n","import Utils from \"./utils/Utils\";\r\n\r\nUtils.global.defaultjs = Utils.global.defaultjs || {};\r\nUtils.global.defaultjs.extdom = Utils.global.defaultjs.extdom || {\r\n\tVERSION : \"${version}\",\r\n\tutils : {\r\n\t\tUtils: Utils\r\n\t}\r\n};\r\n\r\nUtils.global.find = function() {\r\n\treturn document.find.apply(document, arguments);\r\n};\r\n\r\nUtils.global.ready = function() {\r\n\treturn document.ready.apply(document, arguments);\r\n};\r\n\r\nUtils.global.create = function(aContent, asTemplate) {\r\n\tif (typeof arguments[0] !== \"string\")\r\n\t\tthrow new Error(\"The first argument must be a string!\");\r\n\t\r\n\tconst template = document.createElement(\"template\");\r\n\ttemplate.innerHTML = aContent;\r\n\tif(asTemplate)\r\n\t\treturn template;\r\n\t\r\n\treturn document.importNode(template.content, true).childNodes;\r\n};\r\n\r\nUtils.global.script = function(aFile, aTarget) {\r\n\tif(aFile instanceof Array)\r\n\t\treturn Promise.all(aFile.map(file => Utils.global.script(file, aTarget)));\r\n\t\r\n\tif(typeof aFile === \"string\")\t\r\n\t\treturn new Promise((r,e) => {\r\n\t\t\tconst script = document.createElement(\"script\");\r\n\t\t\tscript.async = true;\r\n\t\t\tscript.onload = function(){r()};\r\n\t\t\tscript.onerror = function(){throw new Error(\"load error!\")};\r\n\t\t\t!aTarget ? document.body.append(script) : aTarget.append(script);\r\n\t\t\tscript.src = aFile;\r\n\t\t});\r\n\telse\r\n\t\treturn Promise.reject(\"First parameter must be an array of strings or a string!\");\r\n};","export default class ObjectProperty {\r\n\tconstructor(key, context){\r\n\t\tthis.key = key;\r\n\t\tthis.context = context;\r\n\t}\r\n\t\r\n\tget keyDefined(){\r\n\t\treturn this.key in this.context; \r\n\t}\r\n\t\r\n\tget hasValue(){\r\n\t\treturn !!this.context[this.key];\r\n\t}\r\n\t\r\n\tget value(){\r\n\t\treturn this.context[this.key];\r\n\t}\r\n\t\r\n\tset value(data){\r\n\t\tthis.context[this.key] = data;\r\n\t}\r\n\t\r\n\tset append(data) {\r\n\t\tif(!this.hasValue)\r\n\t\t\tthis.value = data;\r\n\t\telse {\r\n\t\t\tconst value = this.value;\r\n\t\t\tif(value instanceof Array)\r\n\t\t\t\tvalue.push(data);\r\n\t\t\telse\r\n\t\t\t\tthis.value = [this.value, data];\r\n\t\t}\r\n\t}\r\n\t\r\n\tremove(){\r\n\t\tdelete this.context[this.key];\r\n\t}\r\n\t\r\n\tstatic load(data, key, create=true) {\r\n\t\tlet context = data;\r\n\t\tconst keys = key.split(\"\\.\");\r\n\t\tlet name = keys.shift().trim();\r\n\t\twhile(keys.length > 0){\r\n\t\t\tif(!context[name]){\r\n\t\t\t\tif(!create)\r\n\t\t\t\t\treturn null;\r\n\t\t\t\t\r\n\t\t\t\tcontext[name] = {}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcontext = context[name];\r\n\t\t\tname = keys.shift().trim();\r\n\t\t}\r\n\t\t\r\n\t\treturn new ObjectProperty(name, context);\r\n\t}\r\n};","import ObjectProperty from \"./ObjectProperty.js\";\r\n/**\r\n * append a propery value to an object. If propery exists its would be converted to an array\r\n *\r\n *  @param aKey:string name of property\r\n *  @param aData:any property value\r\n *  @param aObject:object the object to append the property\r\n *\r\n *  @return returns the changed object\r\n */\r\nexport const append = function (aKey, aData, aObject) {\r\n\tif (typeof aData !== \"undefined\") {\r\n\t\tconst property = ObjectProperty.load(aObject, aKey, true);\r\n\t\tproperty.append = aData;\r\n\t}\r\n\treturn aObject;\r\n};\r\n\r\n/**\r\n * checked if an object a simple object. No Array, Map or something else.\r\n *\r\n * @param aObject:object the object to be testing\r\n *\r\n * @return boolean\r\n */\r\nexport const isPojo = function (aObject) {\r\n\treturn typeof aObject !== \"undefined\" && aObject != null && aObject.constructor.name === \"Object\";\r\n};\r\n\r\n/**\r\n * merging object into a target object. Its only merge simple object and sub objects. Every other\r\n * value would be replaced by value from the source object.\r\n *\r\n * sample: merge(target, source-1, source-2, ...source-n)\r\n *\r\n * @param target:object the target object to merging into\r\n * @param sources:object\r\n *\r\n * @return object returns the target object\r\n */\r\nexport const merge = function (target, ...sources) {\r\n\tif(!target)\r\n\t\ttarget = {};\r\n\r\n\tfor (let source of sources) {\r\n\t\tif (isPojo(source)) {\r\n\t\t\tObject.getOwnPropertyNames(source).forEach((key) => {\r\n\t\t\t\tif (isPojo(target[key])) merge(target[key], source[key]);\r\n\t\t\t\telse target[key] = source[key];\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\treturn target;\r\n};\r\n\r\nconst buildPropertyFilter = function ({ names, allowed }) {\r\n\treturn (name, value, context) => {\r\n\t\treturn names.includes(name) === allowed;\r\n\t};\r\n};\r\n\r\nexport const filter = function () {\r\n\tconst [data, propFilter, { deep = false, recursive = true, parents = [] } = {}] = arguments;\r\n\tconst result = {};\r\n\r\n\tfor (let name in data) {\r\n\t\tconst value = data[name];\r\n\t\tconst accept = propFilter(name, value, data);\r\n\t\tif (accept && (!deep || value === null || value === undefined)) result[name] = value;\r\n\t\telse if (accept && deep) {\r\n\t\t\tconst type = typeof value;\r\n\t\t\tif (type !== \"object\" || value instanceof Array || value instanceof Map || value instanceof Set || value instanceof RegExp || parents.includes[value] || value == data) result[name] = value;\r\n\t\t\telse result[name] = filter(value, propFilter, { deep, recursive, parents: parents.concat(data) });\r\n\t\t}\r\n\t}\r\n\r\n\treturn result;\r\n};\r\n\r\nexport const defValue = (o, name, value) => {\r\n\tObject.defineProperty(o, name, {\r\n\t\tvalue,\r\n\t\twritable: false,\r\n\t\tconfigurable: false,\r\n\t\tenumerable: false,\r\n\t});\r\n};\r\nexport const defGet = (o, name, get) => {\r\n\tObject.defineProperty(o, name, {\r\n\t\tget,\r\n\t\tconfigurable: false,\r\n\t\tenumerable: false,\r\n\t});\r\n};\r\n\r\nexport const defGetSet = (o, name, get, set) => {\r\n\tObject.defineProperty(o, name, {\r\n\t\tget,\r\n\t\tset,\r\n\t\tconfigurable: false,\r\n\t\tenumerable: false,\r\n\t});\r\n};\r\n\r\nexport default {\r\n\tisPojo,\r\n\tappend,\r\n\tmerge,\r\n\tfilter,\r\n\tbuildPropertyFilter,\r\n\tdefValue,\r\n\tdefGet,\r\n\tdefGetSet,\r\n};\r\n","import {defValue, defGet} from \"./ObjectUtils\"\r\n\r\nexport const timeoutPromise = (fn, ms) =>{\r\n\tlet canceled = false;\r\n\tlet timeout = null;\r\n\tconst promise = new Promise((r, e) => {\r\n\t\ttimeout = setTimeout(()=> {\r\n\t\t\ttimeout = null;\r\n\t\t\tfn(r,e);\r\n\t\t}, ms)\r\n\t});\r\n\r\n\tconst then = promise.then;\r\n\tpromise.then = (fn) => {\r\n\t\tthen.call(promise, (result) => {\r\n\t\t\tif(!this.canceled)\r\n\t\t\t\treturn fn(result);\r\n\t\t});\r\n\t}\r\n\r\n\tdefValue(promise, \"cancel\", () => {\r\n\t\tif(timeout){\r\n\t\t\tclearTimeout(timeout);\r\n\t\t\tcanceled = true;\r\n\t\t}\r\n\t});\r\n\tdefGet(promise, canceld, () => canceled);\r\n\r\n\treturn promise;\r\n}\r\n\r\n\r\nexport const lazyPromise = () => {\r\n\t\tlet promiseResolve = null;\r\n\t\tlet promiseError = null;\r\n\r\n\t\tconst promise = new Promise((r, e) => {\r\n\t\t\tpromiseResolve = r;\r\n\t\t\tpromiseError = e;\r\n\t\t});\r\n\r\n\t\tlet resolved = false;\r\n\t\tlet error = false;\r\n\t\tlet value = undefined;\r\n\r\n\t\tdefValue(promise, \"resolve\", (result) => {\r\n\t\t\tvalue = result;\r\n\t\t\tresolved = true;\r\n\t\t\tif (value instanceof Error) {\r\n\t\t\t\terror = true;\r\n\t\t\t\tpromiseError(value);\r\n\t\t\t} else promiseResolve(value);\r\n\t\t});\r\n\r\n\t\tdefGet(promise, \"value\", () => value);\r\n\t\tdefGet(promise, \"error\", () => error);\r\n\t\tdefGet(promise, \"resolved\", () => resolved);\r\n\r\n\t\treturn promise;\r\n};\r\nexport default {\r\n\tlazyPromise,\r\n\ttimeoutPromise\r\n}\r\n","import {attributeChangeEventPrefix} from \"../Constants\";\n\nexport const componentEventname = (eventType, node ) => {\t\n\tlet nodename = \"unsupported\";\n\tif(typeof node === \"string\")\n\t\tnodename = node;\n\telse if(node instanceof HTMLElement)\n\t\tnodename = node.nodeName;\n\telse if(typeof node.NODENAME === \"string\")\n\t\tnodename = node.NODENAME;\n\telse throw new Error(`${typeof node} is not supported as parameter \"node\"!`);\n\t\n   return `${nodename.toLowerCase()}:${eventType}`;//use @ as separtor and not :\n};\n\n\nexport const attributeChangeEventname = (attribute, node ) => {\n    return componentEventname(`${attributeChangeEventPrefix}-${attribute}`, node);\n};\n\nexport default {componentEventname, attributeChangeEventname}","import { lazyPromise } from \"@default-js/defaultjs-common-utils/src/PromiseUtils\";\nimport { uuid } from \"@default-js/defaultjs-common-utils/src/UUID\";\nimport { initTimeout, triggerTimeout } from \"./Constants\";\nimport { attributeChangeEventname, componentEventname } from \"./utils/EventHelper\";\n\nconst TIMEOUTS = new WeakMap();\nconst init = (component) => {\n\tlet timeout = TIMEOUTS.get(component);\n\tif (timeout) clearTimeout(timeout);\n\n\tTIMEOUTS.get(component, setTimeout(async () => {\n\t\tTIMEOUTS.delete(component);\n\t\ttry{\n\t\t\tawait component.init();\n\t\t\tcomponent.ready.resolve();\n\t\t}catch(e){\n\t\t\tconsole.error(\"Can't initialize component!\", component, e);\n\t\t\tcomponent.ready(resolve(e));\n\t\t}\n\t\tcomponent.trigger(componentEventname(\"initialzed\", component));\n\t}, initTimeout));\t\n};\n\nexport const createUID = (prefix, suffix) => {\n\tlet count = 0;\n\tlet id = null;\n    while(count < 100){\n\t\tid = `${prefix ? prefix : \"\"}${uuid()}${suffix ? suffix : \"\"}`;\n\t\tif(!document.getElementById(id))\n\t\t\treturn id;\n\n\t\tcount++;\n\t}\n\tconsole.error(new Error(\"To many retries to create an unique id - created id is not unique!\"));\n\treturn id;\n};\n\n\n\nconst buildClass = (htmlBaseType) =>{\n\treturn class Component extends htmlBaseType {\n\n\t\t#ready = lazyPromise();\n\t\tconstructor({shadowRoot = false, content = null, createUID = false, uidPrefix = \"id-\", uidSuffix = \"\"} = {}) {\n\t\t\tsuper();\n\t\n\t\t\tif(createUID)\n\t\t\t\tthis.attr(\"id\", createUID(uidPrefix, uidSuffix));\n\t\n\t\t\tif(shadowRoot)\n\t\t\t\tthis.attachShadow({mode:\"open\"});\n\t\t\t\n\t\t\tif(content)\n\t\t\t\tthis.root.append(typeof content === \"function\" ? content(this) : content);\n\t\t}\n\t\n\t\tget root(){\n\t\t\treturn this.shadowRoot || this;\n\t\t}\n\t\n\t\tget ready(){\n\t\t\treturn this.#ready;\n\t\t}\n\t\n\t\tasync init() {}\n\t\n\t\tasync destroy() {\n\t\t\tif(this.ready.resolved)\n\t\t\tthis.#ready =  lazyPromise();\n\t\t}\n\t\n\t\tconnectedCallback() {\n\t\t\tif (this.ownerDocument == document && this.isConnected) init(this);\n\t\t}\n\t\n\t\tadoptedCallback() {\n\t\t\tthis.connectedCallback();\n\t\t}\n\t\n\t\tattributeChangedCallback(name, oldValue, newValue) {\n\t\t\tif (oldValue != newValue && this.isConnected) {\n\t\t\t\tthis.trigger(triggerTimeout, attributeChangeEventname(name, this));\n\t\t\t\tthis.trigger(triggerTimeout, componentEventname(\"change\", this));\n\t\t\t}\n\t\t}\n\t\n\t\tdisconnectedCallback(){\n\t\t\tthis.destroy();\n\t\t}\n\t};\n} \n\nconst CLAZZMAP = new Map();\n\nexport const componentBaseOf = (htmlBaseType) => {\n\tlet clazz = CLAZZMAP.get(htmlBaseType);\n\tif(clazz == null){\n\t\tclazz = buildClass(htmlBaseType);\n\t\tCLAZZMAP.set(htmlBaseType, clazz);\n\t}\n\n\treturn clazz;\n}\n\nconst Component = componentBaseOf(HTMLElement);\n\n\n\nexport default Component;\n","export const componentPrefix = \"d-\";\r\nexport const attributeChangeEventPrefix = \"attribute-\";\r\nexport const initTimeout = 10;\r\nexport const triggerTimeout = 10;\r\n","import { componentPrefix } from \"../Constants\";\n\nexport const toNodeName = (name, prefix) => {\n\tif(typeof prefix === \"string\")\n\t\treturn prefix + name;\n\t\t\n\treturn componentPrefix + name;\n};\n\nexport const define = function(clazz, options) {\n\tconst nodename = clazz.NODENAME;\n\tif (!customElements.get(nodename)) {\n\t\tcustomElements.define(nodename, clazz, options);\n\t}\n};\n\n\nexport default define; \n","export const findParent = (node, check) => {\n\twhile(node != null) {\t\t\n        if(check(node))\n            return node;\n\n        node = node.parent();\t\t\t\n    }\n    \n    return null;\n};\n\nconst findClosest = (node, depth, check) => {\n    if(check(node))\n        return {node, depth}\n\n    let result = null;\n    for(let child of node.childNodes){\n        const item = findClosest(child, depth + 1, check);\n\n        if(item != null && (result == null || result.depth > item.depth))            \n            result = item;\n    }\n\n    return result;\n}\n\nexport const findClosestInDepth = (node, check) => {\n    const closest = findClosest(node, 0, check);\n    return closest != null ? closest.node : null;\n}\n\nexport default {findParent, findClosestInDepth};","const PRIVATE_PROPERTIES = new WeakMap();\r\nexport const privateStore = (obj) => {\r\n\tif(PRIVATE_PROPERTIES.has(obj))\r\n\t\treturn PRIVATE_PROPERTIES.get(obj);\r\n\t\r\n\tconst data = {};\r\n\tPRIVATE_PROPERTIES.set(obj, data);\r\n\treturn data;\r\n};\r\n\r\nexport const privateProperty = function(obj, name, value) {\r\n\tconst data = privateStore(obj);\r\n\tif(arguments.length === 1)\r\n\t\treturn data;\r\n\telse if(arguments.length === 2)\r\n\t\treturn data[name];\r\n\telse if(arguments.length === 3)\r\n\t\tdata[name] = value;\r\n\telse\r\n\t\tthrow new Error(\"Not allowed size of arguments!\");\r\n};\r\n\r\nexport const privatePropertyAccessor = (varname) => {\r\n\treturn function(self, value){\r\n\t\tif(arguments.length == 2)\r\n\t\t\tprivateProperty(self, varname, value);\r\n\t\telse\r\n\t\t\treturn privateProperty(self, varname);\r\n\t};\r\n};\r\n\r\nexport default {privateProperty, privatePropertyAccessor, privateStore};","import { toNodeName } from \"@default-js/defaultjs-html-components/src/utils/DefineComponentHelper\";\r\nexport default toNodeName(\"route\");","import NODENAME from \"./Nodename\";\r\nexport const EVENT_INIT = `${NODENAME}-init`;\r\nexport const EVENT_CLICK = `${NODENAME}-click`;\r\nexport const EVENT_ACTIVATE = `${NODENAME}-activate`;\r\nexport const EVENT_DEACTIVATE = `${NODENAME}-deactivate`;","import { toNodeName } from \"@default-js/defaultjs-html-components/src/utils/DefineComponentHelper\";\r\nexport default toNodeName(\"route-link\");","import NODENAME from \"./Nodename\";\r\nexport const EVENT_TO_ROUTE = NODENAME + \"-to-route\";","const GLOBAL = (() => {\r\n\tif(typeof global !== \"undefined\") return global;\r\n\tif(typeof window !== \"undefined\") return window;\t\r\n\tif(typeof self !== \"undefined\") return self;\r\n\treturn {};\r\n})();\r\n\r\nexport default GLOBAL;","export default class DefaultValue {\n\tconstructor(value){\n\t\tthis.hasValue = arguments.length == 1;\n\t\tthis.value = value;\n\t}\t\n};","const seekAtChain = (resolver, property) => {\n\twhile(resolver){\n\t\tconst def = resolver.proxy.handle.getPropertyDef(property, false);\n\t\tif(def)\n\t\t\treturn def;\n\t\t\n\t\tresolver = resolver.parent;\n\t}\t\n\treturn { data: null, resolver: null, defined: false };\n}\n\nclass Handle {\n\tconstructor(data, resolver) {\n\t\tthis.data = data;\n\t\tthis.resolver = resolver;\n\t\tthis.cache = new Map();\n\t}\n\t\n\tupdateData(data){\n\t\tthis.data = data;\n\t\tthis.cache = new Map();\n\t}\n\t\n\tresetCache(){\n\t\tthis.cache = new Map();\n\t}\n\n\tgetPropertyDef(property, seek = true) {\n\t\tif (this.cache.has(property))\n\t\t\treturn this.cache.get(property);\n\t\t\n\t\tlet def = null\n\t\tif (this.data && property in this.data)\n\t\t\tdef = { data: this.data, resolver: this.resolver, defined: true };\n\t\telse if(seek)\n\t\t\tdef = seekAtChain(this.resolver.parent, property);\n\t\telse\n\t\t\treturn null;\n\t\tif(def.defined)\n\t\t\tthis.cache.set(property, def);\n\t\treturn def;\n\t}\n\n\thasProperty(property) {\n\t\t//@TODO write tests!!!\n\t\tconst { defined } = this.getPropertyDef(property);\n\t\treturn defined;\n\t}\n\tgetProperty(property) {\n\t\t//@TODO write tests!!!\t\n\t\tconst { data } = this.getPropertyDef(property);\n\t\treturn data ? data[property] : undefined;\n\t}\n\tsetProperty(property, value) {\n\t\t//@TODO would support this action on an proxied resolver context??? write tests!!!\n\t\tconst { data, defined } = this.getPropertyDef(property);\n\t\tif (defined)\n\t\t\tdata[property] = value;\n\t\telse {\n\t\t\tif (this.data)\n\t\t\t\tthis.data[property] = value;\n\t\t\telse {\n\t\t\t\tthis.data = {}\n\t\t\t\tthis.data[property] = value;\n\t\t\t}\n\t\t\tthis.cache.set(property, { data: this.data, resolver: this.resolver, defined: true });\n\t\t}\n\t}\n\tdeleteProperty(property) {\n\t\t//@TODO would support this action on an proxied resolver context??? write tests!!!\t\t\n\t\tthrow new Error(\"unsupported function!\")\n\t}\n}\n\nexport default class Context {\n\tconstructor(context, resolver) {\n\t\tthis.handle = new Handle(context, resolver);\t\t\n\t\tthis.data = new Proxy(this.handle, {\n\t\t\thas: function(data, property) {\n\t\t\t\treturn data.hasProperty(property);\n\t\t\t},\n\t\t\tget: function(data, property) {\n\t\t\t\treturn data.getProperty(property);\n\t\t\t},\n\t\t\tset: function(data, property, value) {\n\t\t\t\treturn data.setProperty(property, value);\n\t\t\t},\n\t\t\tdeleteProperty: function(data, property) {\n\t\t\t\treturn data.deleteProperty(property);\n\t\t\t}\n\t\t\t//@TODO need to support the other proxy actions\t\t\n\t\t});;\n\t}\n\t\n\tupdateData(data){\n\t\tthis.handle.updateData(data)\t\t\n\t}\n\t\n\tresetCache(){\n\t\tthis.handle.resetCache();\n\t}\n};","import GLOBAL from \"@default-js/defaultjs-common-utils/src/Global.js\"\r\nimport ObjectProperty from \"@default-js/defaultjs-common-utils/src/ObjectProperty.js\";\r\nimport ObjectUtils from \"@default-js/defaultjs-common-utils/src/ObjectUtils.js\"\r\nimport DefaultValue from \"./DefaultValue.js\";\r\nimport Context from \"./Context.js\";\r\n\r\n\r\nconst EXECUTION_WARN_TIMEOUT = 1000;\r\nconst EXPRESSION = /(\\\\?)(\\$\\{(([a-zA-Z0-9\\-_\\s]+)::)?([^\\{\\}]+)\\})/;\r\nconst MATCH_ESCAPED = 1;\r\nconst MATCH_FULL_EXPRESSION = 2;\r\nconst MATCH_EXPRESSION_SCOPE = 4;\r\nconst MATCH_EXPRESSION_STATEMENT = 5;\r\n\r\nconst DEFAULT_NOT_DEFINED = new DefaultValue();\r\nconst toDefaultValue = value => {\r\n\tif (value instanceof DefaultValue)\r\n\t\treturn value;\r\n\r\n\treturn new DefaultValue(value);\r\n};\r\n\r\nconst execute = async function(aStatement, aContext) {\r\n\tif (typeof aStatement !== \"string\")\r\n\t\treturn aStatement;\r\n\t\t\r\n\tconst expression = new Function(\"context\", \r\n`\r\nreturn (async (context) => {\r\n\ttry{ \r\n\t\twith(context){\r\n\t\t\t return ${aStatement}\r\n\t\t}\r\n\t}catch(e){\r\n\t\tthrow e;\r\n\t}\r\n})(context)`\r\n\t);\r\n\t\r\n\tlet timeout = setTimeout(() => {\r\n\t\ttimeout = null;\r\n\t\tconsole.warn(\"long running statement:\", aStatement, new Error());\r\n\t}, EXECUTION_WARN_TIMEOUT)\r\n\tlet result = undefined;\r\n\ttry{\r\n\t\tresult = await expression(aContext);\r\n\t}catch(e){}\r\n\t\r\n\tif(timeout)\r\n\t\tclearTimeout(timeout)\r\n\treturn result;\r\n};\r\n\r\nconst resolve = async function(aResolver, aExpression, aFilter, aDefault) {\r\n\tif (aFilter && aResolver.name != aFilter)\r\n\t\treturn aResolver.parent ? resolve(aResolver.parent, aExpression, aFilter, aDefault) : null;\r\n\t\r\n\tconst result = await execute(aExpression, aResolver.proxy.data);\r\n\tif (result !== null && typeof result !== \"undefined\")\r\n\t\treturn result;\r\n\r\n\telse if (aDefault instanceof DefaultValue && aDefault.hasValue)\r\n\t\treturn aDefault.value;\r\n};\r\n\r\nconst resolveMatch = async (resolver, match, defaultValue) => {\r\n\tif(match[MATCH_ESCAPED])\r\n\t\treturn match[MATCH_FULL_EXPRESSION]; \r\n\t\t\r\n\treturn resolve(resolver, match[MATCH_EXPRESSION_STATEMENT], normalize(match[MATCH_EXPRESSION_SCOPE]), defaultValue);\r\n}\r\n\r\nconst normalize = value => {\r\n\tif (value) {\r\n\t\tvalue = value.trim();\r\n\t\treturn value.length == 0 ? null : value;\r\n\t}\r\n\treturn null;\r\n};\r\n\r\nexport default class ExpressionResolver {\r\n\tconstructor({ context = GLOBAL, parent = null, name = null }) {\r\n\t\tthis.parent = (parent instanceof ExpressionResolver) ? parent : null;\r\n\t\tthis.name = name;\r\n\t\tthis.context = context;\r\n\t\tthis.proxy = new Context(this.context, this);\r\n\t}\r\n\r\n\tget chain() {\r\n\t\treturn this.parent ? this.parent.chain + \"/\" + this.name : \"/\" + this.name;\r\n\t}\r\n\r\n\tget effectiveChain() {\r\n\t\tif (!this.context)\r\n\t\t\treturn this.parent ? this.parent.effectiveChain : \"\";\r\n\t\treturn this.parent ? this.parent.effectiveChain + \"/\" + this.name : \"/\" + this.name;\r\n\t}\r\n\r\n\tget contextChain() {\r\n\t\tconst result = [];\r\n\t\tlet resolver = this;\r\n\t\twhile (resolver) {\r\n\t\t\tif (resolver.context)\r\n\t\t\t\tresult.push(resolver.context);\r\n\r\n\t\t\tresolver = resolver.parent;\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tgetData(key, filter) {\r\n\t\tif (!key)\r\n\t\t\treturn;\r\n\t\telse if (filter && filter != this.name) {\r\n\t\t\tif (this.parent)\r\n\t\t\t\tthis.parent.getData(key, filter);\r\n\t\t} else {\r\n\t\t\tconst property = ObjectProperty.load(this.context, key, false);\r\n\t\t\treturn property ? property.value : null;\r\n\t\t}\r\n\t}\r\n\r\n\tupdateData(key, value, filter) {\r\n\t\tif (!key)\r\n\t\t\treturn;\r\n\t\telse if (filter && filter != this.name) {\r\n\t\t\tif (this.parent)\r\n\t\t\t\tthis.parent.updateData(key, value, filter);\r\n\t\t} else {\r\n\t\t\tif(this.context == null || typeof this.context === \"undefined\"){\r\n\t\t\t\tthis.context = {};\t\t\t\t\r\n\t\t\t\tthis.proxy.updateData(this.context);\r\n\t\t\t}\r\n\t\t\tconst property = ObjectProperty.load(this.context, key);\r\n\t\t\tproperty.value = value;\r\n\t\t\tthis.proxy.resetCache();\r\n\t\t}\r\n\t}\r\n\r\n\tmergeContext(context, filter) {\r\n\t\tif (filter && filter != this.name) {\r\n\t\t\tif (this.parent)\r\n\t\t\t\tthis.parent.mergeContext(context, filter);\r\n\t\t} else {\r\n\t\t\tthis.context = this.context ? ObjectUtils.merge(this.context, context) : context;\r\n\t\t}\r\n\t}\r\n\r\n\tasync resolve(aExpression, aDefault) {\r\n\t\tconst defaultValue = arguments.length == 2 ? toDefaultValue(aDefault) : DEFAULT_NOT_DEFINED;\r\n\t\ttry {\r\n\t\t\tconst match = EXPRESSION.exec(aExpression);\r\n\t\t\tif (match)\r\n\t\t\t\treturn await resolveMatch(this, match, defaultValue);\r\n\t\t\telse\r\n\t\t\t\treturn await resolve(this, normalize(aExpression), null, defaultValue);\r\n\t\t} catch (e) {\r\n\t\t\tconsole.error(\"error at executing statment\\\"\", aExpression, \"\\\":\", e);\r\n\t\t\treturn defaultValue.hasValue ? defaultValue.value : aExpression;\r\n\t\t}\r\n\t}\r\n\r\n\tasync resolveText(aText, aDefault) {\r\n\t\tlet text = aText;\r\n\t\tlet temp = aText; // required to prevent infinity loop\r\n\t\tlet match = EXPRESSION.exec(text);\r\n\t\tconst defaultValue = arguments.length == 2 ? toDefaultValue(aDefault) : DEFAULT_NOT_DEFINED\r\n\t\twhile (match != null) {\r\n\t\t\tconst result = await resolveMatch(this, match, defaultValue);\r\n\t\t\ttemp = temp.split(match[0]).join(); // remove current match for next loop\r\n\t\t\ttext = text.split(match[0]).join(typeof result === \"undefined\" ? \"undefined\" : (result == null ? \"null\" : result));\r\n\t\t\tmatch = EXPRESSION.exec(temp);\r\n\t\t}\r\n\t\treturn text;\r\n\t}\r\n\r\n\tstatic async resolve(aExpression, aContext, aDefault, aTimeout) {\r\n\t\tconst resolver = new ExpressionResolver({ context: aContext });\r\n\t\tconst defaultValue = arguments.length > 2 ? toDefaultValue(aDefault) : DEFAULT_NOT_DEFINED;\r\n\t\tif (typeof aTimeout === \"number\" && aTimeout > 0)\r\n\t\t\treturn new Promise(resolve => {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tresolve(resolver.resolve(aExpression, defaultValue));\r\n\t\t\t\t}, aTimeout);\r\n\t\t\t});\r\n\r\n\t\treturn resolver.resolve(aExpression, defaultValue)\r\n\t}\r\n\r\n\tstatic async resolveText(aText, aContext, aDefault, aTimeout) {\r\n\t\tconst resolver = new ExpressionResolver({ context: aContext });\r\n\t\tconst defaultValue = arguments.length > 2 ? toDefaultValue(aDefault) : DEFAULT_NOT_DEFINED;\r\n\t\tif (typeof aTimeout === \"number\" && aTimeout > 0)\r\n\t\t\treturn new Promise(resolve => {\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tresolve(resolver.resolveText(aText, defaultValue));\r\n\t\t\t\t}, aTimeout);\r\n\t\t\t});\r\n\r\n\t\treturn resolver.resolveText(aText, defaultValue);\r\n\t}\r\n\t\r\n\tstatic buildSecure({context, propFilter, option={deep:true}, name, parent}){\r\n\t\tcontext = ObjectUtils.filter({data: context, propFilter, option});\r\n\t\treturn new ExpressionResolver({context, name, parent});\r\n\t}\r\n};","import \"@default-js/defaultjs-common-utils/src/javascript/String.js\";\n\nexport const NODE_ATTRIBUTE_TEMPLATE = \"template\";\nconst CACHE = {};\nconst getKey = (template, cache, alias) => {\n\tif (!cache) return null;\n\n\tlet key = null;\n\tif (alias) key = alias;\n\telse if (typeof template === \"string\") key = template;\n\telse if (template instanceof URL) key = template.toString();\n\telse if (template instanceof HTMLElement) key = template.selector();\n\n\tif (key) return key.hashcode();\n\n\treturn null;\n};\n\nconst fromURL = async (url, cache, key) => {\n\tconst response = await fetch(url.toString());\n\tconst source = await response.text();\n\treturn fromSource(source, cache, key);\n};\n\nconst fromSource = async (source, cache, key) => {\n\treturn fromElement(create(source, true), cache, key);\n};\n\nconst fromElement = async (element, cache, key) => {\n\tlet template = null;\n\tif (element instanceof HTMLTemplateElement) template = new Template(element, key);\n\telse {\n\t\ttemplate = document.createElement(\"template\");\n\t\tif (element instanceof Node || element instanceof NodeList || element instanceof HTMLCollection || element instanceof Array) template.content.append(element.cloneNode(true));\n\t\telse throw new Error(\"Template type is not supported!\");\n\n\t\ttemplate = new Template(template, key);\n\t}\n\n\tif (!template) throw new Error(\"Template can't loaded!\");\n\n\tif (cache && key) CACHE[key] = template;\n\n\treturn template;\n};\n\nconst getTemplate = (node) => {\n\tlet template = node.find(\":scope > template\").first();\n\tif (!!template) return template;\n\tconst value = node.attr(NODE_ATTRIBUTE_TEMPLATE);\n\tif (!value) return null;\n\ttry {\n\t\ttemplate = find(value).first();\n\t\tif (!!template) return template;\n\t} catch (e) {}\n\treturn new URL(value, location);\n};\n\nexport default class Template {\n\n\t/**\n\t * Create an instance of template.\n\t * \n\t * @param template type of HTMLTemplateElement. Not null.\n\t * @param key identifier at cache, if template to be cached.\n\t */\n\tconstructor(/** @type {HTMLTemplateElement} */ template,/** @type {string} */ key) {\n\t\tthis.template = template;\n\t\tthis.key = key;\n\t}\n\n\timportContent(doc = document) {\n\t\tlet imported = doc.importNode(this.template, true);\n\t\treturn imported.content.childNodes;\n\t}\n\n\tremove() {\n\t\tif (this.key && CACHE[this.key]) delete CACHE[this.key];\n\t}\n\n\tstatic async fetch(url, cache = true, alias = null) {\n\t\tif (typeof url === \"string\") {\n\t\t\treturn Template.load(new URL(url, loaction), cache, alias);\n\t\t} else if (url instanceof URL) return Template.load(url, cache, alias);\n\n\t\tnew Error(\"The url isn't a allowed type! -> [String|URL] required!\");\n\t}\n\n\tstatic async load(template, cache = true, alias = null) {\n\t\tif (template instanceof Template) return template;\n\n\t\tconst key = getKey(template, cache, alias);\n\t\tif (key && CACHE[key]) return CACHE[key];\n\t\telse if (typeof template === \"string\") {\n\t\t\treturn fromSource(template, cache, key);\n\t\t} else if (template instanceof URL) return await fromURL(template, cache, key);\n\t\telse if (template instanceof Node || template instanceof NodeList || template instanceof HTMLCollection || template instanceof HTMLTemplateElement) return fromElement(template, cache, key);\n\n\t\tnew Error(\"The template isn't a allowed type! -> [String|URL|Node|NodeList|HTMLCollection|Template] required!\");\n\t}\n\n\tstatic async loadNodeTemplate(node, defaultTemplate, cache, alias) {\n\t\ttry {\n\t\t\tconst template = getTemplate(node);\n\t\t\tif (template) return Template.load(template, cache, alias);\n\t\t} catch (e) {\n\t\t\tconsole.warn(\"Can't load template from node!\", node, e);\n\t\t}\n\n\t\treturn defaultTemplate;\n\t}\n}\n","export const ATTR_NAME = \"name\";\r\nexport const ATTR_ACTIVE = \"active\";\r\nexport const ATTR_STATEFUL = \"stateful\";\r\nexport const ATTR_COMPONENT_TAG = \"component-tag\";\r\nexport const ATTR_COMPONENT_TAG_ATTRIBUTES = \"component-tag-attributes\";\r\nexport const ATTR_CONTEXT = \"context\";\r\nexport const ATTR_REFRESH = \"refresh\";\r\nexport const ATTR_VIEW = \"view\";","import Component from \"@default-js/defaultjs-html-components/src/Component\";\nimport { define } from \"@default-js/defaultjs-html-components/src/utils/DefineComponentHelper\";\nimport Template, {NODE_ATTRIBUTE_TEMPLATE}  from \"@default-js/defaultjs-template-language/src/Template\";\nimport Resolver from \"@default-js/defaultjs-expression-language/src/ExpressionResolver\";\nimport { privatePropertyAccessor } from \"@default-js/defaultjs-common-utils/src/PrivateProperty\";\nimport NODENAME from \"./Nodename\";\nimport { EVENT_INIT, EVENT_CLICK, EVENT_ACTIVATE, EVENT_DEACTIVATE } from \"./Events\";\nimport { ATTR_NAME, ATTR_ACTIVE, ATTR_COMPONENT_TAG, ATTR_COMPONENT_TAG_ATTRIBUTES, ATTR_STATEFUL, ATTR_CONTEXT, ATTR_VIEW } from \"./Attributes\";\n\nconst ATTRIBUTES = [ATTR_NAME, NODE_ATTRIBUTE_TEMPLATE, ATTR_COMPONENT_TAG, ATTR_COMPONENT_TAG_ATTRIBUTES, ATTR_STATEFUL, ATTR_VIEW];\nconst EVENTS = [EVENT_CLICK, EVENT_ACTIVATE, EVENT_DEACTIVATE];\nconst getTagAttributes = async (route) => {\n\tconst attributes = route.attr(ATTR_COMPONENT_TAG_ATTRIBUTES) || \"{}\";\n\treturn Resolver.resolve(attributes, {}, {});\n};\n\nconst _template = privatePropertyAccessor(NODE_ATTRIBUTE_TEMPLATE);\n\nconst buildComponent = async (route) => {\n\tif (route.hasAttribute(NODE_ATTRIBUTE_TEMPLATE)) {\n\t\tlet template = _template(route);\n\t\tif (!template) {\n\t\t\ttemplate = await Template.loadNodeTemplate(route, null, false);\n\t\t\t_template(route, template);\n\t\t}\n\t\treturn template;\n\t} else {\n\t\tconst tag = route.attr(ATTR_COMPONENT_TAG);\n\t\tconst clazz = customElements.get(tag);\n\t\tconst attributes = await getTagAttributes(route);\n\n\t\tconst element = new clazz();\n\t\tfor (let attribute in attributes) {\n\t\t\tconst value = attributes[attribute];\n\t\t\tif (typeof value === \"string\") element.attr(attribute, value);\n\t\t}\n\n\t\treturn element;\n\t}\n};\n\nclass Route extends Component {\n\tstatic get observedAttributes() {\n\t\treturn ATTRIBUTES;\n\t}\n\n\tstatic get NODENAME() {\n\t\treturn NODENAME;\n\t}\n\n\tstatic get EVENTS() {\n\t\treturn EVENTS;\n\t}\n\n\t#initialized = false;\n\n\tconstructor(setting) {\n\t\tsuper(setting || {});\n\t\tthis.on(\"click\", () => {\n\t\t\tif(!this.active)\n\t\t\t\tthis.trigger(EVENT_CLICK);\n\t\t});\n\t}\n\n\tasync init() {\n\t\tawait super.init();\n\t\tif(!this.#initialized){\n\t\t\tthis.#initialized = true;\n\t\t\tthis.trigger(EVENT_INIT);\n\t\t\tif(this.active)\n\t\t\t\tthis.trigger(EVENT_CLICK);\n\t\t}\n\t}\n\n\tget name() {\n\t\treturn this.attr(ATTR_NAME);\n\t}\n\n\tget view(){\n\t\treturn this.attr(ATTR_VIEW);\n\t}\n\n\tget active() {\n\t\treturn this.hasAttribute(ATTR_ACTIVE);\n\t}\n\n\tset active(active) {\n\t\tconst current = this.active;\n\t\tif (active != current) {\n\t\t\tthis.attr(ATTR_ACTIVE, active ? \"\" : null);\n\t\t\tif (active)\n\t\t\t\tthis.trigger(EVENT_ACTIVATE);\n\t\t\telse \n\t\t\t\tthis.trigger(EVENT_DEACTIVATE);\n\t\t}\n\t}\n\t\n\tget stateful() {\n\t\treturn this.hasAttribute(ATTR_STATEFUL);\n\t}\n\n\tget context(){\n\t\treturn this.attr(ATTR_CONTEXT);\n\t}\t\n\t\n\tget refresh(){\n\t\treturn this.hasAttribute(ATTR_REFRESH);\n\t}\n\n\tasync component() {\t\t\n\t\treturn buildComponent(this);\n\t}\n}\n\ndefine(Route);\nexport default Route;\n","export const ATTR_TARGET = \"target\";\nexport const ATTR_CONTEXT = \"context\";\nexport const ATTR_REFRESH = \"refresh\";\nexport const ATTR_VIEW = \"view\";","import Component from \"@default-js/defaultjs-html-components/src/Component\";\nimport { define } from \"@default-js/defaultjs-html-components/src/utils/DefineComponentHelper\";\nimport NODENAME from \"./Nodename\";\nimport { EVENT_TO_ROUTE } from \"./Events\";\nimport { ATTR_TARGET, ATTR_CONTEXT, ATTR_REFRESH, ATTR_VIEW } from \"./Attributes\";\nimport {} from \"@default-js/defaultjs-html-components/src/utils/NodeHelper\";\n\nconst ATTRIBUTES = [ATTR_TARGET, ATTR_CONTEXT];\n\nconst EVENTS = [EVENT_TO_ROUTE];\n\nclass RouteLink extends Component {\n\tstatic get observedAttributes() {\n\t\treturn ATTRIBUTES;\n\t}\n\n\tstatic get NODENAME() {\n\t\treturn NODENAME;\n\t}\n\n\tstatic get EVENTS() {\n\t\treturn EVENTS;\n\t}\n\n\tconstructor(setting) {\n\t\tsuper(setting || {});\n\t\tthis.on(\"click\", (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tthis.trigger(EVENT_TO_ROUTE);\n\t\t});\n\t}\n\n\tasync init() {}\n\n\tget view() {\n\t\treturn this.attr(ATTR_VIEW);\n\t}\n\n\tget target() {\n\t\treturn this.attr(ATTR_TARGET);\n\t}\n\n\tget context() {\n\t\treturn this.attr(ATTR_CONTEXT);\n\t}\n\n\tget refresh() {\n\t\treturn this.hasAttribute(ATTR_REFRESH);\n\t}\n}\n\ndefine(RouteLink);\nexport default RouteLink;\n","import { toNodeName } from \"@default-js/defaultjs-html-components/src/utils/DefineComponentHelper\";\r\nexport default toNodeName(\"view\");","const DEFINED_DIRECTIVES = [];\n\nconst defineDirective = ({ directive }) => {\n\tif (!(directive instanceof Directive))\n\t\tthrow new Error(\"Implementation dosn't extend Directive class!\");\n\n\tif (directive.rank < Directive.MIN_RANK)\n\t\tthrow new Error(\"The rank of a directive can't be lower as \" + Directive.MIN_RANK + \"!\");\n\n\tif (directive.rank > Directive.MAX_RANK)\n\t\tthrow new Error(\"The rank of a directive can't be grater as \" + Directive.MAX_RANK + \"!\");\n\n\tDEFINED_DIRECTIVES.push(directive);\n\tDEFINED_DIRECTIVES.sort((a, b) => {\n\t\tconst phase = a.phase - b.phase;\n\t\tif(phase == 0)\n\t\t\treturn a.rank - b.rank;\n\t\t\t\n\t\treturn phase;\n\t});\n};\n\nconst PHASE = {\n\tinit: 0,\n\tdata: 1,\n\ttemplate: 2,\n\tcontent: 3,\n\tfinish: 4\n};\n\nexport default class Directive {\n\n\tstatic get PHASE() { return PHASE };\n\tstatic get MIN_RANK() { return 0 };\n\tstatic get MAX_RANK() { return 100000 };\n\n\tconstructor() { };\n\n\tget name() { }\n\tget rank() { }\n\tget phase() {return PHASE.finish}\n\n\t/**\n\t * need to be implemented\n\t * \n\t * return DirectiveResult\n\t */\n\tasync execute(context) {\n\t\treturn context;\n\t}\n\n\n\tstatic define(option) {\n\t\tdefineDirective(option);\n\t}\n\n\tstatic get directives() {\n\t\treturn DEFINED_DIRECTIVES;\n\t}\n};","import { lazyPromise } from \"@default-js/defaultjs-common-utils/src/PromiseUtils\";\r\nimport { defGet, defValue } from \"@default-js/defaultjs-common-utils/src/ObjectUtils\";\r\nimport { privateProperty } from \"@default-js/defaultjs-common-utils/src/PrivateProperty\";\r\nimport Directive from \"./Directive\";\r\nimport Template from \"./Template\";\r\n\r\nconst PRIVATE_WAIT = \"wait\";\r\nconst PRIVATE_CALLBACKS = \"callbacks\";\r\nconst PRIVATE_IGNOREDIRECTIVES = \"ignoreDirectives\";\r\n\r\nconst CONTEXTCLONE = new Set();\r\nconst CONTEXTS = new Map();\r\nconst WARNTIME = 1000;\r\nconst CRITICALTIME = 10000;\r\n\r\nlet observerTimeout = null;\r\nconst observe = (context) => {\r\n\tCONTEXTS.set(context, Date.now());\r\n\trunObserver();\r\n};\r\nconst runObserver = () => {\r\n\tif (observerTimeout == null) {\r\n\t\tobserverTimeout = setTimeout(() => {\r\n\t\t\tobserverTimeout = null;\r\n\t\t\tconst time = Date.now();\r\n\t\t\tCONTEXTS.forEach((createTime, context) => {\r\n\t\t\t\tconst delta = time - createTime;\r\n\t\t\t\tif (context.closed) CONTEXTS.delete(context);\r\n\t\t\t\telse {\r\n\t\t\t\t\tif (delta > CRITICALTIME) {\r\n\t\t\t\t\t\tconsole.error(\"context lives longer then 10s\", delta / 1000, context);\r\n\t\t\t\t\t} else if (delta > WARNTIME) {\r\n\t\t\t\t\t\tconsole.warn(\"context lives longer then 1s\", delta / 1000, context);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tconsole.log(\"open context:\", CONTEXTS.size);\r\n\t\t\tif (CONTEXTS.size > 0) runObserver();\r\n\t\t}, 1000);\r\n\t}\r\n};\r\n\r\nconst toTemplate = (template) => {\r\n\tif (template instanceof Template) return template.importContent();\r\n\telse if (typeof template === String) return create(template);\r\n\treturn template;\r\n};\r\n\r\nlet id = 0;\r\nexport default class Context {\r\n\t#id;\r\n\t#depth;\r\n\t#parent;\r\n\t#renderer;\r\n\t#root;\r\n\t#template;\r\n\t#mode;\r\n\t#subcontexts;\r\n\t#wait;\r\n\t#ignoreDirectives;\r\n\t#callbacks;\r\n\r\n\tconstructor({ content = null, resolver, renderer, template, container, root, mode = \"replace\", target = null, parent = null, wait = null, callbacks = null, ignoreDirective }) {\r\n\t\tif (!resolver) throw new Error('Parameter \"resolver\" is required!');\r\n\t\tif (!renderer) throw new Error('Parameter \"renderer\" is required!');\r\n\t\tif (!template) throw new Error('Parameter \"template\" is required!');\r\n\t\tif (!container) throw new Error('Parameter \"container\" is required!');\r\n\t\tif (!root) throw new Error('Parameter \"root\" is required!');\r\n\r\n\t\tthis.#id = parent ? `${parent.id}->${id++}` : `root::${id++}`;\r\n\t\tthis.#depth = parent ? parent.depth + 1 : 0;\r\n\t\tthis.#parent = parent;\r\n\t\tthis.#renderer = renderer;\r\n\t\tthis.#root = root;\r\n\t\tthis.#template = toTemplate(template);\r\n\t\tthis.#mode = mode;\r\n\t\tthis.#subcontexts = new Set();\r\n\t\tthis.#wait = wait ? wait : lazyPromise();\r\n\t\tthis.#ignoreDirectives = ignoreDirective instanceof Set ? ignoreDirective : new Set();\r\n\t\tthis.#callbacks = callbacks instanceof Array ? callbacks : [];\r\n\r\n\t\tthis.content = content;\r\n\t\tthis.container = container;\r\n\t\tthis.target = target;\r\n\t\tthis.resolver = resolver;\r\n\r\n\t\t/* execution flags */\r\n\t\tthis.stop = false;\r\n\t\tthis.ignore = false;\r\n\t\t//console.log(`context={\"depth\":${this.depth} }, \"id\": ${this.id}`);\r\n\t\t//this.createtAt = new Error();\r\n\r\n\t\tif (parent) {\r\n\t\t\tparent.subcontexts.add(this);\r\n\t\t}\r\n\t}\r\n\r\n\tget id() {\r\n\t\treturn this.#id;\r\n\t}\r\n\tget depth() {\r\n\t\treturn this.#depth;\r\n\t}\r\n\tget parent() {\r\n\t\treturn this.#parent;\r\n\t}\r\n\tget renderer() {\r\n\t\treturn this.#renderer;\r\n\t}\r\n\tget root() {\r\n\t\treturn this.#root;\r\n\t}\r\n\tget template() {\r\n\t\treturn this.#template;\r\n\t}\r\n\tset template(template){\r\n\t\tthis.#template = toTemplate(template);\r\n\t}\r\n\r\n\tget mode() {\r\n\t\treturn this.#mode;\r\n\t}\r\n\tget subcontexts() {\r\n\t\treturn this.#subcontexts;\r\n\t}\r\n\r\n\tget closed() {\r\n\t\treturn this.#wait.resolved;\r\n\t}\r\n\r\n\tignoreDirective(directive) {\r\n\t\tconst ignoreDirectives = this.#ignoreDirectives;\r\n\t\tdirective instanceof Directive ? ignoreDirectives.add(directive.name) : ignoreDirectives.add(directive);\r\n\t}\r\n\r\n\tacceptDirective(directive) {\r\n\t\tconst ignoreDirectives = this.#ignoreDirectives;\r\n\t\tif (directive instanceof Directive) return !(ignoreDirectives.has(directive.name) || ignoreDirectives.has(directive));\r\n\r\n\t\treturn !ignoreDirectives.has(directive);\r\n\t}\r\n\r\n\tfinished(callback) {\r\n\t\tif (this.parent) this.parent.finished(callback);\r\n\t\telse this.ready(callback);\r\n\t}\r\n\r\n\tasync ready(callback) {\r\n\t\tconst callbacks = this.#callbacks;\r\n\t\tif (callback) {\r\n\t\t\tif (callback instanceof Array) callback.forEach((callback) => this.wait.then(callback));\r\n\t\t\telse if (callback instanceof Promise) callbacks.push(async () => await callback);\r\n\t\t\telse if (typeof callback === \"function\") callbacks.push(callback);\r\n\t\t} else {\r\n\t\t\tconst wait = this.#wait;\r\n\t\t\tif (!wait.resolved) {\r\n\t\t\t\tif (!this.ignore) for (let callback of callbacks) await callback(this);\r\n\r\n\t\t\t\tfor (let child of this.subcontexts) await child.ready();\r\n\r\n\t\t\t\tif (this.parent) this.parent.subcontexts.delete(this);\r\n\r\n\t\t\t\twait.resolve(this);\r\n\t\t\t}\r\n\r\n\t\t\treturn wait;\r\n\t\t}\r\n\t}\r\n\r\n\tsubContext({ resolver = this.resolver, renderer = this.renderer, template = this.template, container = this.container, root = this.root, mode = this.mode, target = this.target, ignoreDirective = null } = {}) {\r\n\t\treturn new Context({ resolver, renderer, template, container, mode, root, target, parent: this, ignoreDirective });\r\n\t}\r\n\r\n\tclone({ content = this.content, template = this.template, container = this.container, root = this.root, mode = this.mode, target = this.target, ignoreDirective = this.#ignoreDirectives } = {}) {\r\n\t\treturn new Context({ content, \r\n\t\t\tresolver: this.resolver, \r\n\t\t\trenderer: this.renderer, \r\n\t\t\ttemplate, \r\n\t\t\tcontainer, \r\n\t\t\troot, \r\n\t\t\tmode, \r\n\t\t\ttarget, \r\n\t\t\tignoreDirective,\r\n\t\t\twait: this.#wait,\r\n\t\t\tcallbacks: this.#callbacks\r\n\t\t });\r\n\t}\r\n\r\n\ttoRenderOption({ resolver = this.resolver, renderer = this.renderer, template = this.template, container = this.container, root = this.root, mode = this.mode, target = this.target, ignoreDirective = null } = {}) {\r\n\t\treturn { resolver, renderer, template, container, mode, root, target, parent: null, ignoreDirective };\r\n\t}\r\n}\r\n","export default class DirectiveElement extends HTMLElement{\n\tconstructor(){\n\t\tsuper();\n\t\tthis.hidden = true;\n\t}\n\t\n\t/**\n\t * need to be implemented\n\t * \n\t */\n\tasync execute({template, context}){\n\t\tcontext.content = template.cloneNode(true);\n\t\treturn context;\n\t};\t\n}","import Element from \"../Element.js\"\n\nexport default class ReplaceElement extends Element{\n\tconstructor(){\n\t\tsuper();\n\t\t\n\t\tthis.attachShadow({mode: 'open'});\n\t}\n\tasync execute({template, context}){\n\t\treturn context;\n\t};\t\t\n}\ntry{customElements.define(\"jstl-replace\", ReplaceElement);}catch(e){}//ignore","import Directive from \"../Directive.js\";\nimport Replace from \"../elements/Replace.js\";\n\nclass Initial extends Directive {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tget name() {\n\t\treturn \"initial\";\n\t}\n\tget rank() {\n\t\treturn Directive.MIN_RANK;\n\t}\n\tget phase() {\n\t\treturn Directive.PHASE.init;\n\t}\n\n\tasync execute(context) {\n\t\tconst { template, renderer, resolver } = context;\n\t\tif (!(template instanceof Element)) {\n\t\t\tcontext.content = document.importNode(template, true);\n\t\t} else if (template.attr(\"jstl-ignore\")) {\n\t\t\tcontext.content = document.importNode(template, true);\n\t\t\tcontext.stop = true;\n\t\t\tcontext.ignore = true;\n\t\t} else if (template.attr(\"jstl-async\")) {\n\t\t\tcontext.content = new Replace();\n\t\t\ttemplate.attr(\"jstl-async\", null);\n\t\t\tconst renderOption = context.toRenderOption({ mode: \"replace\", target: context.content });\n\t\t\tsetTimeout(() => {\n\t\t\t\trenderer.render(renderOption);\n\t\t\t}, parseInt(template.attr(\"jstl-async\") || \"250\") || 250);\n\t\t\tcontext.stop = true;\n\t\t\tcontext.ignore = true;\n\t\t} else if (template instanceof HTMLTemplateElement) {\n\t\t\tcontext.content = document.createElement(template.tagName);\n\t\t\tconst subContext = context.subContext({ template: template.content.childNodes, container: context.content.content });\n\t\t\tawait renderer.render(subContext);\n\t\t\tcontext.stop = true;\n\t\t\tcontext.ignore = true;\n\t\t} else if (template.hasAttribute(\"jstl-tagname\")) {\n\t\t\tlet tagname = template.attr(\"jstl-tagname\").trim();\n\t\t\tif (tagname.length > 0) context.content = document.createElement(await resolver.resolveText(template.attr(\"jstl-tagname\")));\n\t\t\telse {\n\t\t\t\tcontext.content = document.importNode(template, true);\n\t\t\t\tcontext.stop = true;\n\t\t\t\tcontext.ignore = true;\n\t\t\t}\n\t\t} else if (template.tagName) {\n\t\t\tlet is = template.attr(\"is\");\n\t\t\tif(is){\n\t\t\t\tis = await resolver.resolveText(is);\n\t\t\t\tconst element = document.createElement(template.tagName, { is });\n\t\t\t\telement.attr(\"is\", is);\n\t\t\t\tcontext.content = element;\n\t\t\t}else\n\t\t\t\tcontext.content =  document.createElement(template.tagName);\n\n\t\t} else {\n\t\t\tcontext.content = document.importNode(template, true);\n\t\t\tcontext.stop = true;\n\t\t\tcontext.ignore = true;\n\t\t}\n\n\t\treturn context;\n\t}\n}\n\nDirective.define({ directive: new Initial() });\n","import Directive from \"../Directive.js\";\nimport ExpressionResolver from \"@default-js/defaultjs-expression-language/src/ExpressionResolver\";\n\nconst MODES = {\n\t\"remote\": async ({ data, context }) => {\t\t\n\t\tconst {resolver, template} = context;\n\t\tdata = await resolver.resolveText(data);\n\t\tdata = new URL(data, location.origin);\n\t\tlet option = await resolver.resolveText(template.attr(\"jstl-data-option\") || \"{}\");\n\t\toption = JSON.parse(option);\n\n\t\tdata = await fetch(data.toString(), option);\n\t\treturn data.json();\n\t},\t\n\t\"set\": async ({ data, context }) => {\n\t\tconst {resolver} = context;\n\t\t\n\t\tdata = await resolver.resolve(data);\n\t\treturn data;\n\t},\n\t\"direct\": async ({ data, context }) => {\n\t\tconst {resolver} = context;\n\t\t\n\t\tdata = await resolver.resolveText(data);\n\t\treturn data;\n\t}\n};\n\nconst updateContext = ({ varname, data, scope, context }) => {\n\tif (varname)\n\t\tcontext.resolver.updateData(varname, data, scope);\n\telse if (scope)\n\t\tcontext.resolver.mergeContext(data, scope);\n\telse{\n\t\tconst resolver = new ExpressionResolver({ context: data, name: \"jstl-data\", parent: context.resolver });\n\t\t//context = context.subContext({resolver});\n\t\tcontext.resolver = resolver;\n\t}\n\t\n\t\t\n\treturn context;\n};\n\n\n\nclass Data extends Directive {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tget name() { return \"data\" }\n\tget rank() { return 1000 }\n\tget phase(){return Directive.PHASE.data}\n\n\tasync execute(context) {\n\t\tif (!(context.template instanceof HTMLElement) || !context.template.attr(\"jstl-data\"))\n\t\t\treturn context;\n\t\t\t\n\t\ttry {\n\t\t\tconst { template } = context;\t\t\t\n\t\t\tconst mode = MODES[(template.attr(\"jstl-data-mode\") || \"remote\")];\n\t\t\tif (!mode)\n\t\t\t\tthrow new Error(\"The jstl-data-mode is unsupported!\");\n\n\t\t\tlet data = template.attr(\"jstl-data\");\n\t\t\tdata = await mode({ data, context });\n\n\t\t\tconst varname = template.attr(\"jstl-data-var\");\n\t\t\tconst scope = template.attr(\"jstl-data-scope\");\n\t\t\tcontext = updateContext({ varname, data, scope, context });\n\t\t} catch (e) {\n\t\t\tconsole.error(e, context.template);\n\t\t}\n\n\t\treturn context;\n\n\t}\n}\n\nDirective.define({ directive: new Data() });","import Directive from \"../Directive.js\";\n\nclass If extends Directive {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tget name() { return \"if\" }\n\tget rank() { return Directive.MIN_RANK + 1000 }\n\tget phase() { return Directive.PHASE.init }\n\n\tasync execute(context) {\n\t\tconst { template } = context;\n\t\tif (!(template instanceof HTMLElement) || !template.attr(\"jstl-if\"))\n\t\t\treturn context;\n\n\t\tconst expression = template.attr(\"jstl-if\");\n\t\tconst resolver = context.resolver;\n\t\tconst result = await resolver.resolve(expression, false);\n\t\tif (!result) {\n\t\t\tcontext.content = null;\n\t\t\tcontext.stop = true;\n\t\t\tcontext.ignore = true;\n\t\t}\n\n\t\treturn context;\n\t}\n}\n\nDirective.define({ directive: new If() });","import Directive from \"../Directive.js\";\n\nclass Choose extends Directive {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tget name() { return \"choose\" }\n\tget rank() { return Directive.MIN_RANK + 1 }\n\tget phase() { return Directive.PHASE.template }\n\n\tasync execute(context) {\n\t\tif (!(context.template instanceof HTMLElement) || !context.template.hasAttribute(\"jstl-choose\") || context.template.children.length == 0)\n\t\t\treturn context;\n\t\t\n\t\t//clone template, before manipulate template\n\t\tcontext.template = context.template.cloneNode(true);\n\t\tconst { template, resolver } = context;\n\t\tlet resolved = false;\n\t\tconst whens = template.find(\":scope > [jstl-when]\");\n\t\tconst length = whens.length;\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tconst node = whens[i];\n\t\t\tif (!resolved && (await resolver.resolve(node.attr(\"jstl-when\"), false)))\n\t\t\t\tresolved = true;\n\t\t\telse\n\t\t\t\tnode.remove();\n\t\t}\n\n\t\tif (resolved)\n\t\t\ttemplate.find(\":scope > [jstl-otherwise]\").remove();\n\n\t\treturn context;\n\t}\n}\n\nDirective.define({ directive: new Choose() });","import Directive from \"../Directive.js\";\nimport Template from \"../Template.js\";\n\nclass Include extends Directive {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tget name() {\n\t\treturn \"include\";\n\t}\n\tget rank() {\n\t\treturn Directive.MIN_RANK;\n\t}\n\tget phase() {\n\t\treturn Directive.PHASE.template;\n\t}\n\n\tasync execute(context) {\n\t\tif (!(context.template instanceof HTMLElement) || !context.template.attr(\"jstl-include\")) return context;\n\t\ttry {\n\t\t\tconst { template, resolver, renderer } = context;\n\t\t\tlet include = template.attr(\"jstl-include\");\n\t\t\tinclude = await resolver.resolveText(include);\n\t\t\tinclude = new URL(include, location);\n\t\t\tinclude = await Template.load(include);\n\n\t\t\tconst mode = template.attr(\"jstl-include-mode\") || \"replace\";\n\n\t\t\tconst subContext = context.subContext({ template: include, container: context.content, mode});\n\t\t\tawait renderer.render(subContext);\n\t\t\tawait subContext.ready();\n\t\t\tcontext.ignore = true;\n\t\t\tcontext.stop = true;\n\n\t\t\treturn context;\n\t\t} catch (e) {\n\t\t\tconsole.error(e, context.template);\n\t\t\treturn context;\n\t\t}\n\t}\n}\n\nDirective.define({ directive: new Include() });\n","import Directive from \"../Directive.js\";\nimport ExpressionResolver from \"@default-js/defaultjs-expression-language/src/ExpressionResolver.js\";\n\nconst ATTRIBUTE = {\n\tDATA: \"jstl-foreach\",\n\tVAR: \"jstl-foreach-var\",\n\tSTATUS: \"jstl-foreach-status\",\n\tCOUNT: \"jstl-foreach-count\",\n\tSTART: \"jstl-foreach-start\",\n\tSTEP: \"jstl-foreach-step\",\n\tCONDITION: \"jstl-foreach-condition\"\n};\n\nconst doCount = async (option) => {\n\tlet { start, step, count, varname, status, resolver } = option;\n\n\tcount = await resolver.resolve(count);\n\tconst length = start + (count * step);\n\tlet stop = false;\n\tfor (let i = start; i < length && !stop; i = i + step) {\n\t\tconst iteration = {}\n\t\titeration[varname] = i;\n\t\titeration[status] = {\n\t\t\tindex: i,\n\t\t\tnumber: i + 1,\n\t\t\tstep,\n\t\t\tcount\n\t\t};\n\t\tstop = !(await iterate(iteration, option));\n\t}\n};\n\nconst doForeach = async (option) => {\n\tlet { data, start, step, count, varname, status, resolver } = option;\n\n\tdata = await resolver.resolve(data);\n\tlet array = data;\n\tif (!(data instanceof Array))\n\t\tarray = Object.getOwnPropertyNames(data);\n\n\tcount = count != \"\" ? await resolver.resolve(count, 0) : null;\n\tconst length = count ? Math.min(start + count, array.length) : array.length;\n\tlet stop = false;\n\tfor (let i = start; i < length && !stop; i = i + step) {\n\t\tconst iteration = {}\n\t\titeration[varname] = data[i];\n\t\titeration[status] = {\n\t\t\tindex: i,\n\t\t\tnumber: i + 1,\n\t\t\tcount: length,\n\t\t\tdata\n\t\t};\n\t\tstop = !(await iterate(iteration, option));\n\t}\n};\n\nconst iterate = async (data, option) => {\n\tlet { template, resolver, renderer, container, condition, context } = option;\n\tresolver = new ExpressionResolver({ context: data, name: \"jstl-foreach\", parent: resolver });\n\n\tcondition = condition ? await resolver.resolve(condition, false) : false;\n\tif (condition)\n\t\treturn false;\n\tconst itemContext = context.subContext({ resolver, container, template, mode: \"append\" });\n\tawait renderer.render(itemContext);\n\tawait itemContext.ready();\n\treturn true;\n};\n\nclass Foreach extends Directive {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tget name() { return \"foreach\" }\n\tget rank() { return Directive.MIN_RANK + 2 }\n\tget phase() { return Directive.PHASE.template }\n\n\tasync execute(context) {\n\t\tif (!(context.template instanceof HTMLElement) || (!context.template.attr(ATTRIBUTE.DATA) && !context.template.attr(ATTRIBUTE.COUNT)))\n\t\t\treturn context;\n\n\t\tcontext.ignore = true;\n\t\ttry {\n\t\t\tconst { template, resolver, renderer, content } = context;\n\t\t\tconst option = {\n\t\t\t\tdata: (template.attr(ATTRIBUTE.DATA) || \"\").trim(),\n\t\t\t\tcount: (template.attr(ATTRIBUTE.COUNT) || \"\").trim(),\n\t\t\t\tstart: await resolver.resolve(template.attr(ATTRIBUTE.START) || \"0\"),\n\t\t\t\tstep: await resolver.resolve(template.attr(ATTRIBUTE.STEP) || \"1\"),\n\t\t\t\tvarname: (template.attr(ATTRIBUTE.VAR) || \"item\").trim(),\n\t\t\t\tstatus: (template.attr(ATTRIBUTE.STATUS) || \"status\").trim(),\n\t\t\t\tcondition: template.attr(ATTRIBUTE.CONDITION),\n\t\t\t\ttemplate: template.childNodes,\n\t\t\t\tresolver,\n\t\t\t\trenderer,\n\t\t\t\tcontainer: content,\n\t\t\t\tcontext\n\t\t\t};\n\t\t\tif ((!option.data || option.data == \"\") && option.count)\n\t\t\t\tawait doCount(option);\n\t\t\telse\n\t\t\t\tawait doForeach(option);\n\n\t\t} catch (error) {\n\t\t\tconsole.error(\"error at jstl-foreach:\", error);\n\t\t}\n\t\treturn context;\n\n\t}\n};\n\nDirective.define({ directive: new Foreach() });","import Directive from \"../Directive.js\";\nimport ExpressionResolver from \"@default-js/defaultjs-expression-language/src/ExpressionResolver.js\";\n\nconst DIRECTIVENAME = \"jstl-repeat\";\nconst IGNOREDIRECTIVE = new Set([DIRECTIVENAME]);\n\nconst ATTRIBUTE = {\n\tDATA: `${DIRECTIVENAME}`,\n\tVAR: `${DIRECTIVENAME}-var`,\n\tSTATUS: `${DIRECTIVENAME}-status`,\n\tCOUNT: `${DIRECTIVENAME}-count`,\n\tSTART: `${DIRECTIVENAME}-start`,\n\tSTEP: `${DIRECTIVENAME}-step`,\n\tCONDITION: `${DIRECTIVENAME}-condition`,\n};\n\nconst doCount = async (option) => {\n\tlet { start, step, count, varname, status, resolver } = option;\n\tcount = await resolver.resolve(count);\n\tconst length = start + count * step;\n\tlet stop = false;\n\tfor (let i = start; i < length && !stop; i = i + step) {\n\t\tconst iteration = {};\n\t\titeration[varname] = i;\n\t\titeration[status] = {\n\t\t\tindex: i,\n\t\t\tnumber: i + 1,\n\t\t\tstep,\n\t\t\tcount,\n\t\t};\n\t\tstop = !(await iterate(iteration, option));\n\t}\n};\n\nconst doRepeat = async (option) => {\n\tlet { data, start, step, count, varname, status, resolver } = option;\n\n\tdata = await resolver.resolve(data);\n\tlet array = data;\n\tif (!(data instanceof Array)) array = Object.getOwnPropertyNames(data);\n\n\tcount = count != \"\" ? await resolver.resolve(count, 0) : null;\n\tconst length = count ? Math.min(start + count, array.length) : array.length;\n\tlet stop = false;\n\tfor (let i = start; i < length && !stop; i = i + step) {\n\t\tconst iteration = {};\n\t\titeration[varname] = data[i];\n\t\titeration[status] = {\n\t\t\tindex: i,\n\t\t\tnumber: i + 1,\n\t\t\tcount: length,\n\t\t\tdata,\n\t\t};\n\t\tstop = !(await iterate(iteration, option));\n\t}\n};\n\nconst iterate = async (data, option) => {\n\tlet { template, resolver, renderer, condition, context } = option;\n\tresolver = new ExpressionResolver({ context: data, name: DIRECTIVENAME, parent: resolver });\n\n\tcondition = condition ? await resolver.resolve(condition, false) : false;\n\tif (condition) return false;\n\n\tconst itemContext =  context.subContext({ resolver, template, mode: \"append\", ignoreDirective: IGNOREDIRECTIVE })\n\tawait renderer.render(itemContext);\n\tawait itemContext.ready();\n\n\treturn true;\n};\n\nclass Repeat extends Directive {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tget name() {\n\t\treturn DIRECTIVENAME;\n\t}\n\tget rank() {\n\t\treturn Directive.MIN_RANK + 3;\n\t}\n\tget phase() {\n\t\treturn Directive.PHASE.template;\n\t}\n\n\tasync execute(context) {\n\t\tif (!(context.template instanceof HTMLElement) || (!context.template.attr(ATTRIBUTE.DATA) && !context.template.attr(ATTRIBUTE.COUNT))) return context;\n\n\t\ttry {\n\t\t\tconst { template, resolver, renderer, content, container } = context;\n\t\t\tconst option = {\n\t\t\t\tdata: (template.attr(ATTRIBUTE.DATA) || \"\").trim(),\n\t\t\t\tcount: (template.attr(ATTRIBUTE.COUNT) || \"\").trim(),\n\t\t\t\tstart: await resolver.resolve(template.attr(ATTRIBUTE.START) || \"0\"),\n\t\t\t\tstep: await resolver.resolve(template.attr(ATTRIBUTE.STEP) || \"1\"),\n\t\t\t\tvarname: (template.attr(ATTRIBUTE.VAR) || \"item\").trim(),\n\t\t\t\tstatus: (template.attr(ATTRIBUTE.STATUS) || \"status\").trim(),\n\t\t\t\tcondition: template.attr(ATTRIBUTE.CONDITION),\n\t\t\t\ttemplate: template,\n\t\t\t\ttagname: content.tagName,\n\t\t\t\tresolver,\n\t\t\t\trenderer,\n\t\t\t\tcontainer,\n\t\t\t\tcontext,\n\t\t\t};\n\t\t\tif ((!option.data || option.data == \"\") && option.count) await doCount(option);\n\t\t\telse await doRepeat(option);\n\t\t} catch (error) {\n\t\t\tconsole.error(\"error at jstl-repeat:\", error);\n\t\t}\n\n\t\tcontext.content = null;\n\t\tcontext.stop = true;\n\t\tcontext.ignore = true;\n\t\treturn context;\n\t}\n}\n\nDirective.define({ directive: new Repeat() });\n","import Directive from \"../Directive.js\";\n\nconst DEFAULT_OPTION = {\n\tmode: \"text\",\n\tunsecure: false,\n\tpreventFormat : false,\n\tmaxLength: 0\t\n};\n\nconst SECURE_HTML_FILTER = \"script, style, body, html, head, object, link\";\n\nconst readOption = async (parent, context) => {\n\tconst resolver = context.resolver;\n\treturn {\n\t\tmode: await resolver.resolveText((parent.attr(\"jstl-text-content-type\") || \"text\").trim().toLowerCase()),\n\t\tunsecure: parent.hasAttribute(\"jstl-text-unsecure\"),\n\t\tpreventFormat: !!parent.attr(\"jstl-text-prevent-format\") || false,\n\t\tmaxLength: parseInt(await resolver.resolveText(parent.attr(\"jstl-text-trim-length\") || \"0\"))\n\t};\n};\n\nconst trimTextLength = (text, length) => {\n\treturn text.length > length ? text.substring(0, length - 3).trim() + \"...\" : text;\n};\n\nconst MODES = {\n\t\"text\" : async (option, context) => {\n\t\tconst {content, resolver, template} = context;\n\t\t\n\t\tlet text = await resolver.resolveText(template.textContent);\t\t\n\t\ttext = create(text,true).content.textContent;\n\t\tif(option.maxLength > 0)\n\t\t\ttext = trimTextLength(text, option.maxLength);\t\t\n\t\t\n\t\tcontent.textContent = text;\t\t\n\t},\n\t\"html\": async (option, context) => {\n\t\tconst {resolver, template} = context;\n\t\t\n\t\tlet content = await resolver.resolveText(template.textContent);\t\t\n\t\tcontent = create(content,true);\t\t\n\t\tcontent = document.importNode(content.content, true);\n\t\t\n\t\tif(option.unsecure)\n\t\t\tcontext.content = content;\t\t\t\n\t\telse{\n\t\t\tcontent.find(SECURE_HTML_FILTER).remove();\t\t\t\n\t\t\tcontext.content = content;\n\t\t}\n\t}\n};\n\n\nclass TextContent extends Directive {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tget name() { return \"text\" }\n\tget rank() { return Directive.MIN_RANK + 1 }\n\tget phase() { return Directive.PHASE.content }\n\n\n\n\tasync execute(context) {\n\t\tconst { template } = context;\n\t\tif (!(template instanceof Text) || template.textContent.trim().length == 0 || (template.parentElement && template.parentElement.hasAttribute(\"jstl-text-ignore\")))\n\t\t\treturn context;\n\n\t\tconst parent = template.parentElement;\n\t\tconst option = parent ? await readOption(parent, context) : DEFAULT_OPTION;\n\t\t\n\t\tconst  mode = MODES[option.mode];\n\t\tif(!mode)\n\t\t\tthrow new Error(\"Text mode \\\"\"+ option.mode + \"\\\" is unsupported!\");\n\t\t\n\t\tawait mode(option, context);\n\t\t\n\t\treturn context;\n\t}\n}\n\nDirective.define({ directive: new TextContent() });","import Directive from \"../Directive.js\";\n\nconst ATTRIBUTE_NAME = /(jstl)?(\\?)?(@)?([^\\?@]+)/i;\n\nconst DEFAULT_EVENT_FUNCTION = \"default\";\nconst OPTION_PREVENT_DEFAULT = \"prevent-default\"\nconst IGNORED_ATTRIBUTES = [\"is\"];\n\nconst EVENTFUNCTIONS = {\n\tdelegate: async (event, handle, setting, type, resolver, content, options, context) => {\n\t\tconst eventhandle = await resolver.resolveText(handle, handle);\n\t\tcontent.on(event, delegater(eventhandle, setting));\n\t},\n\ttoggleclass: async (event, handle, setting, type, resolver, content, options, context) => {\n\t\tconst clazz = options.shift();\n\t\tconst preventDefault = options.includes(OPTION_PREVENT_DEFAULT);\n\t\tconst selector = handle ? await resolver.resolveText(handle, handle) : null;\t\t\n\t\tcontent.on(event, (event) => {\n\t\t\tif(preventDefault)\n\t\t\t\tevent.preventDefault();\n\t\t\tif(selector)\n\t\t\t\tcontent.closests(selector).toggleClass(clazz);\n\t\t\telse\n\t\t\t\tcontent.toggleClass(clazz);\n\t\t});\n\t},\n\ttoggleattribute: async (event, handle, setting, type, resolver, content, options, context) => {\n\t\tconst attribute = options.shift();\n\t\tconst preventDefault = options.includes(OPTION_PREVENT_DEFAULT);\n\t\tconst selector = handle ? await resolver.resolveText(handle, handle) : null;\t\t\n\t\tcontent.on(event, (event) => {\n\t\t\tif(preventDefault)\n\t\t\t\tevent.preventDefault();\n\t\t\tif(selector)\n\t\t\t\tcontent.closests(selector).forEach(element => {\n\t\t\t\t\telement.toggleAttribute(attribute)\t\t\t\t\n\t\t\t\t});\n\t\t\telse \n\t\t\t\tcontent.toggleAttribute(attribute);\n\t\t});\n\t},\n\t[DEFAULT_EVENT_FUNCTION]: async (event, handle, setting, type, resolver, content, options, context) => {\n\t\tconst eventhandle = handle ? await resolver.resolve(handle, handle) : null;\n\n\t\tif (!eventhandle) console.error(new Error(\"Can't resolve \\\"\" + handle + '\" to event handle!'));\n\t\telse if (typeof eventhandle === \"function\") content.on(event, eventhandle);\n\t\telse if (typeof eventhandle === \"string\") content.on(event, delegater(eventhandle, setting));\n\t\telse if (typeof eventhandle === \"object\") {\n\t\t\tconst { capture = false, passive = false, once = false } = eventhandle;\n\t\t\tcontent.on(event, eventhandle.eventHandle, { capture, passive, once });\n\t\t}\n\t},\n};\n\nconst bindAttribute = async ({ condition, name, value, context }) => {\n\tconst { resolver, content, template } = context;\n\n\tlet attribute = !condition ? value : template.attr(name);\n\tcondition = condition ? value : template.attr(\"?\" + name);\n\tconst hasValue = isValue(attribute);\n\n\tif (condition && hasValue) {\n\t\tcondition = await resolver.resolve(condition, false);\n\t\tif (condition === true) content.attr(name, await resolver.resolveText(attribute, attribute));\n\t} else if (condition) {\n\t\tcondition = await resolver.resolve(condition, false);\n\t\tif (condition === true) content.attr(name, true);\n\t} else if (hasValue) {\n\t\tcontent.attr(name, await resolver.resolveText(attribute, attribute));\n\t}\n};\n\nconst isValue = (value) => {\n\treturn value != null && typeof value !== \"undefined\";\n};\n\nconst bindEvent = async ({ condition, name, value, context }) => {\n\tconst { resolver, template, content } = context;\n\n\tcondition = condition ? value : template.attr(\"?@\" + name);\n\tlet handle = !condition ? value : template.attr(\"@\" + name);\n\tlet split = name.split(\":\");\n\tconst event = split.shift();\n\tconst type = (split.shift() || DEFAULT_EVENT_FUNCTION).toLowerCase();\n\t\n\tif(typeof handle === \"undefined\" || handle == null)\n\t\tconsole.error(`Definition of \"${event}\" - event handle at`, content, \"is incorrect!\");\n\n\thandle = handle.trim();\n\tconst setting = {\n\t\tbubble: true,\n\t};\n\n\tif (condition ) {\n\t\tif ((await resolver.resolve(condition, false)) == true) await binding(event, handle, setting, type, resolver, content, split, context);\n\t} else await binding(event, handle, setting, type, resolver, content, split, context);\n};\n\nconst binding = async (event, handle, setting, type, resolver, content, options, context) => {\n\tconst binder = EVENTFUNCTIONS[type];\n\tif (binder) return binder(event, handle, setting, type, resolver, content, options, context);\n};\n\nconst delegater = function (delegate, setting) {\n\treturn function (event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tif (event.currentTarget) event.currentTarget.trigger(delegate, event);\n\t\telse event.target.trigger(delegate, event);\n\t};\n};\n\nclass Attribute extends Directive {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tget name() {\n\t\treturn \"attribute\";\n\t}\n\tget rank() {\n\t\treturn Directive.MIN_RANK;\n\t}\n\tget phase() {\n\t\treturn Directive.PHASE.content;\n\t}\n\n\tasync execute(context) {\n\t\tconst { template } = context;\n\t\tif (!(template instanceof HTMLElement)) return context;\n\n\t\tconst processed = new Set(IGNORED_ATTRIBUTES);\n\t\tfor (const attribute of template.attributes) {\n\t\t\tconst [, jstl, condition, event, name] = ATTRIBUTE_NAME.exec(attribute.name);\n\t\t\tif (!jstl && !processed.has(name)) {\n\t\t\t\tconst value = attribute.value;\n\n\t\t\t\tif (event) await bindEvent({ condition, event, name, value, context });\n\t\t\t\telse await bindAttribute({ condition, name, value, context });\n\t\t\t}\n\t\t\tprocessed.add(name);\n\t\t}\n\n\t\treturn context;\n\t}\n}\n\nDirective.define({ directive: new Attribute() });\n","import Directive from \"../Directive.js\";\r\n\r\nconst ATTRIBUTE__ATTACHELEMENT = \"jstl-attach-element\";\r\nconst ATTRIBUTE__ATTACHELEMENT_MODE = \"jstl-attach-element-mode\";\r\n\r\nconst MODE_APPEND = \"append\";\r\nconst MODE_PREPEND = \"prepend\";\r\nconst MODE_REPLACE = \"replace\";\r\n\r\nconst PRECHECK = /^#.+$/;\r\n\r\nconst getElement = async (template, resolver) => {\r\n\tlet element = (template.attr(ATTRIBUTE__ATTACHELEMENT) || \"\").trim();\r\n\tif (!PRECHECK.test(element)) {\r\n\t\ttry {\r\n\t\t\telement = await resolver.resolve(element, element);\r\n\t\t} catch (e) {}\r\n\t\tif (element instanceof HTMLElement) return element;\r\n\t}\r\n\r\n\ttry {\r\n\t\telement = find(element);\r\n\t} catch (e) {}\r\n\r\n\tif (element && element.length > 0) return element.length == 0 ? element.first() : element;\r\n\r\n\treturn null;\r\n};\r\n\r\nclass AttachElement extends Directive {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tget name() {\r\n\t\treturn \"attach-element\";\r\n\t}\r\n\tget rank() {\r\n\t\treturn Directive.MIN_RANK + 1;\r\n\t}\r\n\tget phase() {\r\n\t\treturn Directive.PHASE.content;\r\n\t}\r\n\r\n\tasync execute(context) {\r\n\t\tconst { resolver, template, content } = context;\r\n\t\tif (!(template instanceof HTMLElement) || !template.attr(ATTRIBUTE__ATTACHELEMENT)) return context;\r\n\t\ttry {\r\n\t\t\tlet element = await getElement(template, resolver);\r\n\t\t\tif (element) {\r\n\t\t\t\tconst mode = template.attr(ATTRIBUTE__ATTACHELEMENT_MODE) || MODE_REPLACE;\r\n\t\t\t\tif (mode == MODE_REPLACE) {\r\n\t\t\t\t\tcontent.empty().append(element);\r\n\t\t\t\t\tcontext.stop = true;\r\n\t\t\t\t\tcontext.ignore = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcontext.ready(({ content }) => {\r\n\t\t\t\t\t\tif (content) {\r\n\t\t\t\t\t\t\tif (mode == MODE_APPEND) content.append(element);\r\n\t\t\t\t\t\t\telse if (mode == MODE_PREPEND) content.prepend(element);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} catch (e) {\r\n\t\t\tconsole.log(e, { context });\r\n\t\t}\r\n\r\n\t\treturn context;\r\n\t}\r\n}\r\nDirective.define({ directive: new AttachElement() });\r\n","import Directive from \"../Directive.js\";\nimport ExpressionResolver from \"@default-js/defaultjs-expression-language/src/ExpressionResolver\";\n\nconst NAME = \"on-finished\";\nconst ATTRIBUTE_ON_FINISHED = `jstl-${NAME}`;\nconst ATTRIBUTE_ON_FINISHED_ASYNC = `${ATTRIBUTE_ON_FINISHED}-async`;\n\nclass OnFinished extends Directive {\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tget name() { return NAME }\n\tget rank() { return Directive.MAX_RANK }\n\tget phase() { return Directive.PHASE.finish }\n\n\n\n\tasync execute(context) {\n\t\tconst { template, content, root } = context;\n\t\tif (!(template instanceof HTMLElement) || !template.hasAttribute(ATTRIBUTE_ON_FINISHED))\n\t\t\treturn context;\n\n\t\tconst expression = template.attr(ATTRIBUTE_ON_FINISHED);\n\t\tconst asyncCall = template.hasAttribute(ATTRIBUTE_ON_FINISHED_ASYNC);\n\n\t\tconst data = {\n\t\t\t$element: content,\n\t\t\t$root: root,\n\t\t\t$template: template\n\t\t};\n\t\tconst resolver = new ExpressionResolver({ context: data, name: \"jstl-data\", parent: context.resolver });\n\n\n\t\tcontext.finished(async () => {\n\t\t\ttry {\n\t\t\t\tif(!asyncCall)\n\t\t\t\t\treturn resolver.resolve(expression, null);\n\t\t\t\t\t\n\t\t\t\tresolver.resolve(expression, null);\r\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t});\n\n\t\treturn context;\n\t}\n}\n\nDirective.define({ directive: new OnFinished() });","import \"@default-js/defaultjs-extdom\";\nimport ExpressionResolver from \"@default-js/defaultjs-expression-language/src/ExpressionResolver.js\";\nimport Template from \"./Template.js\";\nimport Context from \"./Context.js\";\nimport Directive from \"./Directive.js\";\nimport Element from \"./Element.js\";\nimport \"./directives\";\nimport \"./elements\";\n\nexport const SCOPES = {\n\tapplication: \"application\",\n\tdata: \"data\",\n\trender: \"render\",\n\tcontainer: \"container\",\n\tnode: \"node\",\n\tdirective: \"directive\",\n};\n\nconst APPLICATION_SCOPE_RESOLVER = new ExpressionResolver({ name: SCOPES.application });\n\nconst MODEWORKER = {\n\treplace: async ({ container, target = null, content }) => {\n\t\tif (target) {\n\t\t\ttarget.replace(content);\n\t\t} else {\n\t\t\tcontainer.empty();\n\t\t\tcontainer.append(content);\n\t\t}\n\t},\n\tappend: async ({ container, target = null, content }) => {\n\t\tif (target) target.after(content);\n\t\telse container.append(content);\n\t},\n\tprepend: async ({ container, target = null, content }) => {\n\t\tif (target) target.before(content);\n\t\telse container.prepend(content);\n\t},\n};\n\nconst loadTemplateContent = async (template, renderer) => {\n\tif (template) {\n\t\ttemplate = await Template.load(template);\n\t\treturn template.importContent();\n\t} else if (renderer.template) {\n\t\treturn await renderer.template.importContent();\n\t}\n\n\tthrow new Error(\"No content template specified!\");\n};\n\nconst addContent = async (context) => {\n\tif (context.content) {\n\t\tconst modeworker = MODEWORKER[context.mode];\n\t\tif (!modeworker) throw new Error('The \"' + context.mode + '\" is not supported!');\n\t\tawait modeworker(context);\n\t}\n};\n\nconst renderContainer = async (context) => {\n\tlet { template, resolver } = context;\n\tif (!template || template.length == 0) return context;\n\n\tlet content = [];\n\tfor (let nodeTemplate of template) {\n\t\tnodeTemplate.normalize();\n\t\tconst nodeResolver = new ExpressionResolver({ name: SCOPES.node, context: null, parent: resolver });\n\t\tconst nodeContext = await renderNode(context.subContext({ template: nodeTemplate, resolver: nodeResolver }));\n\t\tawait nodeContext.ready();\n\t\tconst node = nodeContext.content;\n\t\tif (node) {\n\t\t\tif (node instanceof Array) content = content.concat(node);\n\t\t\tif (node instanceof NodeList || node instanceof HTMLCollection) content = content.concat(Array.from(node));\n\t\t\telse if (node instanceof Node) content.push(node);\n\t\t}\n\t}\n\n\tcontext.content = content.length != 0 ? content : null;\n\treturn context;\n};\n\nconst renderNode = async (context) => {\n\ttry {\n\t\tlet { template, renderer } = context;\n\t\tif (template instanceof Element) await template.execute(context);\n\t\telse await executeDirectives(context);\n\n\t\tconst { ignore, content } = context;\n\n\t\tif (!ignore && content) {\n\t\t\tlet { resolver } = context;\n\t\t\tconst subTemplate = context.template.childNodes;\n\t\t\tif (subTemplate && subTemplate.length > 0) {\n\t\t\t\tconst containerResolver = new ExpressionResolver({ name: SCOPES.container, context: null, parent: resolver });\n\t\t\t\tconst subContext = await renderer.render(context.subContext({ container: content, template: subTemplate, resolver: containerResolver }));\n\t\t\t\tawait subContext.ready();\n\t\t\t}\n\t\t}\n\n\t\tif (context.content && context.content.tagName && context.content.tagName == \"JSTL\") context.content = context.content.childNodes; //special case to support the old \"<jstl>\" tag.\n\t} catch (e) {\n\t\tconsole.error(\"error at render node:\", e, context);\n\t}\n\treturn context;\n};\n\nconst executeDirectives = async (context) => {\n\tconst directives = Directive.directives;\n\tconst length = directives.length;\n\tfor (let i = 0; i < length && !context.stop; i++) {\n\t\tconst directive = directives[i];\n\t\ttry {\n\t\t\tif (context.acceptDirective(directive)) await directive.execute(context);\n\t\t} catch (e) {\n\t\t\tconsole.error(\"error at directive:\", e, directive, context);\n\t\t}\n\t}\n\treturn context;\n};\n\nexport default class Renderer {\n\tconstructor({ template, data } = {}) {\n\t\tif (template && !(template instanceof Template)) throw new Error(\"template must be an instance of Template!\");\n\n\t\tthis.template = template;\n\t\tthis.resolver = new ExpressionResolver({ name: SCOPES.data, context: data ? data : {}, parent: APPLICATION_SCOPE_RESOLVER });\n\t}\n\n\t/**\n\t * @param\n\t * \t\tcontainer HTMLElement -> target to render in\n\t * @param\n\t * \t\tdata Object|... -> data to used at rendering\n\t * @param\n\t * \t\ttemplate Template|Node|NodeList|HTMLCollection|String -> template to render\n\t * @param\n\t * \t\tmode \"append\"|\"insert\"|\"replace\"\n\t * @param\n\t * \t\ttarget\n\t */\n\tasync render(context) {\n\t\tconst calledWithContext = context instanceof Context;\n\t\tif (!calledWithContext) {\n\t\t\tlet { template = null, data = null, container, root, mode, target } = context;\n\t\t\ttemplate = await loadTemplateContent(template, this);\n\t\t\tconst resolver = new ExpressionResolver({ name: SCOPES.render, context: data, parent: this.resolver });\n\t\t\tcontext = new Context({ resolver, renderer: this, template: template, container, root: root ? root : container, mode: mode ? mode : \"replace\", target });\n\t\t} else if (context.closed) throw new Error(\"calling with closed context\", context);\n\n\t\tconst template = context.template;\n\t\tif (template instanceof Node) await renderNode(context);\n\t\telse await renderContainer(context);\n\t\t\n\t\tawait addContent(context);\n\n\t\tif (!calledWithContext)\n\t\t\tawait context.ready();\n\n\t\treturn context;\n\t}\n\n\tstatic async build({ template, data } = {}) {\n\t\tif (template && template instanceof Promise) template = await template;\n\n\t\ttemplate = template ? await Template.load(template) : null;\n\t\treturn new Renderer({ template, data });\n\t}\n\n\tstatic async render({ container, data, template, mode, target }) {\n\t\tconst renderer = new Renderer({ template, data });\n\t\treturn renderer.render({ container, mode, target });\n\t}\n}\n","import Component from \"@default-js/defaultjs-html-components/src/Component\";\nimport { define } from \"@default-js/defaultjs-html-components/src/utils/DefineComponentHelper\";\nimport NODENAME from \"./Nodename\";\nimport { Renderer, Template } from \"@default-js/defaultjs-template-language\";\nimport { privatePropertyAccessor } from \"@default-js/defaultjs-common-utils/src/PrivateProperty\";\nimport WeakData from \"@default-js/defaultjs-html-components/src/utils/WeakData\";\nimport { ATTR_VIEW } from \"../Application\";\n\nconst _app = privatePropertyAccessor(\"app\");\nconst _route = privatePropertyAccessor(\"route\");\n\nconst ROUTEDATA = new WeakData();\n\nconst ATTR_NAME = \"name\";\nconst ATTRIBUTES = [ATTR_NAME];\nclass View extends Component {\n\n\tstatic get observedAttributes() {\n\t\treturn ATTRIBUTES;\n\t}\n\n\tstatic get NODENAME() {\n\t\treturn NODENAME;\n\t}\n\n\tconstructor(setting) {\n\t\tsuper(setting || {});\n\t}\n\n\tget name(){\n\t\treturn this.attr(ATTR_NAME);\n\t}\n\n\tget app() {\n\t\treturn _app(this);\n\t}\n\n\tset app(app) {\n\t\t_app(this, app);\n\t}\n\n\tget route(){\n\t\treturn _route(this);\n\t}\n\n\tasync display({ route, context, view, refresh = false }) {\n\t\tif (view) throw new Error(\"you must override the display function!\");\n\n\t\t_route(this, route);\n\t\tconst { root, app } = this;\n\t\troot.empty();\n\n\t\tlet component = route.stateful ? ROUTEDATA.value(route, \"component\") : null;\n\t\tif (refresh || !component) {\n\t\t\tcomponent = await route.component();\n\t\t\tif (component instanceof Template) {\n\t\t\t\tawait Renderer.render({\n\t\t\t\t\tcontainer: root,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\t$view: this,\n\t\t\t\t\t\t$app: app,\n\t\t\t\t\t\t$store: app.store,\n\t\t\t\t\t\t$route: route,\n\t\t\t\t\t\t$context: context,\n\t\t\t\t\t},\n\t\t\t\t\ttemplate: component,\n\t\t\t\t});\n\t\t\t\tcomponent = NodeList.from(root.childNodes);\n\t\t\t} else {\n\t\t\t\tif (component instanceof View) {\n\t\t\t\t\tcomponent.app = app;\n\t\t\t\t\tcomponent.ready.then(() => {\n\t\t\t\t\t\tcomponent.display({ route, context, view: this });\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\troot.append(component);\n\t\t\t}\n\n\t\t\tif (route.stateful) ROUTEDATA.value(route, \"component\", component);\n\t\t} else {\n\t\t\tif (component instanceof View) {\n\t\t\t\tcomponent.app = app;\n\t\t\t\tcomponent.ready.then(() => {\n\t\t\t\t\tcomponent.display({ route, context, view: this });\n\t\t\t\t});\n\t\t\t}\n\t\t\troot.append(component);\n\t\t}\n\t}\n}\ndefine(View);\nexport default View;\n","import { defValue } from\"@default-js/defaultjs-common-utils/src/ObjectUtils\";\nexport default class WeakData {\n\tconstructor() {\n\t\tdefValue(this, \"weakmap\", new WeakMap());\n\t}\n\n\tdata(reference) {\n\t\tlet data = this.weakmap.get(reference);\n\t\tif (!data) {\n\t\t\tdata = {};\n\t\t\tthis.weakmap.set(reference, data);\n\t\t}\n\t\treturn data;\n\t}\n\n\tvalue(reference, key, value) {\n\t\tif (arguments.length == 2) return this.data(reference)[key];\n\t\telse if(typeof value === \"undefined\") delete this.data(reference)[key];\n\t\telse this.data(reference)[key] = value;\n\t}\n\n\tdestroy(){\n\t\tthis.weakmap.delete(reference);\n\t}\n};\n\n","import Component from \"@default-js/defaultjs-html-components/src/Component\";\nimport { define, toNodeName } from \"@default-js/defaultjs-html-components/src/utils/DefineComponentHelper\";\nimport { findClosestInDepth } from \"@default-js/defaultjs-html-components/src/utils/NodeHelper\";\nimport { attributeChangeEventname } from \"@default-js/defaultjs-html-components/src/utils/EventHelper\";\nimport { privatePropertyAccessor } from \"@default-js/defaultjs-common-utils/src/PrivateProperty\";\nimport { EVENT_CLICK as ROUTE_CLICK } from \"./Route/Events\";\nimport { EVENT_TO_ROUTE } from \"./RouteLink/Events\";\nimport Resolver from \"@default-js/defaultjs-expression-language/src/ExpressionResolver\";\nimport Route from \"./Route\";\nimport RouteLink from \"./RouteLink\";\nimport View from \"./View\";\n\nconst _view = privatePropertyAccessor(\"view\");\nconst _store = privatePropertyAccessor(\"store\");\n\nconst NODENAME = toNodeName(\"application\");\nexport const EVENT_STORE_CHANGED = \"app-store-changed\";\nexport const ATTR_ROUTE = \"route\";\nexport const ATTR_VIEW = \"view\";\n\nconst findRoute = (app, name) => {\n\tconst selector = `${Route.NODENAME}[name=\"${name}\"]`;\n\treturn app.find(selector).first();\n};\n\nconst closestView = (app, name) => {\n\treturn findClosestInDepth(app.root, (node) => {\n\t\treturn node instanceof View && (name == null || node.name == name);\n\t});\n};\n\nconst findView = (app, name) => {\n\tlet view = null;\n\tif (name) {\n\t\tconst result = app.root.find(`d-view[name=\"${name}\"]`).first();\n\t\tif (result && result.length == 1) view = result.first();\n\t}\n\n\tif (!view) view = closestView(app, name);\n\n\tif (view) view.app = app;\n\n\treturn view;\n};\n\nconst buildRouteContext = async (context, app) => {\n\ttry {\n\t\treturn Resolver.resolve(context, app.store, null);\n\t} catch (e) {\n\t\treturn null;\n\t}\n};\n\nconst ATTRIBUTES = [ATTR_ROUTE, ATTR_VIEW];\n\nclass Application extends Component {\n\tstatic get observedAttributes() {\n\t\treturn ATTRIBUTES;\n\t}\n\n\tstatic get NODENAME() {\n\t\treturn NODENAME;\n\t}\n\n\tconstructor(setting) {\n\t\tsuper(setting || {});\n\n\t\tthis.root.on([ROUTE_CLICK, EVENT_TO_ROUTE], async (event) => {\n\t\t\tthis.route({ route: event.target });\n\t\t});\n\n\t\tthis.on(attributeChangeEventname(ATTR_ROUTE, this), () => {\n\t\t\tif (this.hasAttribute(ATTR_ROUTE)) this.route({ route: this.attr(ATTR_ROUTE) });\n\t\t});\t\t\n\t}\n\n\tasync init() {\n\t\tawait super.init();\n\t\tthis.ready.then(() => {\n\t\t\tif (this.hasAttribute(ATTR_ROUTE)) this.route({ route: this.attr(ATTR_ROUTE) });\n\t\t});\n\t}\n\n\tasync routes() {\n\t\treturn this.root.find(Route.NODENAME);\n\t}\n\n\tasync route({ route, refresh = null, context = null, view = null }) {\n\t\tawait this.ready;\n\n\t\tif (arguments.length == 0) return this.view.route;\n\n\t\tif (typeof route === \"string\") route = findRoute(this, route);\n\t\telse if (route instanceof RouteLink) {\n\t\t\trefresh = refresh != null ? refresh : route.refresh;\n\t\t\tif (context == null) context = await buildRouteContext(route.context, this);\n\t\t\tif (view == null) view = route.view;\n\t\t\troute = findRoute(this, route.target);\n\t\t}\n\t\telse if (!(route instanceof Route)) throw new Error(\"Unsupported route type!\");\n\n\t\tif (refresh == null) refresh = false;\n\t\tif (view == null) view = route.view;\n\n\t\tview = view ? findView(this, view) : this.view;\n\n\t\tif (!refresh && view.route == route) return;\n\n\t\tif (context == null) context = await buildRouteContext(route.context, this);\n\n\t\tif (view.route) view.route.active = false;\n\t\tawait view.display({ route, context, refresh });\n\t\troute.active = true;\n\t}\n\n\tget view() {\n\t\tlet view = _view(this);\n\t\tif (!view) {\n\t\t\tview = findView(this, this.attr(ATTR_VIEW));\n\t\t\t_view(this, view);\n\t\t\tview.app = this;\n\t\t}\n\n\t\treturn view;\n\t}\n\n\tget store() {\n\t\tlet store = _store(this);\n\t\tif (!store) {\n\t\t\tstore = {};\n\t\t\t_store(this, store);\n\t\t}\n\t\treturn store;\n\t}\n}\n\ndefine(Application);\nexport default Application;\n","window.Date.prototype.addDays = function (days) {\r\n    const date = new Date(this);\r\n    date.setDate(date.getDate() + days);\r\n    return date;\r\n};","if ('serviceWorker' in navigator) {\r\n\tnavigator\r\n\t\t.serviceWorker\r\n\t\t.register('./serviceworker.js', { scope: './' })\r\n\t\t.then((reg) => {\r\n\t\t\tconsole.log(reg)\r\n\t\t\tif (reg.installing) {\r\n\t\t\t\tconsole.log('Service worker installing');\r\n\t\t\t} else if (reg.waiting) {\r\n\t\t\t\tconsole.log('Service worker installed');\r\n\t\t\t} else if (reg.active) {\r\n\t\t\t\tconsole.log('Service worker active');\r\n\t\t\t\treg.active.postMessage(\"validate-cache\");\r\n\t\t\t}\r\n\t\t})\r\n\t\t.catch((error) => {\r\n\t\t\t// Registration failed\r\n\t\t\tconsole.log('Registration failed with ' + error);\r\n\t\t});\r\n}","import { componentBaseOf, define } from \"@default-js/defaultjs-html-components\";\r\n\r\nconst NODENAME = \"x-dialog\";\r\nconst CLOSEMARKER = \"[close-modal]\";\r\n\r\nclass HTMLDialogExtentionElement extends componentBaseOf(HTMLDialogElement){\r\n\r\n    static get NODENAME(){ return NODENAME; }\r\n\r\n    constructor(){\r\n        super();\r\n        this.on(\"click\", ({target}) => {\r\n            if(target.is(CLOSEMARKER))\r\n                this.close();\r\n        });\r\n    }\r\n\r\n    async init(){\r\n        await super.init();\r\n    }\r\n\r\n    hide(){\r\n        this.close();\r\n    }\r\n}\r\n\r\ndefine(HTMLDialogExtentionElement, { extends: \"dialog\"});\r\nexport default HTMLDialogExtentionElement;","import { Component, define } from \"@default-js/defaultjs-html-components\";\r\nimport { Renderer, Template } from \"@default-js/defaultjs-template-language\";\r\nimport { login, accessToken } from \"../services/LoginService.js\";\r\n\r\nexport const NODENAME = \"x-login-component\";\r\nconst ATTR_TEMPLATE = \"template\";\r\n\r\nclass WotLoginComponent extends Component {\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME;\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tawait super.init();\r\n\t\tconst user = await login();\r\n\t\tif (user) {\r\n\t\t\tconst attrTemplate = this.attr(ATTR_TEMPLATE);\r\n\t\t\tif (attrTemplate) {\r\n\t\t\t\tconst template = await Template.load(new URL(attrTemplate, location));\r\n\t\t\t\tawait Renderer.render({ container: this, data: { user }, template });\r\n\t\t\t}\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.textContent = \"kein Zugriff erlaubt\";\r\n\t\t}\r\n\t\t\r\n\t}\r\n}\r\n\r\ndefine(WotLoginComponent);\r\n\r\nexport default WotLoginComponent;\r\n","import { TEMPLATE_BASEPATH } from \"../Constants.js\";\r\nimport { Component, define } from \"@default-js/defaultjs-html-components\";\r\nimport { Renderer, Template } from \"@default-js/defaultjs-template-language\";\r\n\r\nexport const NODENAME = \"x-clan\";\r\nexport const ATTR__CLAN_ID = \"clan-id\";\r\nexport const ATTR__CLAN_NAME = \"clan-name\";\r\nexport const ATTR__CLAN_TAG = \"clan-tag\";\r\n\r\nconst TEMPLATE_URL__ROOT = new URL(`${TEMPLATE_BASEPATH}/html-clan-element/root.tpl.html`, location);\r\n\r\nclass HTMLClanElement extends Component {\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME;\r\n\t}\r\n\r\n\t#initialized = false;\r\n\t#clan = null;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.on(`${NODENAME}:sort-member-by-name`, () => {});\r\n\t\tthis.on(`${NODENAME}:sort-member-by-wtr`, () => {});\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tawait super.init();\r\n\t\tif (!this.#initialized) {\r\n\t\t\tconst template = await Template.load(TEMPLATE_URL__ROOT);\r\n\t\t\tawait Renderer.render({ container: this.root, template, data: await this.clanData() });\r\n\t\t}\r\n\t}\r\n\r\n\tasync clanData() {\r\n\t\tif (!this.#clan) {\r\n\t\t\tthis.#clan = {\r\n\t\t\t\tid: this.attr(ATTR__CLAN_ID),\r\n\t\t\t\tname: this.attr(ATTR__CLAN_NAME),\r\n\t\t\t\ttag: this.attr(ATTR__CLAN_TAG),\r\n\t\t\t};\r\n\r\n\t\t\tlet response = await fetch(new URL(`/api/clans/${this.#clan.id}/members`, location));\r\n\t\t\tresponse = await response.json();\r\n\t\t\tthis.#clan.members = response.data;\r\n\t\t}\r\n\r\n\t\treturn this.#clan;\r\n\t}\r\n}\r\n\r\ndefine(HTMLClanElement);\r\nexport default HTMLClanElement;\r\n","import {login} from \"./LoginService.js\";\r\n\r\nconst toURL = (url) => {\r\n    if(!(url instanceof URL))\r\n        return new URL(url, location);\r\n    return url;\r\n};\r\n\r\nconst internalFetch = async (url, request) => {\t\r\n\tconst response = await fetch(toURL(url), request);\r\n\tif(response.ok && response.status >= 400)\r\n\t\treturn await login();\r\n\t\t\r\n\treturn response;\r\n}\r\n\r\nexport const getJSON = async (url) => {\r\n    const response = await internalFetch(url, {headers:{\"content-type\": \"application/json\"}});\r\n    if(response.status < 204)\r\n    \treturn response.json();\r\n};\r\n\r\nexport const postJSON = async (url, data) => {\r\n    const response = await internalFetch(url, {method: \"post\" ,headers:{\"content-type\": \"application/json\"}, body: JSON.stringify(data)});\r\n    if(response.status < 204)\r\n        return response.json();\r\n};\r\n\r\nexport const deleteJSON = async (url) => {\r\n    await internalFetch(url, {method: \"delete\", headers:{\"content-type\": \"application/json\"}});\r\n};","import { getJSON } from \"./ServiceUtils.js\";\r\nimport { member } from \"./LoginService.js\";\r\n\r\nconst ENDPOINT = `/api/members`;\r\n\r\nlet FULLLOADED = false;\r\nconst CACHE = new Map();\r\n\r\nexport const currentMember = async () => {\r\n\treturn member();\r\n};\r\n\r\nexport const getMembers = async () => {\r\n\tlet members = null\r\n\tif (!FULLLOADED) {\r\n\t\tmembers = (await getJSON(ENDPOINT)).data;\r\n\t\tfor (const member of members)\r\n\t\t\tCACHE.set(member.id, member);\r\n\r\n\t\tFULLLOADED = true;\r\n\t}\r\n\telse\r\n\t\tmembers = Array.from(CACHE.values());\r\n\r\n\treturn members.sort((a, b) => {\r\n\t\tif (a.name < b.name)\r\n\t\t\treturn -1;\r\n\t\tif (a.name > b.name)\r\n\t\t\treturn 1;\r\n\t\treturn 0;\r\n\t});\r\n};\r\n\r\nexport const getMember = async (id) => {\r\n\tif (CACHE.has(id))\r\n\t\treturn CACHE.get(id);\r\n\r\n\tconst member = await getJSON(`${ENDPOINT}/${id}`);\r\n\tif (member)\r\n\t\tCACHE.set(member.id, member);\r\n\r\n\treturn member;\r\n}","import { TEMPLATE_BASEPATH, EVENT__GLOBAL_ACTION_RELOADPARENT } from \"../Constants.js\";\r\nimport { Component, define } from \"@default-js/defaultjs-html-components\";\r\nimport { Renderer, Template } from \"@default-js/defaultjs-template-language\";\r\nimport { getMember } from \"../services/MemberService.js\";\r\n\r\nconst TEMPLATES_PATH = `${TEMPLATE_BASEPATH}/html-member-element`\r\nexport const NODENAME = \"x-member\";\r\nconst ATTR__MEMBERID = \"member-id\";\r\n\r\nconst TEMPLATE_ROOT = Template.load(new URL(`${TEMPLATES_PATH}/root.tpl.html`, location));\r\n\r\nclass HTMLMemberElement extends Component {\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME;\r\n\t}\r\n\r\n\t#initialized = false;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tconst root = this.root;\r\n\t\t\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tawait super.init();\r\n\t\tif (!this.#initialized) {\r\n\t\t\tawait this.render();\r\n            this.#initialized = true;\r\n\t\t}\r\n\t}\r\n\r\n\tget memberId(){\r\n\t\treturn parseInt(this.attr(ATTR__MEMBERID));\r\n\t}\r\n\r\n    async render() {\r\n        const template = await TEMPLATE_ROOT;\r\n\t\tconst member = await getMember(this.memberId);\t\t\r\n\t\tthis.attr(\"filterable-content\", `${member.name}`.toLowerCase());\r\n\t\tawait Renderer.render({ container: this.root, template, data: {member} });\r\n    }\r\n}\r\n\r\ndefine(HTMLMemberElement);\r\nexport default HTMLMemberElement;\r\n","import {getJSON, postJSON, deleteJSON} from \"./ServiceUtils.js\";\r\n\r\nconst ENDPOINT = `/api/campaigns`;\r\n\r\nconst CACHE = new Map();\r\n\r\nexport const getCampaigns = async () => {\r\n    let campaigns = null\r\n    if(CACHE.size == 0){\r\n        campaigns = (await getJSON(ENDPOINT)).data;\r\n        for(const campaign of campaigns)\r\n            CACHE.set(campaign.id, campaign);\r\n    }\r\n    else {\r\n        campaigns = [];\r\n        for(const [key, campaign] of CACHE)\r\n            campaigns.push(campaign);\r\n    }\r\n    return campaigns;\r\n};\r\n\r\nexport const getCampaign = async (id) => {\r\n    if(CACHE.has(id))\r\n        return CACHE.get(id);\r\n\r\n    const campaign = (await getJSON(`${ENDPOINT}/${id}`));\r\n    CACHE.set(campaign.id, campaign);\r\n    \r\n    return campaign;\r\n};\r\n\r\nexport const storeCampaign = async (campaign) => {\r\n    campaign = (await postJSON(`${ENDPOINT}`, campaign));\r\n    CACHE.set(campaign.id, campaign);\r\n    \r\n    return campaign;\r\n};\r\n\r\nexport const deleteCampaign = async (id) => {\r\n    await deleteJSON(`${ENDPOINT}/${id}`);\r\n    CACHE.delete(id);\r\n};","export const HTML_TAG_PREFIX = \"d-\";\nexport const TRIGGER_TIMEOUT = 10;\nexport const EVENTHANDLE_TIMEOUT = 10;\nexport const EVENTHANDLE_INPUT_TIMEOUT = 50 * EVENTHANDLE_TIMEOUT;\n\nexport const NODENAME_FORM = `${HTML_TAG_PREFIX}form`;\nexport const NODENAME_SUBMIT_ACTION = `${HTML_TAG_PREFIX}submit-action`;\nexport const NODENAME_PAGE = `${HTML_TAG_PREFIX}page`;\nexport const NODENAME_FIELD = `${HTML_TAG_PREFIX}field`;\nexport const NODENAME_CONTAINER = `${HTML_TAG_PREFIX}container`;\n\nexport const NODENAME_LIST = `${HTML_TAG_PREFIX}list`;\nexport const NODENAME_LIST_ROWS= `${HTML_TAG_PREFIX}rows`;\nexport const NODENAME_LIST_ROW= `${HTML_TAG_PREFIX}row`;\nexport const NODENAME_LIST_ADD_ROW= `${HTML_TAG_PREFIX}add-row`;\nexport const NODENAME_LIST_DELETE_ROW= `${HTML_TAG_PREFIX}delete-row`;\n\nexport const NODENAME_PROGESSBAR = `${HTML_TAG_PREFIX}progress-bar`;\nexport const NODENAME_STEP = `${HTML_TAG_PREFIX}step`;\n\nexport const NODENAME_VALIDATION = `${HTML_TAG_PREFIX}validation`;\nexport const NODENAME_MESSAGE = `${HTML_TAG_PREFIX}message`;\n\nexport const NODENAME_CONTROL = `${HTML_TAG_PREFIX}control`;\nexport const NODENAME_CONTROL_BACK = `${HTML_TAG_PREFIX}control-back`;\nexport const NODENAME_CONTROL_NEXT = `${HTML_TAG_PREFIX}control-next`;\nexport const NODENAME_CONTROL_CANCEL = `${HTML_TAG_PREFIX}control-cancel`;\nexport const NODENAME_CONTROL_SUMMARY = `${HTML_TAG_PREFIX}control-summary`;\nexport const NODENAME_CONTROL_SUBMIT = `${HTML_TAG_PREFIX}control-submit`;\n\n\nexport const FORMSTATE_INIT = \"init\";\nexport const FORMSTATE_VALIDATING = \"validating\";\nexport const FORMSTATE_INPUT = \"input\";\nexport const FORMSTATE_SUMMARY = \"summary\";\nexport const FORMSTATE_FINISHED = \"finished\";\nexport const FORMSTATES = {\n\tinit: FORMSTATE_INIT,\n\tvalidating: FORMSTATE_VALIDATING,\n\tinput: FORMSTATE_INPUT,\n\tsummary: FORMSTATE_SUMMARY,\n\tfinished: FORMSTATE_FINISHED,\n};\n\nexport const REQUIREDSTATES = {\n\talways: \"always\",\n\tonActive: \"on-active\",\n};\n\nexport const EVENT_PREFIX = HTML_TAG_PREFIX + \"form-\";\n\nexport const EVENT_INITIALIZE = `${EVENT_PREFIX}initialize`;\nexport const EVENT_INITIALIZED = `${EVENT_PREFIX}initialized`;\n\nexport const EVENT_INITIALIZE_SUBMIT_ACTION = `${EVENT_INITIALIZE}submit-action`;\nexport const EVENT_SUBMIT = `${EVENT_PREFIX}submit`;\nexport const EVENT_SUBMIT_RESULTS = `${EVENT_PREFIX}submit-results`;\nexport const EVENT_EXECUTE_VALIDATE = `${EVENT_PREFIX}execute-validate`;\nexport const EVENT_CONDITION_STATE_CHANGED = `${EVENT_PREFIX}condition-state-changed`;\nexport const EVENT_ALL_PUBLISH_VALUE = `${EVENT_PREFIX}all-publish-value`;\nexport const EVENT_VALUE_CHANGED = `${EVENT_PREFIX}field-value-changed`;\nexport const EVENT_SITE_CHANGED = `${EVENT_PREFIX}site-changed`;\nexport const EVENT_FORM_STATE_CHANGED = `${EVENT_PREFIX}state-changed`;\nexport const EVENT_FIELD_INPUT = `${EVENT_PREFIX}field-input`;\nexport const EVENT_LIST_ROW_ADD = `${EVENT_PREFIX}list-row-add`;\nexport const EVENT_LIST_ROW_DELETE = `${EVENT_PREFIX}list-row-delete`;\nexport const EVENT_PROGRESSBAR_CHANGED = `${EVENT_PREFIX}progress-bar-changed`;\n\nexport const EVENT_FIELD_INITIALIZED = `${EVENT_PREFIX}field-initialized`;\nexport const EVENT_FIELD_REMOVED = `${EVENT_PREFIX}field-removed`;\n\nexport const EVENT_PAGE_INITIALIZED = `${EVENT_PREFIX}page-initialized`;\nexport const EVENT_PAGE_REMOVED = `${EVENT_PREFIX}page-removed`;\n\nexport const EVENT_VALIDATION_INITIALIZED = `${EVENT_PREFIX}validation-initialized`;\nexport const EVENT_VALIDATION_REMOVED = `${EVENT_PREFIX}validation-removed`;\n\nexport const EVENT_MESSAGE_INITIALIZED = `${EVENT_PREFIX}message-initialized`;\nexport const EVENT_MESSAGE_REMOVED = `${EVENT_PREFIX}message-removed`;\n\nexport const EVENT_ACTIVE_STATE_CHANGED = `${EVENT_PREFIX}active-state-changed`;\nexport const EVENT_VALID_STATE_CHANGED = `${EVENT_PREFIX}valid-state-changed`;\nexport const EVENT_EDITABLE_STATE_CHANGED = `${EVENT_PREFIX}editable-state-changed`;\n\n\nexport const SPECIALVARS = {\n\tCURRENTVALUE: \"$value\",\n\tCURRENTLISTROW: \"$item\",\n};\n\n//ATTRIBUTES\n\nexport const ATTRIBUTE_NAME = \"name\";\nexport const ATTRIBUTE_ENDPOINT = \"endpoint\";\nexport const ATTRIBUTE_METHOD = \"method\";\nexport const ATTRIBUTE_STATE = \"state\";\n\nexport const ATTRIBUTE_STEP = \"step\";\nexport const ATTRIBUTE_USE_SUMMARY_PAGE = \"use-summary-page\";\nexport const ATTRIBUTE_INPUT_MODE_AFTER_SUBMIT = \"input-mode-after-submit\";\nexport const ATTRIBUTE_REQUIRED = \"required\";\nexport const ATTRIBUTE_REQUIRED_ON_ACTIVE_ONLY = \"required-on-active-only\";\nexport const ATTRIBUTE_CONDITION = \"condition\";\nexport const ATTRIBUTE_ACTIVE = \"active\";\nexport const ATTRIBUTE_DISABLED = \"disabled\";\nexport const ATTRIBUTE_EDITABLE = \"editable\";\nexport const ATTRIBUTE_EDITABLE_CONDITION = \"editable-condition\";\nexport const ATTRIBUTE_READONLY = \"readonly\";\nexport const ATTRIBUTE_NOVALUE = \"no-value\";\nexport const ATTRIBUTE_VALID = \"valid\";\nexport const ATTRIBUTE_INVALID = \"invalid\";\nexport const ATTRIBUTE_EVALUATE = \"evaluate\";\nexport const ATTRIBUTE_CONDITION_VALID = \"condition-valid\";\nexport const ATTRIBUTE_CONDITION_INVALID = \"condition-invalid\";\nexport const ATTRIBUTE_MIN = \"min\";\nexport const ATTRIBUTE_MAX = \"max\";\nexport const ATTRIBUTE_PROGRESS = \"progress\";\n","import { ATTRIBUTE_CONDITION } from \"../Constants\";\r\nimport { ExpressionResolver } from \"@default-js/defaultjs-expression-language\";\r\n\r\nclass ConditionHandle {\r\n\r\n    #base;\r\n    #condition;\r\n\r\n    constructor(base){  \r\n        this.#base = base;\r\n    }\r\n\r\n    get condition(){\r\n        if(!this.#condition)\r\n            this.#condition = this.#base.attr(ATTRIBUTE_CONDITION) || false;\r\n\r\n        return this.#condition;\r\n    }\r\n\r\n    async validate(data){\r\n        const base = this.#base;        \r\n        let condition = this.condition;\r\n        const current = base.condition;\r\n        \r\n        //console.log(`condition(${base.name})`, condition, data);        \r\n        \r\n        condition = condition ? await ExpressionResolver.resolve(condition, data, false) : true;\r\n        if(condition != current)\r\n            base.condition = condition\r\n\r\n        //console.log(`condition(${base.name}) result:`, condition);\r\n        return condition;\r\n    }\r\n};\r\n\r\nexport default ConditionHandle;","import { ATTRIBUTE_EDITABLE_CONDITION } from \"../Constants\";\r\nimport { ExpressionResolver } from \"@default-js/defaultjs-expression-language\";\r\n\r\nclass EditableHandle {\r\n\t#base;\r\n\t#condition = null;\r\n\r\n\tconstructor(base) {\r\n\t\tthis.#base = base;\r\n\t}\r\n\r\n\tget condition() {\r\n\t\tif (this.#condition == null)\r\n\t\t\tthis.#condition = this.#base.attr(ATTRIBUTE_EDITABLE_CONDITION) || \"\";\r\n\r\n\t\treturn this.#condition;\r\n\t}\r\n\r\n\tasync validate(data) {\r\n        let editable = true;\r\n\t\tconst current = this.#base.editable;\r\n        /*const {hasValue, required} = this.#base;\r\n        \r\n        if(!hasValue && required)\r\n            editable = true;\r\n        else*/ if(this.condition)\r\n            editable = await ExpressionResolver.resolve(this.condition, data, false);\r\n\r\n\t\tif (editable != current) this.#base.editable = editable;\r\n\r\n\t\treturn editable;\r\n\t}\r\n}\r\n\r\nexport default EditableHandle;\r\n","import { EVENT_VALIDATION_INITIALIZED, EVENT_VALIDATION_REMOVED } from \"../Constants\";\r\nimport { ExpressionResolver } from \"@default-js/defaultjs-expression-language\";\r\n\r\nconst validateCustomValidations = async (validations, data, base) => {\r\n\tlet valid = true;\r\n\tfor (let check of validations) {\r\n\t\tif (!(await check({ data, base }))) valid = false;\r\n\t}\r\n\treturn valid;\r\n};\r\n\r\nclass ValidationHandle {\r\n\t#base;\r\n\t#validations = new Set();\r\n\t#customs = new Set();\r\n\r\n\tconstructor(base) {\r\n\t\tthis.#base = base;\r\n\t\tbase.on(EVENT_VALIDATION_INITIALIZED, (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tthis.#validations.add(event.target);\r\n\t\t});\r\n\r\n\t\tbase.on(EVENT_VALIDATION_REMOVED, (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tthis.#validations.delete(event.target);\r\n\t\t});\r\n\t}\r\n\r\n\taddCustomValidation(validation) {\r\n\t\tthis.#customs.add(validation);\r\n\t}\r\n\r\n\tasync validate(data) {\r\n\t\tconst base = this.#base;\r\n\t\tconst customs = this.#customs;\r\n\t\tconst validations = this.#validations;\r\n\t\tconst currentValid = this.#base.valid;\r\n\t\tconst { hasValue, required, condition, editable } = this.#base;\r\n\r\n\t\t//console.log(`${base.nodeName}(${base.name}) validate:`, { hasValue, required, condition, editable, currentValid }, data, base.nodeName);\r\n\t\tlet valid = true;\r\n\t\tif (condition) {\r\n\t\t\tvalid = required ? hasValue : true;\r\n\r\n\t\t\tif (!(await validateCustomValidations(customs, data, base))) valid = false;\r\n\r\n\t\t\tfor (let validation of validations) {\r\n\t\t\t\tif (valid && hasValue) {\r\n\t\t\t\t\tconst test = await ExpressionResolver.resolve(validation.condition, data, true);\r\n\t\t\t\t\tvalidation.active = !test;\r\n\t\t\t\t\tif (!test) valid = false;\r\n\t\t\t\t} else validation.active = false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tbase.valid = valid;\r\n\r\n\t\t//console.log(`${base.nodeName}(${base.name}) validate result:`, {valid});\r\n\t\treturn valid;\r\n\t}\r\n}\r\n\r\nexport default ValidationHandle;\r\n","import {\r\n    EVENT_MESSAGE_INITIALIZED, \r\n    EVENT_MESSAGE_REMOVED\r\n} from \"../Constants\";\r\n\r\n\r\nclass MessageHandle {\r\n\r\n    #messages = new Set();\r\n\r\n    constructor(base){\r\n        base.on(EVENT_MESSAGE_INITIALIZED, (event) =>{\r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            const target = event.target;\r\n            this.#messages.add(target);\r\n        });\r\n\r\n        base.on(EVENT_MESSAGE_REMOVED, (event) =>{            \r\n            event.preventDefault();\r\n            event.stopPropagation();\r\n            const target = event.target;\r\n            this.#messages.delete(target);\r\n        }); \r\n    }\r\n\r\n    async validate(data) {\r\n        for(let message of this.#messages)\r\n            message.update(data);\r\n    }\r\n\r\n};\r\nexport default MessageHandle;","export const noValue = (value) => {\n\treturn value == null || typeof value === \"undefined\";\n};\n\nexport const emtpyOrNoValueString = (value) => {\t\n\treturn noValue(value) || value.trim().length == 0;\n};\n\n\nexport default {\n\tnoValue,\n\temtpyOrNoValueString\n};","import { SPECIALVARS, NODENAME_LIST_ROW } from \"../Constants\";\nimport { noValue } from \"@default-js/defaultjs-common-utils/src/ValueHelper\";\nimport { _value } from \"../BaseField\";\n\nexport const updateData = async (data, name, value) => {\n\tif (!noValue(value)) {\n\t\tif (name) valueHelper(data, name, value);\n\t\telse Object.assign(data, value);\n\t}\n\treturn data;\n};\n\nexport const fieldValueMapToObject = async (map, fieldOrder) => {\t\n\t//console.log(\"fieldValueMapToObject: \", map, fieldOrder);\n\tlet data = {};\n\tif (fieldOrder) {\n\t\tfor (let field of fieldOrder) {\n\t\t\tconst name = field.name;\n\t\t\tconst value = map.get(field);\n\t\t\tdata = await updateData(data, name, value);\n\t\t}\n\t} else {\n\t\tfor (let [{ name }, value] of map) {\n\t\t\tdata = await updateData(data, name, value);\n\t\t}\n\t}\n\n\treturn data;\n};\n\nexport const rebuildDataByFields = async (fields) => {\n\tlet data = {};\n\tfor (let field of fields) {\n\t\tconst value = await field.value();\n\t\tif (!noValue(value)) {\n\t\t\tconst name = field.name;\n\t\t\tdata = await updateData(data, name, value);\n\t\t}\n\t}\n\treturn data;\n};\n\nexport const evaluationData = async (base) => {\n\tawait base.ready;\n\tconst data = {};\n\tdata[SPECIALVARS.CURRENTVALUE] = _value(base);\n\n\tlet row = base.parent(NODENAME_LIST_ROW);\n\tlet temp = data;\n\twhile (row) {\n\t\ttemp[SPECIALVARS.CURRENTLISTROW] = await _value(row);\n\t\ttemp = temp[SPECIALVARS.CURRENTLISTROW];\n\t\trow = row.parent(NODENAME_LIST_ROW);\n\t}\n\n\treturn data;\n};\n\nconst NAME_SPLITTER = /\\./g;\nexport const valueHelper = function (data, name, value) {\n\tconst names = name.split(NAME_SPLITTER);\n\tif (arguments.length == 2) return getValue(data, names);\n\n\tconst del = noValue(value);\n\tif (noValue(data) && del) return data;\n\n\treturn setValue(del, data, value, names);\n};\n\nconst setValue = (remove, data, value, names) => {\n\tif (noValue(data) && remove) return null;\n\n\tconst name = names.shift();\n\tif (names.length == 0) {\n\t\tif (remove) delete data[name];\n\t\telse data[name] = value;\n\t} else {\n\t\tif (noValue(data[name])) data[name] = {};\n\t\tsetValue(remove, data[name], value, names);\n\t}\n\n\treturn data;\n};\n\nconst getValue = (data, names) => {\n\tif (noValue(data)) return null;\n\tif (names.length == 0) return data;\n\n\tconst name = names.shift();\n\treturn getValue(data[name], names);\n};\n","import { \r\n\tEVENT_VALID_STATE_CHANGED,\r\n\tEVENT_CONDITION_STATE_CHANGED,\r\n\tEVENT_ACTIVE_STATE_CHANGED,\r\n\tEVENT_EDITABLE_STATE_CHANGED,\r\n\tATTRIBUTE_ACTIVE, \r\n\tATTRIBUTE_VALID, \r\n\tATTRIBUTE_INVALID, \r\n\tATTRIBUTE_CONDITION_VALID, \r\n\tATTRIBUTE_CONDITION_INVALID, \r\n\tATTRIBUTE_EDITABLE, ATTRIBUTE_READONLY \r\n} from \"../Constants\";\r\n\r\nexport const updateValidState = (target, valid) => {\r\n\tif (typeof valid === \"undefined\" || valid == null) {\r\n\t\ttarget.attr(ATTRIBUTE_INVALID, null);\r\n\t\ttarget.attr(ATTRIBUTE_VALID, null);\r\n\t} else if (valid) {\r\n\t\ttarget.attr(ATTRIBUTE_INVALID, null);\r\n\t\ttarget.attr(ATTRIBUTE_VALID, \"\");\r\n\t} else {\r\n\t\ttarget.attr(ATTRIBUTE_INVALID, \"\");\r\n\t\ttarget.attr(ATTRIBUTE_VALID, null);\r\n\t}\r\n\r\n\ttarget.trigger(EVENT_VALID_STATE_CHANGED);\r\n};\r\n\r\nexport const updateConditionState = (target, valid) => {\r\n\tif (typeof valid === \"undefined\" || valid == null) {\r\n\t\ttarget.attr(ATTRIBUTE_CONDITION_INVALID, null);\r\n\t\ttarget.attr(ATTRIBUTE_CONDITION_VALID, null);\r\n\t} else if (valid) {\r\n\t\ttarget.attr(ATTRIBUTE_CONDITION_INVALID, null);\r\n\t\ttarget.attr(ATTRIBUTE_CONDITION_VALID, \"\");\r\n\t} else {\r\n\t\ttarget.attr(ATTRIBUTE_CONDITION_VALID, null);\r\n\t\ttarget.attr(ATTRIBUTE_CONDITION_INVALID, \"\");\r\n\t}\r\n\r\n\ttarget.trigger(EVENT_CONDITION_STATE_CHANGED);\r\n};\r\n\r\nexport const updateActiveState = (target, active, initial = false) => {\r\n\tconst oldState = target.active;\r\n\tactive ? target.attr(ATTRIBUTE_ACTIVE, \"\") : target.attr(ATTRIBUTE_ACTIVE, null);\r\n\tif (oldState != active || initial) target.trigger(EVENT_ACTIVE_STATE_CHANGED);\r\n};\r\n\r\nexport const updateReadonlyState = (target, readonly, initial = false) => {\r\n\tconst oldState = target.readonly;\r\n\tif (readonly) \r\n\t\ttarget.attr(ATTRIBUTE_READONLY, \"\");\r\n\telse\r\n\t\ttarget.attr(ATTRIBUTE_READONLY, null);\r\n\t\r\n\tif (oldState != readonly || initial) target.trigger(EVENT_EDITABLE_STATE_CHANGED);\r\n};\r\n\r\nexport const updateEditableState = (target, editable, initial = false) => {\r\n\tconst oldState = target.editable;\r\n\tif (editable) \r\n\t\ttarget.attr(ATTRIBUTE_EDITABLE, \"\");\r\n\telse\r\n\t\ttarget.attr(ATTRIBUTE_EDITABLE, null);\r\n\r\n\tif (oldState != editable || initial) target.trigger(EVENT_EDITABLE_STATE_CHANGED);\r\n};","import { NODENAME_FORM, \r\n\tATTRIBUTE_ACTIVE, \r\n\tATTRIBUTE_READONLY, \r\n\tATTRIBUTE_EVALUATE,\r\n\tATTRIBUTE_CONDITION, \r\n\tATTRIBUTE_CONDITION_VALID, \r\n\tATTRIBUTE_CONDITION_INVALID, \r\n\tATTRIBUTE_VALID, \r\n\tATTRIBUTE_EDITABLE_CONDITION, \r\n\tATTRIBUTE_EDITABLE\r\n} from \"./Constants\";\r\nimport Component from \"@default-js/defaultjs-html-components/src/Component\";\r\nimport ConditionHandle from \"./handels/ConditionHandle\";\r\nimport EditableHandle from \"./handels/EditableHandle\";\r\nimport ValidationHandle from \"./handels/ValidationHandle\";\r\nimport MessageHandle from \"./handels/MessageHandle\";\r\nimport { evaluationData } from \"./utils/DataHelper\";\r\nimport { privatePropertyAccessor } from \"@default-js/defaultjs-common-utils/src/PrivateProperty\";\r\nimport { updateActiveState, updateConditionState, updateEditableState, updateReadonlyState, updateValidState } from \"./utils/StateHelper\";\r\n\r\n\r\n\r\n\r\nconst _form = privatePropertyAccessor(\"form\");\r\nconst ATTRIBUTES = [ATTRIBUTE_ACTIVE, ATTRIBUTE_READONLY, ATTRIBUTE_CONDITION, ATTRIBUTE_CONDITION_VALID, ATTRIBUTE_CONDITION_INVALID, ATTRIBUTE_EDITABLE_CONDITION];\r\n\r\nclass Base extends Component {\r\n\tstatic get observedAttributes() {\r\n\t\treturn ATTRIBUTES;\r\n\t}\r\n\t\r\n\t#conditionHandle;\r\n\t#editableHandle;\r\n\t#validationHandle;\r\n\t#messageHandle;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.#messageHandle = new MessageHandle(this);\r\n\t\tthis.#conditionHandle = new ConditionHandle(this);\r\n\t\tthis.#editableHandle = new EditableHandle(this);\r\n\t\tthis.#validationHandle = new ValidationHandle(this);\r\n\t}\r\n\r\n\taddValidation(validation) {\r\n\t\tthis.#validationHandle.addCustomValidation(validation);\r\n\t}\r\n\r\n\tasync validate(data) {\t\t\r\n\t\t//console.log(`${this.nodeName}(${this.name}).validate:`, data)\r\n\t\tthis.attr(ATTRIBUTE_EVALUATE, \"\");\r\n\t\tconst context = Object.assign({}, data, await evaluationData(this));\r\n\t\tawait this.#conditionHandle.validate(context);\r\n\t\tawait this.#editableHandle.validate(context);\r\n\t\tawait this.#validationHandle.validate(context);\r\n\t\tthis.attr(ATTRIBUTE_EVALUATE, null);\r\n\r\n\t\tawait this.#messageHandle.validate(context);\r\n\r\n\t\treturn this.valid;\r\n\t}\r\n\r\n\tget form() {\r\n\t\tlet form = _form(this);\r\n\t\tif (!form) {\r\n\t\t\tform = this.parent(NODENAME_FORM);\r\n\t\t\t_form(this, form);\r\n\t\t}\r\n\t\treturn form;\r\n\t}\r\n\r\n\tget active() {\r\n\t\treturn this.hasAttribute(ATTRIBUTE_ACTIVE);\r\n\t}\r\n\r\n\tset active(active) {\r\n\t\tconst current = this.active;\r\n\t\tif (current != active) {\r\n\t\t\tupdateActiveState(this, active);\r\n\t\t\tthis.activeUpdated();\r\n\t\t}\r\n\t}\r\n\r\n\tasync activeUpdated() {}\r\n\r\n\tget readonly() {\r\n\t\treturn this.hasAttribute(ATTRIBUTE_READONLY);\r\n\t}\r\n\r\n\tset readonly(readonly) {\r\n\t\tif(!this.editable)\r\n\t\t\tupdateReadonlyState(this, true, !this.ready.resolved);\r\n\t\telse\r\n\t\t\tupdateReadonlyState(this, readonly, !this.ready.resolved);\r\n\t\tthis.readonlyUpdated();\r\n\t}\r\n\r\n\tasync readonlyUpdated() {}\r\n\r\n\tget editable() {\r\n\t\treturn this.hasAttribute(ATTRIBUTE_EDITABLE);\r\n\t}\r\n\r\n\tset editable(editable) {\r\n\t\tupdateEditableState(this, editable, !this.ready.resolved);\r\n\t\tthis.editableUpdated();\t\t\r\n\t\tthis.readonly = !editable;\r\n\t}\r\n\r\n\tasync editableUpdated() {\r\n\t}\r\n\r\n\tset condition(condition){\r\n\t\tupdateConditionState(this, condition);\r\n\t\tthis.conditionUpdated();\r\n\t}\r\n\r\n\tget condition() {\r\n\t\treturn !this.hasAttribute(ATTRIBUTE_CONDITION_INVALID);\r\n\t}\r\n\r\n\tasync conditionUpdated() {}\r\n\r\n\tset valid(valid){\r\n\t\tupdateValidState(this, valid);\r\n\t\tthis.validUpdated();\r\n\t}\r\n\r\n\tget valid() {\r\n\t\treturn this.hasAttribute(ATTRIBUTE_VALID);\r\n\t}\r\n\r\n\tasync validUpdated(){}\r\n}\r\n\r\nexport default Base;\r\n","import { EVENT_FIELD_INITIALIZED, EVENT_FIELD_REMOVED, EVENT_CONDITION_STATE_CHANGED, ATTRIBUTE_NAME, ATTRIBUTE_REQUIRED, ATTRIBUTE_NOVALUE } from \"./Constants\";\nimport Base from \"./Base\";\nimport { privatePropertyAccessor } from \"@default-js/defaultjs-common-utils/src/PrivateProperty\";\nimport { dataIsNoValue } from \"./utils/ValueHelper\";\n\nconst _parent = privatePropertyAccessor(\"parent\");\nexport const _value = privatePropertyAccessor(\"value\");\n\nconst ATTRIBUTES = [ATTRIBUTE_NAME, ATTRIBUTE_REQUIRED, ATTRIBUTE_NOVALUE];\n\nexport const findParentField = (field) => {\n\tlet parent = field.parentNode;\n\twhile (parent) {\n\t\tif (parent instanceof BaseField) return parent;\n\n\t\tparent = parent.parentNode;\n\t}\n\treturn null;\n};\n\nconst updateHasValue = (hasValue, field) => {\n\tfield.attr(ATTRIBUTE_NOVALUE, !hasValue ? \"\" : null);\n};\n\nclass BaseField extends Base {\n\tstatic get observedAttributes() {\n\t\treturn ATTRIBUTES.concat(Base.observedAttributes);\n\t}\n\n\tconstructor(options = {}) {\n\t\tsuper(options);\n\t\tconst {value} = options;\n\t\t_value(this, value || null);\t\t\n\t}\n\n\tasync init(){\n\t\tthis.ready.then(() => this.trigger(EVENT_FIELD_INITIALIZED));\n\t\tawait super.init();\n\t}\n\n\tasync destroy() {\t\t\n\t\tthis.publishValue(null);\n\t\tawait super.destroy();\n\t\tthis.trigger(EVENT_FIELD_REMOVED);\n\t}\n\n\tget parentField() {\n\t\tlet parent = _parent(this);\n\t\tif (!parent) {\n\t\t\tparent = findParentField(this);\n\t\t\t_parent(this, parent);\n\t\t}\n\t\treturn parent;\n\t}\n\n\tasync conditionUpdated() {\n\t\tthis.active = this.condition;\n\t\treturn this.publishValue();\n\t}\n\n\tget name() {\n\t\treturn this.getAttribute(ATTRIBUTE_NAME);\n\t}\n\n\tget required() {\n\t\treturn this.hasAttribute(ATTRIBUTE_REQUIRED);\n\t}\n\n\tget hasValue() {\n\t\treturn !this.hasAttribute(ATTRIBUTE_NOVALUE);\n\t}\n\n\tasync value(value) {\n\t\tconst {condition, valid, ready} = this;\n\t\t//console.log(`${this.nodeName}(${this.name}).value: `, arguments, {condition, valid});\n\n\t\tif (arguments.length == 0)\n\t\t\treturn  !condition || !valid ? null : _value(this);\t\t\n\t\t\n\t\tawait ready;\n\t\tconst currentValue = _value(this);\n\n\t\tif (await this.acceptValue(value)) {\n\t\t\tvalue = await this.normalizeValue(value) || value;\n\t\t\tif (currentValue != value) {\t\t\t\t\n\t\t\t\tconst result = await this.updatedValue(value);\t\t\t\t\n\t\t\t\tif(typeof result !== \"undefined\")\n\t\t\t\t\tvalue = result;\n\t\t\t\tawait this.publishValue(value);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync validate(data){\n\t\tconst currentCondition = this.condition;\n\t\tconst currentValid = this.valid;\n\t\tconst valid = await super.validate(data);\n\t\tconst condition = this.condition;\n\t\tthis.validationStateChanged(currentCondition != condition,  currentValid != valid);\n\n\t\treturn valid;\n\t}\n\n\tasync validationStateChanged(conditionChange, validationChanged){\n\t\tconst hasChange = conditionChange || validationChanged;\n\t\tif(hasChange)\n\t\t\tthis.publishValue();\n\t}\n\n\tasync updatedValue(value) { \n\t\treturn value;\n\t}\n\n\tasync publishValue(value) {\n\t\t//console.log(`call ${this.nodeName}(${this.name}).publishValue:`, {arguments: arguments.length, value});\n\t\tawait this.ready;\n\t\tif(arguments.length == 0)\n\t\t\tvalue = _value(this);\n\n\t\t//console.log(\"work with Value:\", value)\t\t\n\t\tconst noValue = dataIsNoValue(value);\t\t\t\t\n\t\tconst condition = this.condition;\n\t\tconst required = this.required;\n\t\tvalue = required && noValue ? null : value;\t\t\n\t\t\n\t\tif(!condition)\n\t\t\tvalue = null;\n\t\telse\n\t\t\t_value(this, value);\n\n\t\t//console.log(`${this.nodeName}(${this.name}).publishValue:`, {required, condition, noValue, value});\n\n\t\tupdateHasValue(!noValue, this);\n\n\t\tif (this.parentField) await this.parentField.childValueChanged(this, value);\n\t\telse if(this.form) await this.form.childValueChanged(this, value);\n\t}\n\n\tasync acceptValue(value) {\n\t\treturn true;\n\t}\n\n\tasync normalizeValue(value) {\n\t\treturn value;\n\t}\n\n\tasync childValueChanged(field, value) {}\n}\nexport default BaseField;\n","import { noValue } from \"@default-js/defaultjs-common-utils/src/ValueHelper\";\r\n\r\nexport const dataIsNoValue = (value) => {    \r\n    if(noValue(value) )\r\n        return true;\r\n\r\n    const type = typeof value;\r\n    if(type === \"string\" && value.trim().length == 0)\r\n        return true;\r\n    if(value instanceof Date)\r\n        return false;\r\n    if(value instanceof Array &&  value.length == 0)\r\n        return true;\r\n    if(value instanceof Set &&  value.length == 0)\r\n        return true;\r\n    if(value instanceof Map &&  value.length == 0)\r\n        return true;\r\n    if(type == \"object\" && Object.getOwnPropertyNames(value).length == 0)\r\n        return true;\r\n    \r\n    return false;\r\n}","import {EVENTHANDLE_TIMEOUT} from \"../Constants\"\n\nexport const toEvents = function() {\n    return Array.from(arguments).join(\" \");\n};\n\nexport const makeEventCopy = (event) => {\n    return {\n        type: event.type,\n        target: event.target,\n        detail: event.detail,\n        currentTarget: event.currentTarget,\n        explicitOriginalTarget: event.explicitOriginalTarget,\n        originalTarget : event.originalTarget,\n        srcElement: event.srcElement,\n        timeStamp: event.timeStamp\n    };\n}\n\nexport const toTimeoutHandle = (handle, preventDefault, stopPropagation, timeout) => {\n    let id = null;\n\n    const prevent = typeof preventDefault === \"function\" ? preventDefault : () => preventDefault;\n    const stop = typeof stopPropagation === \"function\" ? stopPropagation : () => stopPropagation;\n\n    return (event) => {\n        if(prevent(event))\n            event.preventDefault();\n        if(stop(event))\n            event.stopPropagation();\n\n        const eventCopy = makeEventCopy(event);\n\n        if(id)\n            clearTimeout(id);\n                    \n        id = setTimeout(() => {\n            id = null;\n            handle(eventCopy);\n        }, timeout || EVENTHANDLE_TIMEOUT);\n\n    }\n};","import Field from \"../Field\";\n\nexport default class Wrapper {\n\t\n\tstatic findInput(field){ return null;}\n\t\n\t#defaultValue;\n\t\n\tconstructor(field, input) {\n\t\tthis.field = field;\n\t\tthis.input = input;\n\t\tthis.init();\n\t}\n\n\tinit() { }\n\n\tset readonly(disabled) { }\n\n\tasync acceptValue(value) {\n\t\treturn true;\n\t}\n\n\tasync normalizeValue(value) {\n\t\treturn value;\n\t}\n\n\tasync updatedValue() {\n\t}\n\t\n\tget value(){\n\t\treturn null;\n\t}\n\t\n\tget valid(){\n\t\treturn true;\n\t}\n}\n","import { EVENT_FIELD_INPUT, EVENTHANDLE_INPUT_TIMEOUT } from \"../Constants\";\nimport { noValue } from \"@default-js/defaultjs-common-utils/src/ValueHelper\";\nimport { toTimeoutHandle } from \"../utils/EventHelper\";\nimport Wrapper from \"./Wrapper\";\n\nconst INPUTSELECTOR = 'input:not([type=\"file\"],[type=\"radio\"],[type=\"checkbox\"],[type=\"button\"],[type=\"submit\"],[type=\"reset\"]),input:not([type]), textarea';\n\nconst DEFAULTTYPE = \"text\";\n\nconst text = (input) => {\n\treturn {\n\t\taccept: (value) => {\n\t\t\treturn typeof value === \"string\";\n\t\t},\n\t\tgetValue: () => {\n\t\t\treturn input.value;\n\t\t},\n\t\tsetValue: (value) => {\n\t\t\treturn (input.value = value);\n\t\t},\n\t\tnormalize: (value) => {\n\t\t\tif (value) {\n\t\t\t\tvalue = value.trim();\n\t\t\t\treturn value.length > 0 ? value : null;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t};\n};\nconst number = (input) => {\n\treturn {\n\t\taccept: (value) => {\n\t\t\treturn typeof value === \"number\";\n\t\t},\n\t\tgetValue: () => {\n\t\t\treturn input.valueAsNumber;\n\t\t},\n\t\tsetValue: (value) => {\n\t\t\tinput.valueAsNumber = value;\n\t\t},\n\t\tnormalize: (value) => {\n\t\t\tif (!noValue(value) && !Number.isNaN(value)) return value;\n\n\t\t\treturn null;\n\t\t},\n\t};\n};\n\nconst datetime = (input) => {\n\treturn {\n\t\taccept: (value) => {\n\t\t\treturn typeof value === \"string\";\n\t\t},\n\t\tgetValue: () => {\n\t\t\treturn input.value;\n\t\t},\n\t\tsetValue: (value) => {\n\t\t\tinput.value = value;\n\t\t},\n\t\tnormalize: (value) => {\n\t\t\tif (value) return value;\n\n\t\t\treturn null;\n\t\t},\n\t};\n};\n\nconst date = (input) => {\n\treturn {\n\t\taccept: (value) => {\n\t\t\treturn value instanceof Date;\n\t\t},\n\t\tgetValue: () => {\n\t\t\treturn input.valueAsDate;\n\t\t},\n\t\tsetValue: (value) => {\n\t\t\tinput.valueAsDate = value;\n\t\t},\n\t\tnormalize: (value) => {\n\t\t\tif (value) return value;\n\n\t\t\treturn null;\n\t\t},\n\t};\n};\n\nconst TIMEFORMAT = new Intl.DateTimeFormat(\"default\",  {\n  hour: \"numeric\",\n  minute: \"numeric\"\n});\n\n\nconst time = (input) => {\n\treturn {\n\t\taccept: (value) => {\n\t\t\treturn value instanceof Date;\n\t\t},\n\t\tgetValue: () => {\n\t\t\treturn input.value ? new Date(`1970-01-01T${input.value}`) : null;\n\t\t},\n\t\tsetValue: (value) => {\n\t\t\tinput.value = TIMEFORMAT.format(value);\n\t\t},\n\t\tnormalize: (value) => {\n\t\t\tif (value) return value;\n\n\t\t\treturn null;\n\t\t},\n\t};\n};\nconst TYPES = { text, number, datetime,  \"datetime-locale\": datetime, date, time, range: number };\n\nexport default class Text extends Wrapper {\n\tstatic findInput(field) {\n\t\treturn field.find(INPUTSELECTOR).first();\n\t}\n\n\tconstructor(field, input) {\n\t\tsuper(field, input);\n\t}\n\n\tinit() {\n\t\tconst { field, input } = this;\n\t\tconst type = (field.attr(\"input-type\") || input.attr(\"type\") || DEFAULTTYPE).trim().toLowerCase();\n\t\tthis.type = (TYPES[type] || TYPES[DEFAULTTYPE])(input);\n\t\tinput.on(\n\t\t\t\"input\",\n\t\t\ttoTimeoutHandle(\n\t\t\t\t() => {\n\t\t\t\t\tfield.trigger(EVENT_FIELD_INPUT, this.normalizeValue(this.value));\n\t\t\t\t},\n\t\t\t\tfalse,\n\t\t\t\ttrue,\n\t\t\t\tEVENTHANDLE_INPUT_TIMEOUT,\n\t\t\t),\n\t\t);\n\n\t\tfield.trigger(EVENT_FIELD_INPUT, this.normalizeValue(this.value));\n\t}\n\n\tacceptValue(value) {\n\t\tif (value == null || typeof value === \"undefined\") return true;\n\n\t\treturn this.type.accept(value);\n\t}\n\n\tnormalizeValue(value) {\n\t\tif (value == null && typeof value === \"undefined\") return null;\n\n\t\treturn this.type.normalize(value);\n\t}\n\n\tasync updatedValue(value) {\n\t\tconst currentValue = this.type.getValue();\n\t\tif (value != currentValue) this.type.setValue(value);\n\t}\n\n\tset readonly(readonly) {\n\t\tthis.input.attr(\"disabled\", readonly ? \"\" : null);\n\t}\n\n\tget value() {\n\t\treturn this.type.getValue();\n\t}\n\n\tget valid() {\n\t\treturn this.input.checkValidity();\n\t}\n}\n","import { \n\tEVENT_FIELD_INPUT\n} from \"../Constants\";\nimport { toTimeoutHandle } from \"../utils/EventHelper\";\nimport Wrapper from \"./Wrapper\";\nimport { privatePropertyAccessor } from \"@default-js/defaultjs-common-utils/src/PrivateProperty\";\n\nconst _value = privatePropertyAccessor(\"value\");\n\nconst INPUTSELECTOR = 'input[type=\"file\"]';\n\nconst readFile = (file, readFnName) => {\n\treturn new Promise((resolve, reject) => {\n\t\tconst reader = new FileReader();\n\t\treader.addEventListener(\"loadend\", () => {\n\t\t\tresolve({\n\t\t\t\tname: file.name,\n\t\t\t\ttype: file.type,\n\t\t\t\tsize: file.size,\n\t\t\t\tdata: reader.result\n\t\t\t});\n\t\t}, false);\n\t\treader[readFnName](file);\n\t});\n};\n\n//readAsDataURL\n\nconst FORMAT = {\n\t\"form-input\": async (file) => {\n\t\tfile.format = \"form-input\";\n\t\treturn file;\n\t},\n\t\"data-url-base64\": async (file) => {\n\t\tconst result = await readFile(file, \"readAsDataURL\");\n\t\tresult.format = \"data-url-base64\";\n\t\treturn result;\n\t},\n\t\"base64\": async (file) => {\n\t\tconst result = await readFile(file, \"readAsDataURL\");\n\t\tresult.data = result.data.substr(result.data.indexOf(\",\") + 1);\n\t\tresult.format = \"base64\";\n\t\treturn result;\n\t}\n};\n\nconst readFiles = async (files, format, multiple) => {\n\tlet result = [];\n\tfor (let file of files)\n\t\tresult.push(await FORMAT[format](file));\n\n\tif (result.length == 0)\n\t\treturn null;\n\n\n\treturn multiple ? result : result[0];\n};\n\n\n\nexport default class File extends Wrapper {\n\tstatic findInput(field) {\n\t\treturn field.find(INPUTSELECTOR).first();\n\t}\n\n\tconstructor(field, input) {\n\t\tsuper(field, input);\n\t}\n\n\tasync init() {\n\t\tconst { field, input } = this;\n\t\tthis.multiple = input.multiple;\n\t\tthis.format = field.attr(\"file-format\") || \"form-input\";\n\t\tthis.filenameTarget = field.attr(\"file-name-target\");\n\t\tthis.filenameTarget = this.filenameTarget ? field.find(this.filenameTarget).first() : null;\n\t\tconst { format, multiple } = this;\n\n\t\tinput.on(\n\t\t\t\"input\",\n\t\t\ttoTimeoutHandle(\n\t\t\t\tasync () => {\n\t\t\t\t\tthis.updatedValue(await readFiles(input.files, format, multiple));\n\t\t\t\t\tfield.trigger(EVENT_FIELD_INPUT, this.value);\n\t\t\t\t},\n\t\t\t\tfalse,\n\t\t\t\ttrue\n\t\t\t)\n\t\t);\n\n\t\tif (input.files && input.files.length != 0)\n\t\t\tthis.updatedValue(await readFiles(input.files, format, multiple));\n\n\t\tfield.trigger(EVENT_FIELD_INPUT, this.value);\n\t};\n\n\tset readonly(readonly) {\n\t\tthis.input.attr(\"disabled\", readonly ? \"\" : null);\n\t}\n\n\tacceptValue(value) {\n\t\tif (value == null || typeof value === \"undefined\")\n\t\t\treturn true;\n\t\telse if (this.multiple)\n\t\t\treturn value instanceof Array;\n\t\telse\n\t\t\treturn typeof value  === \"object\";\n\t}\n\n\tnormalizeValue(value) {\n\t\tif (value == null || typeof value === \"undefined\")\n\t\t\treturn null;\n\t\telse if (this.multiple)\n\t\t\treturn value.length != 0 ? value : null;\n\t\telse\n\t\t\treturn value;\n\t}\n\n\tupdatedValue(value) {\n\t\tconst currentValue = _value(this);\n\t\tif (value != currentValue) {\n\t\t\t_value(this, value)\n\t\t\tif(!value)\t\t\t\n\t\t\t\tthis.input.value = null;\n\n\t\t\tconst filename = this.filenameTarget;\n\t\t\tif (filename) {\n\t\t\t\tfilename.empty();\n\t\t\t\tif(value){\n\t\t\t\t\tif (this.multiple) {\n\t\t\t\t\t\tfor (let file of value) {\n\t\t\t\t\t\t\tfilename.append(`<span>${file.name}</span>`);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tfilename.append(`<span>${value.name}</span>`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t}\n\n\tget value() {\n\t\treturn _value(this);\n\t}\n\n\tget valid() {\n\t\treturn this.input.checkValidity();\n\t}\n}\n","import Text from \"./Text\";\nimport Checkbox from \"./Checkbox\";\nimport Radio from \"./Radio\";\nimport File from \"./File\";\nimport Select from \"./Select\";\n\nexport const wrappers = [Text, Checkbox, Radio, File, Select];\n\nexport const findWrapper = (field) => {\n\tfor (let wrapper of wrappers) {\n\t\tconst input = wrapper.findInput(field);\n\t\tif (input) return new wrapper(field, input);\n\t}\n\n\treturn null;\n};\n","import { \n\tEVENT_FIELD_INPUT,\n\tEVENTHANDLE_INPUT_TIMEOUT \n} from \"../Constants\";\nimport { toTimeoutHandle } from \"../utils/EventHelper\";\nimport Wrapper from \"./Wrapper\";\n\nconst INPUTSELECTOR = 'input[type=\"checkbox\"]';\n\n\nexport default class Checkbox extends Wrapper {\n\tstatic findInput(field) {\n\t\tconst input = field.find(INPUTSELECTOR);\n\t\tif (input.length == 0)\n\t\t\treturn null;\n\t\t\t\n\t\treturn input.length == 1 ? input.first() : input;\n\t}\n\n\tconstructor(field, input) {\n\t\tsuper(field, input);\n\t}\n\n\tinit() {\n\t\tconst { field, input } = this;\n\t\tthis.multiple = input instanceof NodeList;\n\t\tinput.on(\n\t\t\t\"input\",\n\t\t\ttoTimeoutHandle(\n\t\t\t\t() => {\n\t\t\t\t\tfield.trigger(EVENT_FIELD_INPUT, this.normalizeValue(this.value));\n\t\t\t\t},\n\t\t\t\tfalse,\n\t\t\t\ttrue,\n\t\t\t\tEVENTHANDLE_INPUT_TIMEOUT\n\t\t\t)\n\t\t);\n\n\t\tfield.trigger(EVENT_FIELD_INPUT, this.normalizeValue(this.value));\n\t}\n\n\tset readonly(readonly) {\n\t\tthis.input.attr(\"disabled\", readonly ? \"\" : null);\n\t}\n\n\tget value() {\n\t\tconst value = this.input.val();\n\t\tif (!(value instanceof Map)) return value;\n\t\tif (value.size == 0) return null;\n\n\t\tconst values = [];\n\t\tvalue.forEach((value) => {\n\t\t\tvalues.push(value);\n\t\t});\n\n\t\treturn values;\n\t}\n\n\tnormalizeValue(value) {\n\t\tif (value) {\n\t\t\tif (this.multiple) {\n\t\t\t\tvalue = value.filter((item) => !!item);\n\t\t\t\treturn value.length != 0 ? value : null;\n\t\t\t} else {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tacceptValue(value) {\n\t\tif (value == null || typeof value === \"undefined\")\n\t\t\treturn true;\n\t\telse if (this.multiple)\n\t\t\treturn value instanceof Array;\n\t\telse{\n\t\t\tconst type = typeof value;\n\t\t\treturn type === \"string\" || type === \"boolean\";\n\t\t}\n\t}\n\n\tupdatedValue(value) {\n\t\tthis.input.val(value ? value : null);\n\t}\n}\n","import { \n\tEVENT_FIELD_INPUT,\n\tEVENTHANDLE_INPUT_TIMEOUT \n} from \"../Constants\";\nimport { toTimeoutHandle } from \"../utils/EventHelper\";\nimport Wrapper from \"./Wrapper\";\n\nconst INPUTSELECTOR = 'input[type=\"radio\"]';\n\nconst getRandomInt = () => {\n\treturn Math.floor(Math.random() * Date.now());\n};\n\nexport default class Radio extends Wrapper {\n\tstatic findInput(field) {\n\t\tconst input = field.find(INPUTSELECTOR);\n\t\tif (input.length == 0)\n\t\t\treturn null;\n\n\t\treturn input;\n\t}\n\n\tconstructor(field, input) {\n\t\tsuper(field, input);\n\t}\n\n\tinit() {\n\t\tconst { field, input } = this;\n\t\tconst name = field.name + getRandomInt();\n\t\tfor (let radio of input) radio.name = name;\n\t\tinput.on(\n\t\t\t\"input\",\n\t\t\ttoTimeoutHandle(\n\t\t\t\t() => {\n\t\t\t\t\tfield.trigger(EVENT_FIELD_INPUT, this.normalizeValue(this.value));\n\t\t\t\t},\n\t\t\t\tfalse,\n\t\t\t\ttrue,\n\t\t\t\tEVENTHANDLE_INPUT_TIMEOUT\n\t\t\t)\n\t\t);\n\n\t\tfield.trigger(EVENT_FIELD_INPUT, this.normalizeValue(this.value));\n\t}\n\n\n\tset readonly(readonly) {\n\t\tthis.input.attr(\"disabled\", readonly ? \"\" : null);\n\t}\n\n\tget value() {\n\t\tconst value = this.input.val();\n\t\tif (!(value instanceof Map)) return value;\n\t\tif (value.size == 0) return null;\n\t\treturn value.values().next().value;\n\t}\n\n\tnormalizeValue(value) {\n\t\tif (value)\n\t\t\treturn value;\n\n\t\treturn null;\n\t}\n\n\tacceptValue(value) {\n\t\tif (value == null || typeof value === \"undefined\")\n\t\t\treturn true;\n\t\telse{\n\t\t\tconst type = typeof value;\n\t\t\treturn type === \"string\" || type === \"boolean\";\n\t\t}\n\t}\n\n\tupdatedValue(value) {\n\t\tthis.input.val(value ? value : null);\n\t}\n}\n","import { \n\tEVENT_FIELD_INPUT,\n\tEVENTHANDLE_INPUT_TIMEOUT \n} from \"../Constants\";\nimport { toTimeoutHandle } from \"../utils/EventHelper\";\nimport Wrapper from \"./Wrapper\";\n\nconst INPUTSELECTOR = 'select';\n\nexport default class Text extends Wrapper {\n\tstatic findInput(field) {\n\t\treturn field.find(INPUTSELECTOR).first();\n\t}\n\n\tconstructor(field, input) {\n\t\tsuper(field, input);\t\t\n\t}\n\n\t\n\n\tinit() {\n\t\tconst { field, input } = this;\n\t\tinput.on(\n\t\t\t\"input, changed\",\n\t\t\ttoTimeoutHandle(\n\t\t\t\t() => {\n\t\t\t\t\tfield.trigger(EVENT_FIELD_INPUT, this.value);\n\t\t\t\t},\n\t\t\t\tfalse,\n\t\t\t\ttrue,\n\t\t\t\tEVENTHANDLE_INPUT_TIMEOUT\n\t\t\t)\n\t\t);\n\n\t\t//field.trigger(EVENT_FIELD_INPUT, this.value);\n\t}\n\n\tset readonly(readonly) {\n\t\tthis.input.attr(\"disabled\", readonly ? \"\" : null);\n\t}\n\n\tget value() {\n\t\treturn this.normalizeValue(this.input.multiple ? this.input.val() : this.input.value);\n\t}\n\t\n\tnormalizeValue(value) {\n\t\tif (value) {\n\t\t\tif(this.input.multiple){\n\t\t\t\tvalue = value.filter((item) => item && item.trim().length > 0);\n\t\t\t\treturn value.length != 0 ? value : null;\n\t\t\t} else{\n\t\t\t\tvalue = value.trim();\n\t\t\t\treturn value.length != 0 ? value : null;\t\n\t\t\t}\t\t\t\t\n\t\t}\n\t\t\n\t\treturn null;\n\t}\n\n\tacceptValue(value) {\n\t\tif (value == null || typeof value === \"undefined\")\n\t\t\treturn true;\n\t\telse if (this.input.multiple)\n\t\t\treturn value instanceof Array;\n\t\telse\n\t\t\treturn typeof value === \"string\";\n\t}\n\n\tupdatedValue(value) {\n\t\tconst currentValue =  this.input.val();\n\t\tif (this.field.value != this.value)\n\t\t\tthis.input.val(value ? value : currentValue);\n\t}\n}\n","import { \n\tNODENAME_FIELD, \n\tEVENT_FIELD_INPUT \n} from \"./Constants\";\nimport BaseField, {_value} from \"./BaseField\";\nimport { findWrapper } from \"./wrapper\";\nimport { define } from \"@default-js/defaultjs-html-components\";\nimport { emtpyOrNoValueString, noValue } from \"@default-js/defaultjs-common-utils/src/ValueHelper\";\n\nconst ATTRIBUTES = [\"file-format\"];\n\nclass Field extends BaseField {\n\tstatic get observedAttributes() {\n\t\treturn ATTRIBUTES.concat(BaseField.observedAttributes);\n\t}\n\n\tstatic get NODENAME() {\n\t\treturn NODENAME_FIELD;\n\t}\n\n\t#initialized = false;\n\t#wrapper;\n\n\tconstructor(options) {\n\t\tsuper(options);\n\t\tthis.on(EVENT_FIELD_INPUT, (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\tthis.publishValue(event.detail || null);\n\t\t});\n\t}\n\n\tasync init() {\n\t\tawait super.init();\n\t\tif (!this.#initialized) {\n\t\t\tthis.#initialized = true;\n\t\t\tthis.#wrapper = findWrapper(this);\n\t\t\tif (this.#wrapper){\n\t\t\t\tthis.addValidation(async () => this.#wrapper.valid);\n\t\t\t\tthis.publishValue(this.#wrapper.value);\n\t\t\t}\n\t\t}\n\t}\n\n\treadonlyUpdated() {\n\t\tif (this.#wrapper) this.#wrapper.readonly = this.readonly;\n\t}\n\n\tasync acceptValue(value) {\n\t\treturn this.#wrapper ? this.#wrapper.acceptValue(value) : false;\n\t}\n\n\tasync normalizeValue(value) {\n\t\tif (this.#wrapper) return this.#wrapper.normalizeValue(value);\n\n\t\treturn value;\n\t}\n\n\tasync updatedValue(value) {\n\t\tawait this.ready;\n\t\tvalue = await value;\n\t\tconst wrapper = this.#wrapper;\n\t\tif (wrapper){\n\t\t\tconst current = wrapper.value || null;\n\t\t\tif(current != value)\n\t\t\t\tawait wrapper.updatedValue(value);\n\t\t}\n\t\tawait super.updatedValue(value);\n\t}\n\n\tasync validationStateChanged(conditionChange, validationChanged){\t\t\n\t\tif(conditionChange && this.condition){\t\t\t\n\t\t\tconst wrapper = this.#wrapper;\n\t\t\tconst value = wrapper.value || null;\n\t\t\t//console.log(`validationStateChanged(${this.name} (${conditionChange}, ${validationChanged}) -> ${value}`)\n\t\t\t_value(this, value);\n\t\t}\n\t\t\n\t\treturn super.validationStateChanged(conditionChange, validationChanged);\n\t}\n}\n\ndefine(Field);\nexport default Field;\n","import { \n\tNODENAME_VALIDATION,\n\tEVENT_VALIDATION_INITIALIZED,\n\tEVENT_VALIDATION_REMOVED,\n\tATTRIBUTE_ACTIVE,\n\tATTRIBUTE_CONDITION\n} from \"./Constants\";\nimport {Component, define} from \"@default-js/defaultjs-html-components\";\n\nconst ATTRIBUTES = [ATTRIBUTE_ACTIVE, ATTRIBUTE_CONDITION];\n\n\nclass Validation extends Component {\n\tstatic get observedAttributes() {\n\t\treturn ATTRIBUTES;\n\t}\n\n\tstatic get NODENAME() {\n\t\treturn NODENAME_VALIDATION;\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tasync init() {\n\t\tawait super.init();\n\t\tthis.active = false;\n\t\tthis.ready.then(() => this.trigger(EVENT_VALIDATION_INITIALIZED));\n\t}\n\n\tasync destroy() {\n\t\tthis.trigger(EVENT_VALIDATION_REMOVED);\n\t\tawait super.destroy();\n\t}\n\n\tget active() {\n\t\treturn this.hasAttribute(ATTRIBUTE_ACTIVE);\n\t}\n\tset active(active) {\n\t\tactive ? this.attr(ATTRIBUTE_ACTIVE, \"\") : this.attr(ATTRIBUTE_ACTIVE, undefined);\n\t}\n\n\tget condition() {\n\t\treturn this.attr(ATTRIBUTE_CONDITION);\n\t}\n}\ndefine(Validation);\nexport default Validation;\n","import BaseField from \"../BaseField\";\nimport Validation from \"../Validation\";\n\nexport const treeFilter = ({ root, filter }) => {\n\tlet elements = [];\n\troot.children.forEach((element) => {\n\t\tconst { accept, stop = false } = filter(element);\n\n\t\tif (accept) elements.push(element);\n\n\t\tif (!stop) {\n\t\t\tconst result = treeFilter({ root: element, filter });\n\t\t\tif (result instanceof Array) elements = elements.concat(result);\n\t\t\telse if (result) elements.push(result);\n\t\t}\n\t});\n\n\treturn elements;\n};\n\nexport const findFields = (root) => {\n\treturn treeFilter({\n\t\troot,\n\t\tfilter: (element) => {\n\t\t\tif (element instanceof BaseField) return { accept: true, stop: true };\n\t\t\treturn { accept: false };\n\t\t},\n\t});\n};\n\nexport const findValidations = (root) => {\n\treturn treeFilter({\n\t\troot,\n\t\tfilter: (element) => {\n\t\t\tif (root != element) {\n\t\t\t\tif (element instanceof BaseField) return { accept: false, stop: true };\n\t\t\t\telse if (element instanceof Validation) return { accept: true, stop: true };\n\t\t\t}\n\t\t\treturn { accept: false };\n\t\t},\n\t});\n};\n","export const validateFields = async (data, fields) => {\r\n    return (await Promise.all(fields.map(field => field.validate(data))))\r\n        .reduce((valid, fieldValid) => valid ? fieldValid: false, true);\r\n}","import { \n\tNODENAME_CONTAINER, \n\tEVENT_FIELD_INITIALIZED, \n\tEVENT_FIELD_REMOVED \n} from \"./Constants\";\nimport { emtpyOrNoValueString, noValue } from \"@default-js/defaultjs-common-utils/src/ValueHelper\";\nimport { findFields } from \"./utils/NodeHelper\";\nimport BaseField, { _value } from \"./BaseField\";\nimport { define } from \"@default-js/defaultjs-html-components\";\nimport { valueHelper, fieldValueMapToObject } from \"./utils/DataHelper\";\nimport { validateFields } from \"./utils/ValidationHelper\";\n\nconst ATTRIBUTES = [];\nclass Container extends BaseField {\n\tstatic get observedAttributes() {\n\t\treturn ATTRIBUTES.concat(BaseField.observedAttributes);\n\t}\n\n\tstatic get NODENAME() {\n\t\treturn NODENAME_CONTAINER;\n\t}\n\n\t#fields = null;\n\t#value = new Map();\n\n\tconstructor(options) {\n\t\tsuper(options);\n\t\tconst root = this.root;\n\t\troot.on(EVENT_FIELD_INITIALIZED, (event) => {\n\t\t\tconst field = event.target;\n\t\t\tif (field != this) {\n\t\t\t\tif (field instanceof BaseField && (!this.#fields || !this.#fields.has(field)))\n\t\t\t\t\tthis.#fields = null;\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t});\n\n\t\troot.on(EVENT_FIELD_REMOVED, (event) => {\n\t\t\tconst field = event.target;\n\t\t\tif (field != this) {\n\t\t\t\tif (field instanceof BaseField && this.#fields && this.#fields.has(field))\n\t\t\t\t\tthis.#fields.delete(field);\n\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t});\n\n\t\tthis.addValidation(async ({ data }) => await validateFields(data, this.fields));\n\t}\n\n\tget fields() {\n\t\tif(!this.#fields)\n\t\t\tthis.#fields = new Set(findFields(this));\n\n\t\treturn Array.from(this.#fields);\n\t}\n\n\treadonlyUpdated() {\n\t\tconst { readonly, fields } = this;\n\t\tif (fields)\n\t\t\tfor (let field of fields) {\n\t\t\t\tfield.readonly = readonly;\n\t\t\t}\n\t}\n\n\tasync updatedValue(value) {\n\t\tawait this.ready;\n\t\tconst map = this.#value;\n\t\tmap.clear();\n\t\tconst fields = this.fields;\n\t\tif (fields) {\n\t\t\tawait Promise.all(fields.map(async (field) => {\n\t\t\t\tconst name = field.name;\n\t\t\t\tconst fieldValue = name ? valueHelper(value, field.name) : value;\n\t\t\t\tif(!noValue(fieldValue))\n\t\t\t\t\tmap.set(field, fieldValue);\n\t\t\t\tawait field.value(fieldValue);\n\t\t\t}));\n\t\t}\n\n\t\tlet data = await fieldValueMapToObject(this.#value, fields);\n\t\tif (Object.getOwnPropertyNames(data).length == 0) data = null;\n\n\t\treturn data;\n\t}\n\n\tasync childValueChanged(field, value) {\n\t\t//console.log(`${this.nodeName}.childValueChanged(${field.name}):`, {field, value});\n\t\tvalue = await value;\t\t\n\t\tconst map = this.#value;\t\t\n\t\t\n\t\tif (field) {\n\t\t\tconst hasField = map.has(field);\n\t\t\tconst currentValue = map.get(field) == null;\n\t\t\t//console.log({name: field.name, currentValue, value, hasField})\n\n\t\t\tif(hasField && currentValue == value)\n\t\t\t\treturn;\n\t\t\tif (noValue(value)) {\n\t\t\t\t//console.log(`delete ${field.name}`);\n\t\t\t\tmap.delete(field);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t//console.log(`set ${field.name} = ${value}`);\n\t\t\t\tmap.set(field, value);\n\t\t\t}\t\t\t\t\n\t\t}\t\n\n\t\tlet data = await fieldValueMapToObject(map, this.fields);\n\t\t//console.log(\"data: \",data);\n\t\tif (Object.getOwnPropertyNames(data).length == 0) data = null;\n\n\t\tawait this.publishValue(data);\n\t}\n}\n\ndefine(Container);\nexport default Container;\n","import { NODENAME_FORM, ATTRIBUTE_ACTIVE, ATTRIBUTE_DISABLED } from \"./Constants\";\nimport { Component } from \"@default-js/defaultjs-html-components\";\n\nconst ATTRIBUTES = [ATTRIBUTE_ACTIVE, ATTRIBUTE_DISABLED];\n\nclass FormButton extends Component {\n\tstatic get observedAttributes() {\n\t\treturn ATTRIBUTES;\n\t}\n\n\t#initialized = false;\n\t#form;\n\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.on(\"click\", (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tif (this.active && !this.disabled) this.execute();\n\t\t});\n\t}\n\n\tasync init() {\n\t\tawait super.init();\n\t\tif (this.#initialized) {\n\t\t\tthis.active = false;\n\t\t\tthis.disabled = false;\n\t\t\tthis.#initialized = true;\n\t\t}\n\t}\n\n\tget form() {\n\t\tif (!this.#form)\n\t\t\tthis.#form = this.parent(NODENAME_FORM);\n\n\t\treturn this.#form;\n\t}\n\n\tget active() {\n\t\treturn this.hasAttribute(ATTRIBUTE_ACTIVE);\n\t}\n\n\tset active(active) {\n\t\tthis.attr(ATTRIBUTE_ACTIVE, active ? \"\" : null);\n\t}\n\n\tget disabled() {\n\t\treturn this.hasAttribute(ATTRIBUTE_DISABLED);\n\t}\n\n\tset disabled(disabled) {\n\t\tthis.attr(ATTRIBUTE_DISABLED, disabled ? \"\" : null);\n\t}\n\n\texecute() {\n\t\tconsole.log(\"execute\");\n\t}\n}\nexport default FormButton;\n","import { \n\tNODENAME_LIST_DELETE_ROW,\n\tEVENT_LIST_ROW_DELETE\n} from \"../Constants\";\nimport FormButton from \"../FormButton\";\nimport { define } from \"@default-js/defaultjs-html-components\";\n\nconst ATTRIBUTES = [];\n\nclass DeleteRow extends FormButton {\n\tstatic get observedAttributes() {\n\t\treturn ATTRIBUTES.concat(ATTRIBUTES);\n\t}\n\n\tstatic get NODENAME() {\n\t\treturn NODENAME_LIST_DELETE_ROW;\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tasync init(){\n\t\tawait super.init();\n\t\tthis.active\t= true;\n\t}\n\n\texecute() {\n\t\tthis.trigger(EVENT_LIST_ROW_DELETE);\n\t}\n}\n\ndefine(DeleteRow);\nexport default DeleteRow;\n","import { \n\tNODENAME_LIST_ROW\n} from \"../Constants\";\nimport Container from \"../Container\";\nimport DeleteRow from \"./DeleteRow\";\n\nconst ATTRIBUTES = [];\nclass ListRow extends Container {\n\tstatic get observedAttributes() {\n\t\treturn ATTRIBUTES.concat(Container.observedAttributes);\n\t}\n\n\tstatic get NODENAME() {\n\t\treturn NODENAME_LIST_ROW;\n\t}\t\n\t\n\tconstructor(options) {\n\t\tsuper(options);\n\t}\n\n\tget active() {\n\t\treturn true;\n\t}\n\tset active(active) {}\n\n\tget condition() {\n\t\treturn true;\n\t}\n\n\tget name() {\n\t\treturn null;\n\t}\n}\n\ncustomElements.define(ListRow.NODENAME, ListRow);\nexport default ListRow;\n","import { \n\tNODENAME_LIST_ADD_ROW, \n\tEVENT_LIST_ROW_ADD\n} from \"../Constants\";\nimport FormButton from \"../FormButton\";\nimport { define } from \"@default-js/defaultjs-html-components\";\n\nexport const EVENT__INITIALIZED__BUTTON__ADDROW = `${NODENAME_LIST_ADD_ROW}:initialized`;\n\nconst ATTRIBUTES = [];\nclass AddRow extends FormButton {\n\tstatic get observedAttributes() {\n\t\treturn ATTRIBUTES.concat(ATTRIBUTES);\n\t}\n\n\tstatic get NODENAME(){\n\t\treturn NODENAME_LIST_ADD_ROW;\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.ready.then(() => this.trigger(EVENT__INITIALIZED__BUTTON__ADDROW))\n\t}\n\n\tasync init() {\n\t\tawait super.init();\n\t\tthis.active = true;\n\t}\n\n\texecute() {\n\t\tthis.trigger(EVENT_LIST_ROW_ADD);\n\t}\n}\n\ndefine(AddRow);\nexport default AddRow;\n","import { NODENAME_LIST_ROWS } from \"../Constants\";\nimport { Component, define } from \"@default-js/defaultjs-html-components\";\n\nconst ATTRIBUTES = [];\nclass ListRows extends Component {\n\tstatic get observedAttributes() {\n\t\treturn ATTRIBUTES;\n\t}\n\n\tstatic get NODENAME() {\n\t\treturn NODENAME_LIST_ROWS;\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\t}\n}\n\ndefine(ListRows);\nexport default ListRows;\n","import { NODENAME_LIST, NODENAME_LIST_ROWS, NODENAME_LIST_ROW, NODENAME_LIST_ADD_ROW, NODENAME_LIST_DELETE_ROW, EVENT_FIELD_INITIALIZED, EVENT_LIST_ROW_ADD, EVENT_LIST_ROW_DELETE, ATTRIBUTE_MIN, ATTRIBUTE_MAX } from \"./Constants\";\nimport { treeFilter } from \"./utils/NodeHelper\";\nimport { define } from \"@default-js/defaultjs-html-components\";\nimport BaseField, { _value } from \"./BaseField\";\nimport Row from \"./list/Row\";\nimport AddRow, {EVENT__INITIALIZED__BUTTON__ADDROW} from \"./list/AddRow\";\nimport \"./list/DeleteRow\";\nimport \"./list/Rows\";\nimport { validateFields } from \"./utils/ValidationHelper\";\nimport { noValue } from \"@default-js/defaultjs-common-utils/src/ValueHelper\";\n\nconst ATTRIBUTES = [ATTRIBUTE_MIN, ATTRIBUTE_MAX];\n\nconst buildData = async (rows, values) => {\n\tlet data = [];\n\tfor (let row of rows) data.push(values.get(row));\n\n\tif (data.length == 0) data = null;\n\n\treturn data;\n};\n\nclass List extends BaseField {\n\tstatic get observedAttributes() {\n\t\treturn ATTRIBUTES.concat(BaseField.observedAttributes);\n\t}\n\n\tstatic get NODENAME() {\n\t\treturn NODENAME_LIST;\n\t}\n\n\t#template;\n\t#container;\n\t#values = new Map();\n\t#addRowButton;\n\t#initialized = false;\n\n\tconstructor(options) {\n\t\tsuper(options);\n\n\t\tconst root = this.root;\n\t\troot.on(EVENT__INITIALIZED__BUTTON__ADDROW, (event) => {\n\t\t\tthis.#addRowButton = event.target;\n\t\t\tevent.stopPropagation();\n\t\t});\n\n\n\t\troot.on(EVENT_FIELD_INITIALIZED, (event) => {\n\t\t\tconst target = event.target;\n\t\t\tif(target != this){\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t});\n\n\t\troot.on(EVENT_LIST_ROW_ADD, (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tconst { readonly } = this;\n\t\t\tif (!readonly) this.createRow();\n\t\t});\n\n\t\troot.on(EVENT_LIST_ROW_DELETE, (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tconst { rows, readonly } = this;\n\t\t\tif (!readonly) {\n\t\t\t\tconst row = event.target.parent(NODENAME_LIST_ROW);\n\t\t\t\tconst index = rows.indexOf(row);\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\trow.remove();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.addValidation(async () => {\n\t\t\tconst { rows, min, max, readonly } = this;\n\t\t\tconst length = rows.length;\n\t\t\tif (this.#addRowButton && !readonly) {\n\t\t\t\tif (length == max) this.#addRowButton.disabled = true;\n\t\t\t\telse if (length < max) this.#addRowButton.disabled = false;\n\t\t\t}\n\t\t\treturn min <= length && length <= max;\n\t\t});\n\n\t\tthis.addValidation(async (data) => {\n\t\t\treturn await validateFields(data, this.rows);\n\t\t});\n\t}\n\n\tasync init() {\n\t\tawait super.init();\n\t\tif (!this.#initialized) {\t\t\t\n\t\t\tthis.#initialized = true;\n\t\t\tconst rowTemplate = this.find(\"template\").first();\n\t\t\tif(rowTemplate)\n\t\t\t\tthis.#template = rowTemplate.content;\n\n\t\t\tthis.#container = this.find(NODENAME_LIST_ROWS).first();\n\t\t}\n\t}\n\n\treadonlyUpdated() {\n\t\tconst { readonly } = this;\n\t\tfor (let row of this.rows) {\n\t\t\trow.readonly = readonly;\n\t\t}\n\t}\n\n\tget rows() {\n\t\tif(this.#container)\n\t\t\treturn Array.from(this.#container.children);\n\t\treturn [];\n\t}\n\n\tget min() {\n\t\tif (this.hasAttribute(ATTRIBUTE_MIN)) return Math.max(0, parseInt(this.attr(ATTRIBUTE_MIN)));\n\t\treturn 0;\n\t}\n\n\tget max() {\n\t\tif (this.hasAttribute(ATTRIBUTE_MAX)) return parseInt(this.attr(ATTRIBUTE_MAX));\n\t\treturn Number.MAX_SAFE_INTEGER;\n\t}\n\n\tacceptValue(value) {\n\t\treturn !value || value instanceof Array;\n\t}\n\n\tnormalizeValue(value) {\n\t\treturn value ? value.filter((item) => !!item) : null;\n\t}\n\n\tasync createRow(value) {\n\t\tconst row = document.importNode(this.#template, true).children[0];\n\t\tawait this.#container.append(row);\n\n\t\tif (value) await row.value(value);\n\n\t\treturn row;\n\t}\n\n\tasync updatedValue(values) {\n\t\tthis.#values.clear();\n\t\tthis.#container.empty();\n\t\tif (values) await Promise.all(values.map(value => this.createRow(value)));\n\n\t\treturn await buildData(this.rows, this.#values);\n\t}\n\n\tasync childValueChanged(row, value) {\n\t\tvalue = await value;\n\t\tconst values = this.#values;\n\n\t\tif (noValue(value)) this.#values.delete(row);\n\t\telse this.#values.set(row, value);\n\n\t\tawait super.childValueChanged(row, value);\n\t\tconst data = await buildData(this.rows, values);\n\t\tawait this.publishValue(data);\n\t}\n}\n\ndefine(List);\nexport default List;\n","import { \n\tNODENAME_PAGE,  \n\tATTRIBUTE_STEP, \n\tEVENT_PAGE_INITIALIZED,\n\tEVENT_PAGE_REMOVED\n} from \"./Constants\";\nimport { define } from \"@default-js/defaultjs-html-components\";\nimport Container from \"./Container\";\n\nconst ATTRIBUTES = [ATTRIBUTE_STEP];\n\nclass Page extends Container {\n\tstatic get observedAttributes() {\n\t\treturn ATTRIBUTES.concat(Container.observedAttributes);\n\t}\n\n\tstatic get NODENAME() {\n\t\treturn NODENAME_PAGE;\n\t}\n\t\n\tconstructor(options) {\n\t\tsuper(options);\n\t\tthis.ready.then(() => this.trigger(EVENT_PAGE_INITIALIZED));\n\t}\n\n\tasync destroy(){\n\t\tthis.trigger(EVENT_PAGE_REMOVED);\n\t\tawait super.destroy();\n\t}\n\n\tget step(){\n\t\treturn this.attr(ATTRIBUTE_STEP);\n\t}\n\t\n\tconditionUpdated(){}\n}\ndefine(Page);\nexport default Page;\n","import {ExpressionResolver} from \"@default-js/defaultjs-expression-language\";\nimport {Component, define} from \"@default-js/defaultjs-html-components\";\nimport { \n\tNODENAME_MESSAGE,\n\tEVENT_MESSAGE_INITIALIZED,\n\tEVENT_MESSAGE_REMOVED\n} from \"./Constants\";\n\nexport const ATTRIBUTE_ACTIVE = \"active\";\nexport const ATTRIBUTE_CONDITION = \"condition\";\nconst ATTRIBUTES = [ATTRIBUTE_ACTIVE, ATTRIBUTE_CONDITION];\n\n\n\nclass Message extends Component {\n\tstatic get observedAttributes() {\n\t\treturn ATTRIBUTES;\n\t}\n\n\tstatic get NODENAME() {\n\t\treturn NODENAME_MESSAGE;\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tasync init() {\n\t\tawait super.init();\n\t\tthis.trigger(EVENT_MESSAGE_INITIALIZED);\n\t}\n\n\tasync destroy(){\n\t\tthis.trigger(EVENT_MESSAGE_REMOVED);\n\t\tawait super.destroy();\n\t}\n\n\tget active() {\n\t\treturn this.hasAttribute(ATTRIBUTE_ACTIVE);\n\t}\n\tset active(active) {\n\t\tactive ? this.attr(ATTRIBUTE_ACTIVE, \"\") : this.attr(ATTRIBUTE_ACTIVE, undefined);\n\t}\n\n\tget condition() {\n\t\treturn this.attr(ATTRIBUTE_CONDITION);\n\t}\n\n\tasync update(data) {\n\t\tawait this.ready;\n\t\tthis.active = await ExpressionResolver.resolve(this.condition, data, false);\n\t}\n}\ndefine(Message);\nexport default Message;\n","import { NODENAME_CONTROL_BACK } from \"../Constants\";\r\nimport FormButton from \"../FormButton\";\r\nimport { define } from \"@default-js/defaultjs-html-components\";\r\n\r\nconst ATTRIBUTES = [];\r\nclass BackButton extends FormButton {\r\n\tstatic get observedAttributes() {\r\n\t\treturn ATTRIBUTES;\r\n\t}\r\n\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME_CONTROL_BACK;\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\texecute() {\r\n\t\tthis.form.toPrevPage();\r\n\t}\r\n}\r\nexport default BackButton;\r\ndefine(BackButton);\r\n","import { NODENAME_CONTROL_NEXT } from \"../Constants\";\r\nimport FormButton from \"../FormButton\";\r\nimport { define } from \"@default-js/defaultjs-html-components\";\r\n\r\nconst ATTRIBUTES = [];\r\nclass NextButton extends FormButton {\r\n\tstatic get observedAttributes() {\r\n\t\treturn ATTRIBUTES;\r\n\t}\r\n\t\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME_CONTROL_NEXT;\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\texecute() {\r\n\t\tthis.form.toNextPage();\r\n\t}\r\n}\r\nexport default NextButton;\r\ndefine(NextButton);\r\n","import { \n\tNODENAME_CONTROL_SUMMARY\n} from \"../Constants\";\nimport FormButton from \"../FormButton\";\nimport { define } from \"@default-js/defaultjs-html-components\";\n\nconst ATTRIBUTES = [];\nclass SummaryButton extends FormButton {\n\tstatic get observedAttributes() {\n\t\treturn ATTRIBUTES;\n\t}\n\n\tstatic get NODENAME() {\n\t\treturn NODENAME_CONTROL_SUMMARY;\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\texecute() {\n\t\tthis.form.toNextPage();\n\t}\n}\nexport default SummaryButton;\ndefine(SummaryButton);\n","import { NODENAME_CONTROL_SUBMIT } from \"../Constants\";\r\nimport FormButton from \"../FormButton\";\r\nimport { define } from \"@default-js/defaultjs-html-components\";\r\n\r\nconst ATTRIBUTES = [];\r\nclass SubmitButton extends FormButton {\r\n\tstatic get observedAttributes() {\r\n\t\treturn ATTRIBUTES;\r\n\t}\r\n\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME_CONTROL_SUBMIT;\r\n\t}\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\texecute() {\r\n\t\tthis.form.submit();\r\n\t}\r\n}\r\nexport default SubmitButton;\r\ndefine(SubmitButton);\r\n","import { \n\tFORMSTATE_INIT,\n\tFORMSTATE_INPUT,\n\tFORMSTATE_VALIDATING,\n\tFORMSTATE_SUMMARY,\n\tFORMSTATE_FINISHED, \n\tNODENAME_CONTROL,\n\tNODENAME_CONTROL_BACK,\n\tNODENAME_CONTROL_NEXT,\n\tNODENAME_CONTROL_CANCEL,\n\tNODENAME_CONTROL_SUBMIT, \n\tNODENAME_FORM,\n\tEVENT_INITIALIZED,\n\tEVENT_FORM_STATE_CHANGED,\n\tEVENT_SITE_CHANGED,\n\tNODENAME_CONTROL_SUMMARY\n} from \"./Constants\";\nimport { Component, define } from \"@default-js/defaultjs-html-components\";\nimport \"./controls\";\n\nconst BUTTONDUMMY = {\n\tactive: true,\n\tdisabled: true,\n};\n\nconst ATTRIBUTES = [];\nclass Control extends Component {\n\tstatic get observedAttributes() {\n\t\treturn ATTRIBUTES;\n\t}\n\n\tstatic get NODENAME() {\n\t\treturn NODENAME_CONTROL;\n\t}\n\n\t#form;\n\t#back;\n\t#next;\n\t#summary;\n\t#submit;\n\t#initialized = false;\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tasync init() {\n\t\tawait super.init();\n\t\tif (!this.#initialized) {\n\t\t\tthis.#form = this.parent(NODENAME_FORM);\n\t\t\tthis.#back = this.find(NODENAME_CONTROL_BACK).first() || BUTTONDUMMY;\n\t\t\tthis.#next = this.find(NODENAME_CONTROL_NEXT).first() || BUTTONDUMMY;\n\t\t\tthis.#summary = this.find(NODENAME_CONTROL_SUMMARY).first() || BUTTONDUMMY;\n\t\t\tthis.#submit = this.find(NODENAME_CONTROL_SUBMIT).first() || BUTTONDUMMY;\n\n\t\t\tthis.#form.on([EVENT_INITIALIZED, EVENT_FORM_STATE_CHANGED, EVENT_SITE_CHANGED], () => {\n\t\t\t\tthis.update();\n\t\t\t});\n\n\t\t\tthis.#initialized = true;\n\t\t}\n\t}\n\n\t\n\n\tasync update() {\n\t\tconst form = this.#form;\n\t\tconst state = form.state;\n\t\tconst back = this.#back;\n\t\tconst next = this.#next;\n\t\tconst summary = this.#summary;\n\t\tconst submit = this.#submit\n\n\t\t// basic control setup\n\t\tback.active = true;\n\t\tback.disabled = true;\n\t\tnext.active = false;\n\t\tnext.disabled = true;\n\t\tsummary.active = false;\n\t\tsummary.disabled = true;\n\t\tsubmit.active = false;\n\t\tsubmit.disabled = true;\n\n\t\tif(state == FORMSTATE_VALIDATING)\n\t\t\treturn;\n\n\t\tconst { activePageIndex, activePage, nextPage, pages, useSummaryPage } = form;\t\n\t\tconst hasNextPage = (await nextPage) != null;\n\n\t\tif (state == FORMSTATE_FINISHED) {\n\t\t\tback.disabled = true;\n\t\t\tsubmit.active = true;\n\t\t} else if (state == FORMSTATE_SUMMARY) {\n\t\t\tback.disabled = false;\n\t\t\tsubmit.active = true;\n\t\t\tsubmit.disabled = !form.valid;\n\t\t} else if (state == FORMSTATE_INPUT) {\n\t\t\tback.disabled = activePageIndex <= 0;\n\n\t\t\tif (hasNextPage || (!activePage.valid && activePageIndex + 1 < pages.length)) {\n\t\t\t\tnext.active = true;\n\t\t\t\tnext.disabled = !activePage.valid;\n\t\t\t} else if (useSummaryPage && state == FORMSTATE_INPUT) {\n\t\t\t\tsummary.active = true;\n\t\t\t\tsummary.disabled = !activePage.valid;\n\t\t\t} else {\n\t\t\t\tsubmit.active = true;\n\t\t\t\tsubmit.disabled = !form.valid;\n\t\t\t}\n\t\t}\n\t}\n}\ndefine(Control);\nexport default Control;\n","import { \n\tNODENAME_STEP, \n\tATTRIBUTE_NAME, \n\tATTRIBUTE_ACTIVE, \n\tATTRIBUTE_READONLY \n} from \"./Constants\";\nimport { updateActiveState } from \"./utils/StateHelper\";\nimport {Component, define} from \"@default-js/defaultjs-html-components\";\n\nconst ATTRIBUTES = [ATTRIBUTE_NAME, ATTRIBUTE_ACTIVE, ATTRIBUTE_READONLY];\n\nclass Step extends Component {\n\tstatic get observedAttributes() {\n\t\treturn ATTRIBUTES;\n\t}\n\n\tstatic get NODENAME() {\n\t\treturn NODENAME_STEP;\n\t}\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n    get name(){\n        return this.attr(ATTRIBUTE_NAME);\n    }\n    \n    get active() {\n\t\treturn this.hasAttribute(ATTRIBUTE_ACTIVE);\n\t}\n\n\tset active(active) {\n\t\tconst current = this.active;\n\t\tif (current != active) {\n\t\t\tupdateActiveState(this, active);\n\t\t}\n\t}\n\n\tget readonly() {\n\t\treturn this.hasAttribute(ATTRIBUTE_READONLY);\n\t}\n\n\tset readonly(readonly) {\n\t\treadonly ? this.attr(ATTRIBUTE_READONLY, \"\") : this.attr(ATTRIBUTE_READONLY, null);\n\t}\n}\n\ndefine(Step);\nexport default Step;\n","import { \n\tNODENAME_FORM, \n\tNODENAME_PROGESSBAR,\n\tNODENAME_STEP,\n\tEVENT_SITE_CHANGED,\n\tEVENT_FORM_STATE_CHANGED,\n\tEVENT_PROGRESSBAR_CHANGED,\n\tFORMSTATE_INIT,\n\tFORMSTATE_VALIDATING,\n\tFORMSTATE_INPUT,\n\tFORMSTATE_SUMMARY,\n\tFORMSTATE_FINISHED, \n\tATTRIBUTE_PROGRESS } from \"./Constants\";\nimport {Component ,define } from \"@default-js/defaultjs-html-components\";\nimport \"./Step\";\n\nconst ATTRIBUTES = [ATTRIBUTE_PROGRESS];\n\nconst firstStepPageIndex = (pages, step, activePage) => {\n\tfor (let page of pages) {\n\t\tif (page.step == step && page.condition) return page;\n\t\telse if (page == activePage) return;\n\t}\n\n\treturn null;\n};\n\nclass ProgressBar extends Component {\n\tstatic get observedAttributes() {\n\t\treturn ATTRIBUTES;\n\t}\n\n\tstatic get NODENAME() {\n\t\treturn NODENAME_PROGESSBAR;\n\t}\n\n\t#form;\n\t#steps;\n\t#initialized = false;\n\tconstructor() {\n\t\tsuper();\n\t\tthis.on(\"click\", ({ target }) => {\n\t\t\tif (!this.#form) return;\n\t\t\tif (target == this) return;\t\t\t\n\t\t\tconst step = target.is(NODENAME_STEP) ? target : target.parent(NODENAME_STEP);\n\t\t\tconst form = this.#form;\n\n\t\t\tif (!step) return;\n\n\t\t\tconst {state, pages, activePage} = form;\n\t\t\tconst stepName = step.name;\n\t\t\tif (state == FORMSTATE_INPUT || state == FORMSTATE_SUMMARY) {\n\t\t\t\tconst page = firstStepPageIndex(pages, stepName, activePage);\n\t\t\t\tif (page) form.activePage = page;\n\t\t\t}\n\t\t});\n\t}\n\n\tasync init() {\n\t\tawait super.init();\n\t\tthis.progress = 0;\n\t\tif (!this.#initialized) {\n\t\t\tconst form = this.#form = this.parent(NODENAME_FORM);\n\t\t\tthis.#steps = this.find(NODENAME_STEP);\n\t\t\tthis.#form.on([EVENT_SITE_CHANGED,EVENT_FORM_STATE_CHANGED], () => {\n\t\t\t\tconst state = form.state;\n\t\t\t\tif(FORMSTATE_VALIDATING == state)\n\t\t\t\t\treturn;\n\n\t\t\t\t\t\n\t\t\t\tconst {activePageIndex, activePage, pages} = form;\n\t\t\t\tif (!activePage) \n\t\t\t\t\treturn;\n\n\t\t\t\tconst count = pages.length;\n\t\t\t\tconst pageStep = activePage ? activePage.step : FORMSTATE_INIT;\n\t\t\t\tconst progress = Math.floor((activePageIndex * 100) / count);\n\n\t\t\t\tfor (let step of this.steps) {\n\t\t\t\t\tconst name = step.name;\n\t\t\t\t\tif (state == FORMSTATE_INPUT) {\n\t\t\t\t\t\tstep.active = name == pageStep;\n\t\t\t\t\t\tstep.readonly = false;\n\t\t\t\t\t} else if (state == FORMSTATE_SUMMARY) {\n\t\t\t\t\t\tstep.active = name == FORMSTATE_SUMMARY;\n\t\t\t\t\t\tstep.readonly = false;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstep.active = name == FORMSTATE_FINISHED;\n\t\t\t\t\t\tstep.readonly = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.progress = state == FORMSTATE_SUMMARY || state == FORMSTATE_FINISHED ? 100 : progress;\n\n\t\t\t\tthis.trigger(EVENT_PROGRESSBAR_CHANGED);\n\t\t\t});\n\n\t\t\tthis.#initialized = true;\n\t\t}\n\t}\n\n\tget steps(){\n\t\treturn Array.from(this.#steps);\n\t}\n\n\tget progress() {\n\t\treturn this.attr(ATTRIBUTE_PROGRESS);\n\t}\n\n\tset progress(progress) {\n\t\tif (this.style.setProperty) this.style.setProperty(\"--progress\", progress + \"%\");\n\t\tthis.attr(ATTRIBUTE_PROGRESS, Math.max(0, Math.min(progress, 100)));\n\t}\n}\n\ndefine(ProgressBar);\nexport default ProgressBar;\n","export const STATE_SUCCESS = \"success\";\nexport const STATE_FAIL = \"fail\";\n\nclass SubmitActionResult {\n\n    static get STATE_SUCCESS(){return STATE_SUCCESS;}\n    static get STATE_FAIL(){return STATE_FAIL;}\n\n    constructor(action, state, message, data){\n\t\tthis.action = action;\n        this.state = state;\n        this.message = message;\n        this.data = data;\n    };    \n};\n\nexport default SubmitActionResult;","import Component from \"@default-js/defaultjs-html-components/src/Component\";\r\nimport { privatePropertyAccessor } from \"@default-js/defaultjs-common-utils/src/PrivateProperty\";\r\nimport { ExpressionResolver } from \"@default-js/defaultjs-expression-language\";\r\nimport SubmitActionResult, { STATE_FAIL } from \"./SubmitActionResult\";\r\nimport { EVENT_INITIALIZE_SUBMIT_ACTION, NODENAME_FORM, ATTRIBUTE_CONDITION } from \"../Constants\";\r\n\r\n// private member\r\nconst _form = privatePropertyAccessor(\"form\");\r\n\r\n// logic\r\nclass BaseSubmitAction extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tawait super.init();\r\n\t\tconst form = this.parent(NODENAME_FORM);\r\n\t\t_form(this, form);\r\n\t\tif (form) this.trigger(EVENT_INITIALIZE_SUBMIT_ACTION);\r\n\t}\r\n\r\n\tget form() {\r\n\t\treturn _form(this);\r\n\t}\r\n\r\n\tasync accept(data = {}) {\r\n\t\tconst condition = this.attr(ATTRIBUTE_CONDITION);\r\n        if(condition)\r\n            return await ExpressionResolver.resolve(condition, data, false);\r\n            \r\n        return true;\r\n\t}\r\n\r\n\t/**\r\n\t * Override this function!\r\n\t */\r\n\tasync execute(data = {}) {\r\n\t\treturn new SubmitActionResult(STATE_FAIL, \"not implemented\");\r\n\t}\r\n}\r\nexport default BaseSubmitAction;\r\n","import {define} from \"@default-js/defaultjs-html-components\";\nimport BaseSubmitAction from \"./BaseSubmitAction\";\nimport SubmitActionResult, { STATE_SUCCESS, STATE_FAIL } from \"./SubmitActionResult\";\nimport {NODENAME_SUBMIT_ACTION} from \"../Constants\";\n\nconst NODENAME = `${NODENAME_SUBMIT_ACTION}-default`;\n\nclass DefaultFormSubmitAction extends BaseSubmitAction {\n\n    static get NODENAME() { return NODENAME;}\n\n\n\tconstructor(endpoint, method) {\n\t\tsuper();\n\t\tthis.endpoint = endpoint;\n\t\tthis.method = method;\n\t}\n\n\tasync execute(data) {\t\t\n\t\tlet endpoint = this.endpoint;\n\t\tendpoint = await ExpressionResolver.resolveText(endpoint, data, endpoint);\n\t\tconst url = new URL(endpoint, location);\n\n\t\tconst response = await fetch(url, {\n\t\t\tmethod: this.method,\n\t\t\tcredentials: \"include\",\n\t\t\tmode: \"cors\",\n\t\t\theaders: {\n\t\t\t\t\"content-type\": \"application/json\",\n\t\t\t},\n\t\t\tbody: JSON.stringify(data),\n\t\t});\t\t\n\t\t\t\n\t\treturn new SubmitActionResult(this, response.ok ? STATE_SUCCESS : STATE_FAIL, response);\t\t\n\t}\n};\n\ndefine(DefaultFormSubmitAction);\nexport default DefaultFormSubmitAction;\n","import { NODENAME_FORM, NODENAME_PAGE, EVENT_INITIALIZED, EVENT_PAGE_INITIALIZED, EVENT_PAGE_REMOVED, EVENT_FORM_STATE_CHANGED, EVENT_SITE_CHANGED, EVENT_SUBMIT, EVENT_SUBMIT_RESULTS, ATTRIBUTE_NAME, ATTRIBUTE_USE_SUMMARY_PAGE, ATTRIBUTE_ENDPOINT, ATTRIBUTE_METHOD, ATTRIBUTE_STATE, ATTRIBUTE_INPUT_MODE_AFTER_SUBMIT, FORMSTATE_INPUT, FORMSTATE_SUMMARY, FORMSTATE_VALIDATING, FORMSTATE_INIT, FORMSTATE_FINISHED } from \"./Constants\";\nimport { Component, define } from \"@default-js/defaultjs-html-components\";\nimport \"./Message\";\nimport \"./Message\";\nimport Page from \"./Page\";\nimport \"./Control\";\nimport \"./ProgressBar\";\nimport { noValue } from \"@default-js/defaultjs-common-utils/src/ValueHelper\";\nimport { privatePropertyAccessor } from \"@default-js/defaultjs-common-utils/src/PrivateProperty\";\nimport BaseSubmitAction from \"./submitActions/BaseSubmitAction\";\nimport DefaultFormSubmitAction from \"./submitActions/DefaultFormSubmitAction\";\nimport SubmitActionResult, { STATE_FAIL as ACTION_SUBMIT_STATE_FAIL, STATE_SUCCESS as ACTION_SUBMIT_STATE_SUCCESS } from \"./submitActions/SubmitActionResult\";\nimport { valueHelper, fieldValueMapToObject } from \"./utils/DataHelper\";\nimport { validateFields } from \"./utils/ValidationHelper\";\n\nconst _submitActions = privatePropertyAccessor(\"submitAction\");\n\nconst ATTRIBUTES = [ATTRIBUTE_NAME, ATTRIBUTE_USE_SUMMARY_PAGE, ATTRIBUTE_ENDPOINT, ATTRIBUTE_METHOD, ATTRIBUTE_STATE, ATTRIBUTE_INPUT_MODE_AFTER_SUBMIT];\n\nconst readonly = (form, readonly) => {\n\tfor (let page of form.pages) {\n\t\tpage.readonly = readonly;\n\t\tpage.active = readonly;\n\t}\n};\n\nconst executeActions = async (actions, data) => {\n\tconst results = [];\n\tfor (let action of actions) {\n\t\tconst accept = await action.accept(data);\n\t\tif (accept) {\n\t\t\ttry {\n\t\t\t\tconst result = (await action.execute(data)) || new SubmitActionResult(action, ACTION_SUBMIT_STATE_SUCCESS);\n\t\t\t\tresults.push(result);\n\t\t\t\tif (result.state == ACTION_SUBMIT_STATE_FAIL) return results;\n\t\t\t} catch (e) {\n\t\t\t\tresults.push(new SubmitActionResult(action, ACTION_SUBMIT_STATE_FAIL, e));\n\t\t\t\treturn results;\n\t\t\t}\n\t\t}\n\t}\n\treturn results;\n};\n\nclass Form extends Component {\n\tstatic get observedAttributes() {\n\t\treturn ATTRIBUTES;\n\t}\n\n\tstatic get NODENAME() {\n\t\treturn NODENAME_FORM;\n\t}\n\n\t#initialized = false;\n\t#state = FORMSTATE_INIT;\n\t#pages;\n\t#value = new Map();\n\t#data = {};\n\t#validation = null;\n\t#hasNextValidation = false;\n\n\tconstructor() {\n\t\tsuper();\n\t\tconst root = this.root;\n\t\troot.on(EVENT_PAGE_INITIALIZED, (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t});\n\n\t\troot.on(EVENT_PAGE_REMOVED, (event) => {\n\t\t\tconst page = event.target;\n\t\t\tthis.#pages = null;\n\t\t\tthis.childValueChanged(page, null);\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t});\n\n\t\tthis.ready.then(() => this.trigger(EVENT_INITIALIZED));\n\t}\n\n\tasync init() {\n\t\tawait super.init();\n\t\tif (!this.#initialized) {\n\t\t\tthis.#initialized = true;\n\t\t\tthis.activePageIndex = -1;\n\n\t\t\tthis.state = FORMSTATE_INIT;\n\n\t\t\tthis.useSummaryPage = this.hasAttribute(ATTRIBUTE_USE_SUMMARY_PAGE);\n\n\t\t\tthis.activePageIndex = -1;\n\t\t\tif (this.pages.length > 0) this.toNextPage();\t\t\t\n\t\t}\n\t}\n\n\tget pages() {\n\t\tif (!this.#pages) this.#pages = Array.from(this.root.find(NODENAME_PAGE));\n\n\t\treturn this.#pages;\n\t}\n\n\tget state() {\n\t\treturn this.#state;\n\t}\n\n\tset state(state) {\n\t\tconst actual = this.#state;\n\t\tif (state != FORMSTATE_VALIDATING) {\n\t\t\tif (actual == FORMSTATE_INPUT && state != FORMSTATE_INPUT) readonly(this, true);\n\t\t\telse if (actual != FORMSTATE_INPUT && state == FORMSTATE_INPUT) {\n\t\t\t\treadonly(this, false);\n\t\t\t\tif (this.activePage) this.activePage.active = true;\n\t\t\t}\n\t\t}\n\t\tthis.#state = state;\n\n\t\tif (actual != state) this.trigger(EVENT_FORM_STATE_CHANGED);\n\t\tthis.attr(ATTRIBUTE_STATE, state);\n\t}\n\n\tget valid() {\n\t\tfor (let page of this.pages) if (page.condition && !page.valid) return false;\n\n\t\treturn true;\n\t}\n\n\tasync value(data) {\n\t\tawait this.ready;\n\t\tif (this.#validation) await this.#validation;\n\t\tif (arguments.length == 0) return this.#data;\n\n\t\tif (this.state == FORMSTATE_INPUT) {\n\t\t\tawait Promise.all(this.pages.map(page => {\t\t\t\t\n\t\t\t\tconst name = page.name;\n\t\t\t\treturn name ? page.value(valueHelper(data, name)) : page.value(data);\n\t\t\t}));\n\n\t\t\tawait this.#validate();\n\t\t}else{\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tconst handle = (event) => {\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\tthis.removeOn(handle, EVENT_FORM_STATE_CHANGED);\n\t\t\t\t\tresolve(this.value(data));\n\t\t\t\t}\n\t\t\t\tthis.on(EVENT_FORM_STATE_CHANGED, handle)\n\t\t\t});\n\t\t}\n\t}\n\n\tget activePage() {\n\t\tif (0 <= this.activePageIndex && this.activePageIndex < this.pages.length) return this.pages[this.activePageIndex];\n\n\t\treturn null;\n\t}\n\n\tset activePage(page) {\n\t\tconst current = this.activePage;\n\t\tif (page != current || this.state != FORMSTATE_INPUT) {\n\t\t\tif (current) current.active = false;\n\t\t\tthis.activePageIndex = this.pages.indexOf(page);\n\t\t\tpage.active = true;\n\t\t\tif (this.state != FORMSTATE_INPUT) this.state = FORMSTATE_INPUT;\n\n\t\t\tthis.scrollIntoView();\n\t\t\tthis.trigger(EVENT_SITE_CHANGED);\n\t\t}\n\t}\n\n\tget prevPage() {\n\t\treturn (async () => {\t\t\t\n\t\t\tconst pages = this.pages;\n\t\t\tconst start = this.activePageIndex - 1;\n\t\t\tconst data = await this.value();\n\t\t\tfor (let i = start; i >= 0; i--) {\n\t\t\t\tconst page = pages[i];\n\t\t\t\tawait page.validate(data);\n\t\t\t\tif (page.condition) return page;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t})();\n\t}\n\n\tget nextPage() {\n\t\treturn (async () => {\n\t\t\tconst pages = this.pages;\n\t\t\tconst start = this.activePageIndex + 1;\n\t\t\tconst data = await this.value();\n\t\t\tif (pages) {\n\t\t\t\tfor (let i = start; i < pages.length; i++) {\n\t\t\t\t\tconst page = pages[i];\n\t\t\t\t\tawait page.validate(data);\n\t\t\t\t\tif (page.condition) return page;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t})();\n\t}\n\n\tasync toPrevPage() {\n\t\tif (this.state != FORMSTATE_INPUT) {\n\t\t\tthis.state = FORMSTATE_INPUT;\n\t\t} else {\n\t\t\tconst prev = await this.prevPage;\n\t\t\tif (prev) this.activePage = prev;\n\t\t}\n\t}\n\n\tasync toNextPage() {\n\t\tconst next = await this.nextPage;\n\t\tif (next) {\n\t\t\tthis.activePage = next;\n\t\t\tthis.state = FORMSTATE_INPUT;\n\t\t} else if (this.useSummaryPage) {\n\t\t\tthis.summary();\n\t\t} else {\n\t\t\tthis.submit();\n\t\t}\n\t}\n\n\tasync summary() {\n\t\tthis.state = FORMSTATE_SUMMARY;\n\t}\n\n\tget submitActions() {\n\t\tlet actions = _submitActions(this);\n\t\tif (!actions) {\n\t\t\tactions = [];\n\t\t\tlet endpoint = this.attr(ATTRIBUTE_ENDPOINT);\n\t\t\tif (endpoint) {\n\t\t\t\tconst method = this.attr(ATTRIBUTE_METHOD) || \"post\";\n\t\t\t\tthis.append(new DefaultFormSubmitAction(endpoint, method));\n\t\t\t}\n\n\t\t\tconst childs = this.children;\n\t\t\tfor (let child of childs) {\n\t\t\t\tif (child instanceof BaseSubmitAction) actions.push(child);\n\t\t\t}\n\t\t\t_submitActions(this, actions);\n\t\t}\n\n\t\treturn actions;\n\t}\n\n\tasync submit() {\n\t\tconst data = await this.value();\n\t\tconst valid = await validateFields(data, this.pages);\n\t\tif (!valid) return;\n\n\t\tif (!this.hasAttribute(ATTRIBUTE_INPUT_MODE_AFTER_SUBMIT)) this.state = FORMSTATE_FINISHED;\n\n\t\tconst actions = this.submitActions;\n\t\tif (actions) {\n\t\t\tconst results = await executeActions(actions, data);\n\t\t\tthis.trigger(EVENT_SUBMIT_RESULTS, results);\n\t\t}\n\n\t\tthis.trigger(EVENT_SUBMIT, data);\n\t}\n\n\t#validate(page) {\n\t\tif (this.state == FORMSTATE_INPUT) {\n\t\t\tthis.state = FORMSTATE_VALIDATING;\n\t\t\treturn (this.#validation = new Promise((resolved) => {\n\t\t\t\tsetTimeout(async () => {\n\t\t\t\t\tconst data = this.#data;//await fieldValueMapToObject(this.#value);\n\t\t\t\t\t\n\t\t\t\t\tconst valid = page ? page.validate(data) : await validateFields(data, this.pages);\n\n\t\t\t\t\tif (!this.#hasNextValidation) this.state = FORMSTATE_INPUT;\n\n\t\t\t\t\tthis.validation = null;\n\t\t\t\t\tresolved(valid);\n\t\t\t\t}, 10);\n\t\t\t}));\n\t\t} else if (this.state == FORMSTATE_VALIDATING) {\n\t\t\tthis.#validation.then(async () => {\n\t\t\t\tthis.#hasNextValidation = false;\n\t\t\t\tawait this.#validate(page);\n\t\t\t});\n\t\t}\n\t}\n\n\tasync childValueChanged(field, value) {\n\t\tawait this.ready;\t\t\n\t\tvalue = await value;\n\t\tconst map = this.#value;\n\t\t//console.log(`form.childValueChanged(${field.name})`, { field, value });\n\t\tif (field) {\n\t\t\tif (noValue(value)) map.delete(field);\n\t\t\telse map.set(field, value);\n\t\t}\n\n\t\tthis.#data = await fieldValueMapToObject(this.#value, this.pages);\n\n\t\tconst activePage = this.activePage;\n\t\tif (activePage) await this.#validate(activePage);\n\t\telse await this.#validate();\n\t}\n}\ndefine(Form);\nexport default Form;\n","import { TEMPLATE_BASEPATH, EVENT__GLOBAL_ACTION_RELOADPARENT } from \"../Constants.js\";\r\nimport { Component, define } from \"@default-js/defaultjs-html-components\";\r\nimport { Renderer, Template } from \"@default-js/defaultjs-template-language\";\r\nimport { getCampaigns, deleteCampaign, storeCampaign } from \"../services/CampaignService.js\";\r\nimport { accessRights } from \"../services/LoginService.js\";\r\nimport \"@default-js/defaultjs-html-form\";\r\n\r\nconst TEMPLATES_PATH = `${TEMPLATE_BASEPATH}/html-campaigns-element`\r\nexport const NODENAME = \"x-campaigns\";\r\n\r\nconst TEMPLATE_URL__ROOT = new URL(`${TEMPLATES_PATH}/root.tpl.html`, location);\r\nconst TEMPLATE_URL__CREATEDIALOG = new URL(`${TEMPLATES_PATH}/campaign-dialog.tpl.html`, location);\r\n\r\nclass HTMLCampaignsElement extends Component {\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME;\r\n\t}\r\n\r\n\t#initialized = false;\r\n    #createDialog;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n        const root = this.root;\r\n        root.on(EVENT__GLOBAL_ACTION_RELOADPARENT, (event) => {\r\n            event.stopPropagation();\r\n            this.render();            \r\n        });\r\n        root.on(\"action:create-campaign\", (event) => {\r\n            event.stopPropagation();\r\n            this.openCreateDialog();\r\n        });\r\n        root.on(\"action:close-campaign-dialog\", (event) => {\r\n            event.stopPropagation();\r\n            if(this.#createDialog)\r\n            this.#createDialog.close();\r\n        });\r\n\t}\r\n\r\n\tasync init() {\r\n        await super.init();\r\n\t\tif (!this.#initialized) {\r\n\t\t\tawait this.render();\r\n            this.#initialized = true;\r\n\t\t}\r\n\t}\r\n\r\n    async render() {\r\n        const template = await Template.load(TEMPLATE_URL__ROOT);\r\n\t\tawait Renderer.render({ container: this.root, template, data: {accessRights: accessRights(), campaigns: await getCampaigns()} });\r\n    }\r\n\r\n    async openCreateDialog() {\r\n        const root = this.root;\r\n        if(!this.#createDialog){\r\n            const template = await Template.load(TEMPLATE_URL__CREATEDIALOG);\r\n            const result = await Renderer.render({template, container: root, data: {accessRights: accessRights()}, mode:\"append\"});           \r\n            this.#createDialog = result.content[0];\r\n            this.#createDialog.on(\"d-form-submit\", (event) => {\r\n                event.preventDefault();\r\n                event.stopPropagation();\r\n                const form = event.target;\r\n                (async () => {\r\n                    const campaign = await form.value();\r\n                    await storeCampaign(campaign);\r\n                    \r\n                    this.#createDialog.close();\r\n\r\n                    await this.render();\r\n                })();\r\n            })\r\n        }\r\n\r\n        this.#createDialog.showModal();\r\n    }\r\n\t\r\n}\r\n\r\ndefine(HTMLCampaignsElement);\r\nexport default HTMLCampaignsElement;\r\n","import {getJSON, postJSON, deleteJSON} from \"./ServiceUtils.js\";\r\nimport { member } from \"./LoginService.js\";\r\n\r\nconst ENDPOINT = (campaign) => `/api/campaigns/${campaign}/registrations`;\r\nconst ENDPOINTBYMEMBER = (campaign, member) => `${ENDPOINT(campaign)}/${member}`;\r\n\r\nconst CACHE = new Map();\r\n\r\nconst getCachedRegistrations = (campaign) => {\r\n    return CACHE.get(campaign);\r\n}\r\nconst getCachedRegistration = (campaign, member) => {    \r\n    const registrations = getCachedRegistrations(campaign);\r\n    if(registrations)\r\n        return registrations.get(member);\r\n\r\n    return null;\r\n}\r\n\r\nconst cacheRegistration = (registration) =>{\r\n    if(!registration) return;\r\n    const { campaignid, memberid } = registration;\r\n    const cache = (() => {\r\n        if(!CACHE.has(campaignid))\r\n            CACHE.set(campaignid, new Map());\r\n\r\n        return CACHE.get(campaignid);\r\n    })();\r\n    cache.set(memberid, registration);\r\n}\r\n\r\nexport const getRegistrations = async (campaign) =>{\r\n    if(CACHE.has(campaign))\r\n        return Array.from(getCachedRegistrations(campaign).values());\r\n\r\n    const registrations = (await getJSON(ENDPOINT(campaign))).data;\r\n    for(const registration of registrations)\r\n        cacheRegistration(registration);\r\n\r\n    return registrations;\r\n}\r\n\r\nexport const storeRegistration = async (campaign, registration) => {\r\n    registration = await postJSON(ENDPOINT(campaign), registration);\r\n    cacheRegistration(registration);\r\n    return registration;\r\n}\r\n\r\nexport const getMyRegistration = async (campaign) => {\r\n    return getRegistrationByMember(campaign,  member().id);\r\n} \r\n\r\nexport const getRegistrationByMember = async (campaign, member) => {\r\n    let registration = getCachedRegistration(campaign, member);\r\n    if(!registration){\r\n        registration = await getJSON(ENDPOINTBYMEMBER(campaign, member));\r\n        cacheRegistration(registration);\r\n    }\r\n    return registration;\r\n} \r\n","import { TEMPLATE_BASEPATH, EVENT__GLOBAL_ACTION_RELOADPARENT } from \"../Constants.js\";\r\nimport { Component, define } from \"@default-js/defaultjs-html-components\";\r\nimport { Renderer, Template } from \"@default-js/defaultjs-template-language\";\r\nimport { getCampaign, deleteCampaign, storeCampaign } from \"../services/CampaignService.js\";\r\nimport { getRegistrations, getMyRegistration, getRegistrationByMember, storeRegistration } from \"../services/CampaignRegistrationService.js\";\r\nimport { accessRights } from \"../services/LoginService.js\";\r\nimport \"@default-js/defaultjs-html-form\";\r\n\r\nconst TEMPLATES_PATH = `${TEMPLATE_BASEPATH}/html-campaign-element`;\r\nexport const NODENAME = \"x-campaign\";\r\nconst ATTR__CAMPAIGNID = \"campaign-id\";\r\n\r\nconst TEMPLATE_ROOT = Template.load(new URL(`${TEMPLATES_PATH}/root.tpl.html`, location));\r\nconst TEMPLATE_REGISTRATION = Template.load(new URL(`${TEMPLATES_PATH}/registration.tpl.html`, location));\r\nconst TEMPLATE_REGISTRATIONS = Template.load(new URL(`${TEMPLATES_PATH}/registrations.tpl.html`, location));\r\n\r\nconst getDatesBetweenTwoDates = (a, b) => {\r\n\ta = a instanceof Date ? a : new Date(a);\r\n\tb = b instanceof Date ? b : new Date(b);\r\n\r\n\tconst days = Math.ceil(Math.abs(a - b) / (1000 * 60 * 60 * 24));\r\n\tconst dates = [];\r\n\tfor (let i = 0; i < days; i++) dates.push(a.addDays(i));\r\n\r\n\treturn dates;\r\n};\r\n\r\nclass HTMLCampaignElement extends Component {\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME;\r\n\t}\r\n\r\n\t#initialized = false;\r\n\t#open = false;\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tconst root = this.root;\r\n\t\troot.on(EVENT__GLOBAL_ACTION_RELOADPARENT, (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tthis.render();\r\n\t\t});\r\n\t\troot.on(\"action:toogle-details\", (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tconst {target} = event;\r\n\t\t\tif (target instanceof HTMLDetailsElement) \r\n\t\t\t\tthis.#open = target.open;\r\n\t\t});\r\n\t\troot.on(\"action:show-registrations\", (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tthis.showRegistrations();\r\n\t\t});\r\n\t\troot.on(\"action:delete-campaign\", (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\t(async () => {\r\n\t\t\t\tawait deleteCampaign(this.campaignId);\r\n\t\t\t\tthis.remove();\r\n\t\t\t})();\r\n\t\t});\t\t\r\n\t\troot.on(\"action:member-registrate\", (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tthis.openRegistrationDialog();\r\n\t\t});\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tawait super.init();\r\n\t\tif (!this.#initialized) {\r\n\t\t\tawait this.render();\r\n\t\t\tthis.#initialized = true;\r\n\t\t}\r\n\t}\r\n\r\n\tget campaignId() {\r\n\t\treturn parseInt(this.attr(ATTR__CAMPAIGNID));\r\n\t}\r\n\r\n\tasync render() {\r\n\t\tconst template = await TEMPLATE_ROOT;\r\n\t\tawait Renderer.render({ container: this.root, template, data: {accessRights: accessRights(), open:this.#open, campaign: await getCampaign(this.campaignId) } });\r\n\t}\r\n\r\n\tasync openRegistrationDialog() {\r\n\t\tconst template = await TEMPLATE_REGISTRATION;\r\n\t\tconst campaign = await getCampaign(this.campaignId);\r\n\r\n\t\tconst data = {\r\n\t\t\tcampaign,\r\n\t\t\tdays: getDatesBetweenTwoDates(campaign.startdate, campaign.enddate),\r\n\t\t};\r\n\r\n\t\tconst result = await Renderer.render({\r\n\t\t\ttemplate,\r\n\t\t\tcontainer: this.root,\r\n\t\t\tdata,\r\n\t\t\tmode: \"append\",\r\n\t\t});\r\n\r\n\t\tconst dialog = result.content[0];\r\n\t\tconst form = dialog.find(\"d-form\").first();\r\n\r\n\t\tform.on(\"d-form-submit\", (event) => {\r\n\t\t\tconsole.log(event);\r\n\t\t\tevent.stopPropagation();\r\n\t\t\t(async () => {\r\n\t\t\t\tconst registration = await form.value();\r\n\t\t\t\tconst availability = [];\r\n\t\t\t\tlet fullyavailable = true;\r\n\t\t\t\tfor (const day in registration) {\r\n\t\t\t\t\tif (fullyavailable && registration[day].available != \"full\") fullyavailable = false;\r\n\t\t\t\t\tavailability.push(registration[day]);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tawait storeRegistration(this.campaignId, { fullyavailable, availability });\r\n\t\t\t\tdialog.hide();\r\n\t\t\t\tdialog.remove();\r\n\t\t\t})();\r\n\t\t});\r\n\t\tform.on(\"action:close-registration-dialog\", (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tdialog.hide();\r\n\t\t\tdialog.remove();\r\n\t\t});\r\n\r\n\t\tconst registration = await getMyRegistration(this.campaignId);\r\n\t\tif(registration){\r\n\t\t\tconst days = registration.availability || [];\r\n\t\t\tconst data = {};\r\n\t\t\tfor (let i = 0; i < days.length; i++)\r\n\t\t\t\tdata[`day${i+1}`] = days[i];\r\n\r\n\t\t\tawait form.value(data);\r\n\t\t}\r\n\r\n\r\n\t\tdialog.showModal();\r\n\t}\r\n\r\n\tasync showRegistrations() {\r\n\t\tconst template = await TEMPLATE_REGISTRATIONS;\r\n\t\tconst registrations = await getRegistrations(this.campaignId);\r\n\t\tconst result = await Renderer.render({ container: this, template, data: { registrations }, mode: \"append\" });\r\n\t\tconst dialog = result.content[0];\r\n\t\tdialog.on(\"close\", () => {\r\n\t\t\tdialog.remove();\r\n\t\t});\r\n\r\n\t\tdialog.showModal();\r\n\t}\r\n}\r\n\r\ndefine(HTMLCampaignElement);\r\nexport default HTMLCampaignElement;\r\n","import { TEMPLATE_BASEPATH, EVENT__GLOBAL_ACTION_RELOADPARENT } from \"../Constants.js\";\r\nimport { Component, define } from \"@default-js/defaultjs-html-components\";\r\nimport { Renderer, Template } from \"@default-js/defaultjs-template-language\";\r\nimport { getRegistrations, getMyRegistration, getRegistrationByMember, storeRegistration } from \"../services/CampaignRegistrationService.js\";\r\nimport { getMember } from \"../services/MemberService.js\";\r\n\r\nconst TEMPLATES_PATH = `${TEMPLATE_BASEPATH}/html-campaign-member-element`;\r\nexport const NODENAME = \"x-campaign-member\";\r\nconst ATTR__CAMPAIGNID = \"campaign-id\";\r\nconst ATTR__MEMBERID = \"member-id\";\r\n\r\nconst TEMPLATE_ROOT = Template.load(new URL(`${TEMPLATES_PATH}/root.tpl.html`, location));\r\n\r\nclass HTMLCampaignMemberElement extends Component {\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME;\r\n\t}\r\n\r\n\t#initialized = false;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tawait super.init();\r\n\t\tif (!this.#initialized) {\r\n\t\t\tthis.#initialized = true;\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t}\r\n\r\n\tasync render() {\r\n\t\tconst template = await TEMPLATE_ROOT;\r\n\t\tconst registration = await this.getRegistration();\r\n\t\tawait Renderer.render({ container: this.root, template, data: { registration } });\r\n\t}\r\n\r\n\tget campaignid() {\r\n\t\treturn this.attr(ATTR__CAMPAIGNID);\r\n\t}\r\n\r\n\tget memberid() {\r\n\t\treturn this.attr(ATTR__MEMBERID);\r\n\t}\r\n\r\n\tasync getRegistration() {\r\n\t\tconst { campaignid, memberid } = this;\r\n\t\treturn await getRegistrationByMember(campaignid, memberid);\r\n\t}\r\n}\r\n\r\ndefine(HTMLCampaignMemberElement);\r\nexport default HTMLCampaignMemberElement;\r\n","import {getJSON, postJSON, deleteJSON} from \"./ServiceUtils.js\";\r\n\r\nconst ENDPOINT = `/api/teams`;\r\n\r\nconst CACHE = new Map();\r\nconst CACHE_CAMPAIGNTEAMS = new Map();\r\n\r\nconst getCampignCache = (campaignid = null, create=false) => {\t\r\n\tconst cacheKey = `${campaignid ? campaignid : -1}`;\r\n\tif(CACHE_CAMPAIGNTEAMS.has(cacheKey))\r\n\t\treturn CACHE_CAMPAIGNTEAMS.get(cacheKey);\r\n\t\r\n\tif(!create)\r\n\t\treturn null;\r\n\t\r\n\tconst campaignCache = new Map();\r\n\tCACHE_CAMPAIGNTEAMS.set(cacheKey, campaignCache);\r\n\t\r\n\treturn campaignCache;\r\n}\r\n\r\nexport const getTeams = async (campaignid = null) => {\t\t\r\n\tlet campaignCache = getCampignCache(campaignid);\r\n\tif(campaignCache)\r\n\t\treturn Array.from(campaignCache.values());\r\n\t\t\r\n\tcampaignCache = getCampignCache(campaignid, true);    \r\n    const teams = (await (async () => {\r\n\t\tif(campaignid)\r\n\t\t\treturn getJSON(`${ENDPOINT}/campaign/${campaignid}`);\r\n\t\treturn getJSON(ENDPOINT);\r\n\t})()).data;    \r\n    \r\n    for(let team of teams){\r\n\t\tcampaignCache.set(team.id, team);\r\n        CACHE.set(team.id, team);\r\n    }\r\n\r\n    return teams;\r\n};\r\n\r\nexport const getTeam = async (id) => {\r\n    if(CACHE.has(id))\r\n        return CACHE.get(id);\r\n\r\n    const team = await getJSON(`${ENDPOINT}/${id}`);\r\n    CACHE.set(team.id, team);    \r\n    const campaignCache = getCampignCache(team.campaignid, true);\r\n\tcampaignCache.set(team.id, team);\r\n\t\r\n    return team;\r\n};\r\n\r\nexport const storeTeam = async (team) => {\r\n    team = await postJSON(`${ENDPOINT}`, team );\r\n    CACHE.set(team.id, team);\r\n    const campaignCache = getCampignCache(team.campaignid, true);\r\n\tcampaignCache.set(team.id, team);\r\n\r\n    return team;\r\n};\r\n\r\nexport const deleteTeam = async (id) => {\r\n    await deleteJSON(`${ENDPOINT}/${id}`);    \r\n    const team = CACHE.get(id);\r\n    const campaignCache = getCampignCache(team.campaignid, false);\r\n    if(campaignCache)\r\n\t\tcampaignCache.delete(id);\r\n\t\t\r\n\tCACHE.delete(id);\r\n};","import { TEMPLATE_BASEPATH, EVENT__GLOBAL_ACTION_RELOADPARENT } from \"../Constants.js\";\r\nimport { Component, define } from \"@default-js/defaultjs-html-components\";\r\nimport { Renderer, Template } from \"@default-js/defaultjs-template-language\";\r\nimport { getTeam, deleteTeam, storeTeam } from \"../services/TeamService.js\";\r\nimport { accessRights } from \"../services/LoginService.js\";\r\nimport \"@default-js/defaultjs-html-form\";\r\n\r\nconst TEMPLATES_PATH = `${TEMPLATE_BASEPATH}/html-team-element`;\r\n\r\nconst NODENAME = \"x-team\";\r\nconst ATTR__TEAMID = \"team-id\";\r\nconst ATTR__CAMPAIGNID = \"campaign-id\";\r\n\r\nconst TEMPLATE__ROOT = Template.load(new URL(`${TEMPLATES_PATH}/root.tpl.html`, location));\r\nconst TEMPLATE__EDITOR = Template.load(new URL(`${TEMPLATES_PATH}/editor.tpl.html`, location));\r\n\r\nclass HTMLTeamElement extends Component {\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME;\r\n\t}\r\n\r\n\t#initialized = false;\r\n\t#open = false;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tconst root = this.root;\r\n\t\troot.on(\"action:toogle-details\", (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tconst {target} = event;\r\n\t\t\tif (target instanceof HTMLDetailsElement) \r\n\t\t\t\tthis.#open = target.open;\r\n\t\t});\r\n\t\troot.on(\"action:delete-team\", (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\t(async () => {\r\n\t\t\t\tconst teamId = this.teamId;\r\n\t\t\t\tawait deleteTeam(teamId);\r\n\t\t\t\tthis.trigger(\"info:team-deleted\", teamId);\r\n\t\t\t\tthis.remove();\r\n\t\t\t})();\r\n\t\t});\r\n\r\n\t\troot.on(\"action:edit-team\", (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tthis.editorDialog();\r\n\t\t});\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tawait super.init();\r\n\t\tif (!this.#initialized) {\r\n\t\t\tthis.render();\r\n\t\t\tthis.#initialized = true;\r\n\t\t}\r\n\t}\r\n\r\n\tget teamId() {\r\n\t\treturn parseInt(this.attr(ATTR__TEAMID));\r\n\t}\r\n\r\n\tget campaignId() {\r\n\t\treturn parseInt(this.attr(ATTR__CAMPAIGNID));\r\n\t}\r\n\r\n\tasync render() {\r\n\t\tconst template = await TEMPLATE__ROOT;\r\n\t\tconst team = await getTeam(this.teamId)\r\n\t\tawait Renderer.render({ template, container: this.root, data: {accessRights: accessRights(), open: this.#open, team } });\r\n\t}\r\n\r\n\tasync editorDialog() {\r\n\t\tconst { root, teamId } = this;\r\n\t\tconst team = await getTeam(teamId);\r\n\t\tconst template = await TEMPLATE__EDITOR;\r\n\t\tconst container = document.createElement(\"div\");\r\n\t\tawait Renderer.render({ container, template, data: { team } });\r\n\t\troot.append(container.innerHTML);\r\n\t\tconst dialog = root.find(\":scope > dialog\").last();\r\n\t\tdialog.on(\"d-form-submit\", (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tconst form = event.target;\r\n\t\t\t(async () => {\r\n\t\t\t\tconst team = await form.value();\r\n\t\t\t\tawait storeTeam(team);\r\n\t\t\t\tdialog.close();\r\n\t\t\t\tdialog.remove();\r\n\t\t\t\tthis.render();\r\n\t\t\t})();\r\n\t\t});\r\n\t\tdialog.on(\"close\", (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tdialog.remove();\r\n\t\t});\r\n\r\n\t\tconst form = dialog.find(\"d-form\").first();\r\n\t\tawait form.ready;\r\n\t\tawait form.value(team);\r\n\t\tdialog.showModal();\r\n\t}\r\n}\r\n\r\ndefine(HTMLTeamElement);\r\nexport default HTMLTeamElement;\r\n","import { TEMPLATE_BASEPATH, EVENT__GLOBAL_ACTION_RELOADPARENT } from \"../Constants.js\";\r\nimport { Component, define } from \"@default-js/defaultjs-html-components\";\r\nimport { Renderer, Template } from \"@default-js/defaultjs-template-language\";\r\nimport { getTeams, storeTeam } from \"../services/TeamService.js\";\r\nimport { getCampaign, storeCampaign } from \"../services/CampaignService.js\";\r\nimport { accessRights } from \"../services/LoginService.js\";\r\nimport \"@default-js/defaultjs-html-form\";\r\n\r\nconst TEMPLATES_PATH = `${TEMPLATE_BASEPATH}/html-teams-element`;\r\nconst TEMPLATE__ROOT = Template.load(new URL(`${TEMPLATES_PATH}/root.tpl.html`, location));\r\n\r\nconst NODENAME = \"x-teams\";\r\nconst ATTR__CAMPAIGNID = \"campaign-id\"\r\n\r\nclass HTMLTeamsElement extends Component {\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME;\r\n\t}\r\n\r\n\t#initialized = false;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tconst root = this.root;\r\n\t\troot.on(\"action:create-team\", (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\t(async () => {\r\n\t\t\t\tconst campaignid = this.campaignId ? parseInt(this.campaignId) : null;\r\n\t\t\t\tawait storeTeam({ name: \"neues Team\", campaignid });\r\n\r\n\t\t\t\tthis.render();\r\n\t\t\t})();\r\n\t\t});\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tawait super.init();\r\n\t\tif (!this.#initialized) {\r\n\t\t\tawait this.render();\r\n\t\t\tthis.#initialized = true;\r\n\t\t}\r\n\t}\r\n\r\n\tget campaignId() {\r\n\t\treturn this.attr(ATTR__CAMPAIGNID);\r\n\t}\r\n\r\n\tasync render() {\r\n\t\tconst template = await TEMPLATE__ROOT;\r\n\t\tconst teams = await getTeams(this.campaignId);\t\t\r\n\t\tawait Renderer.render({ template, container: this.root, data: {accessRights: accessRights(), teams }});\r\n\t}\r\n}\r\n\r\ndefine(HTMLTeamsElement);\r\nexport default HTMLTeamsElement;\r\n","import { TEMPLATE_BASEPATH, EVENT__GLOBAL_ACTION_RELOADPARENT } from \"../Constants.js\";\r\nimport { define } from \"@default-js/defaultjs-html-components\";\r\nimport { BaseField } from \"@default-js/defaultjs-html-form\";\r\nimport { Renderer, Template } from \"@default-js/defaultjs-template-language\";\r\nimport { getMembers } from \"../services/MemberService.js\";\r\nimport { getRegistrations } from \"../services/CampaignRegistrationService.js\";\r\n\r\nconst ATTR_CAMPAIGNID = \"campaign-id\";\r\nconst NODENAME = \"x-team-member-search-field\";\r\nconst TEMPLATES_PATH = `${TEMPLATE_BASEPATH}/html-team-member-search-field-element`;\r\nconst TEMPLATE_ROOT = Template.load(new URL(`${TEMPLATES_PATH}/root.tpl.html`, location));\r\nconst TEMPLATE_DIALOG = Template.load(new URL(`${TEMPLATES_PATH}/dialog.tpl.html`, location));\r\n\r\nclass HTMLTeamMemberSearchFieldElement extends BaseField {\r\n\tstatic get NODENAME() {\r\n\t\treturn NODENAME;\r\n\t}\r\n\r\n\t#initialized = false;\r\n\t#selectionDialog = null;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tconst root = this.root;\r\n\t\troot.on(\"action:show-selection-dialog\", (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tif(!this.readonly)\t\t\r\n\t\t\t\tthis.showSelectionDialog();\r\n\t\t});\r\n\t\troot.on(\"action:save-selection\", (event) => {\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tif(!this.readonly){\r\n\t\t\t\t(async () => {\r\n\t\t\t\t\tconst selections = this.#selectionDialog.find(\".is-selected[member-id]\");\r\n\t\t\t\t\tconst memberids = await Promise.all(selections.map((selected) => selected.attr(\"member-id\")));\r\n\t\t\t\t\tawait this.publishValue(memberids);\t\t\t\t\t\r\n\t\t\t\t\tawait this.render();\r\n\t\t\t\t\tthis.#selectionDialog.close();\r\n\t\t\t\t\tthis.#selectionDialog.remove();\r\n\t\t\t\t\tthis.#selectionDialog = null;\r\n\t\t\t\t})();\r\n\t\t\t}\r\n\t\t});\r\n\t\troot.on(\"action:filter\", (event) => {\r\n\t\t\tconst target = event.target;\r\n\t\t\tconst value = target.value;\r\n\t\t\tconst filterContainer = target.find(target.attr(\"filter-container\")).first();\r\n\t\t\tfilterContainer.find(\"[filterable]\").removeClass(\"hidden\");\r\n\t\t\tif(value.length > 0)\r\n\t\t\t\tfilterContainer.find(\"[filterable]\").forEach((element) => {\r\n\t\t\t\t\tconst content = element.find(\"x-member[filterable-content]\").first().attr(\"filterable-content\");\r\n\t\t\t\t\tif(content.search(value) < 0)\r\n\t\t\t\t\t\telement.addClass(\"hidden\");\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t\r\n\t\t});\r\n\t}\r\n\r\n\tasync init() {\r\n\t\tawait super.init();\r\n\t\tif (!this.#initialized) {\r\n\t\t\tthis.render();\r\n\t\t}\r\n\t}\r\n\r\n\tasync showSelectionDialog() {\r\n\t\tif(!this.#selectionDialog){\r\n\t\t\tconst {root} = this;\r\n\t\t\tconst template = await TEMPLATE_DIALOG;\r\n\t\t\tconst memberids = await (async () => {\r\n\t\t\t\tconst result = new Set();\r\n\t\t\t\tconst memberids = await this.value();\r\n\t\t\t\tif (memberids) {\r\n\t\t\t\t\tfor (const memberid of memberids)\r\n\t\t\t\t\t\tresult.add(memberid);\r\n\t\t\t\t}\r\n\t\t\t\treturn result;\r\n\t\t\t})();\r\n\t\t\t\r\n\t\t\tconst campaignid = this.campaignid;\r\n\t\t\tconst members = await (async () => {\r\n\t\t\t\tif(campaignid)\r\n\t\t\t\t\treturn (await getRegistrations(campaignid)).map(registration => {return { id: registration.memberid};});\r\n\t\t\t\t\r\n\t\t\t\treturn getMembers();\r\n\t\t\t})();\r\n\t\t\t\r\n\t\t\tawait Renderer.render({ template, container: root, data: { members, memberids, campaignid }, mode:\"append\"});\t\r\n\t\t\tthis.#selectionDialog = root.find(\":scope > dialog\").first();\r\n\t\t\t\r\n\t\t}\r\n\t\tthis.#selectionDialog.showModal(); \r\n\t}\r\n\r\n\tasync render(value) {\r\n\t\tvalue = value || await this.value();\r\n\t\tconst template = await TEMPLATE_ROOT;\r\n\t\tRenderer.render({ template, container: this.root, data: { memberids: value || [], campaignid: this.campaignid } });\r\n\t}\r\n\r\n\tget campaignid() {\r\n\t\treturn this.attr(ATTR_CAMPAIGNID);\r\n\t}\r\n\r\n\tasync acceptValue(value) {\r\n\t\treturn value instanceof Array || value == null;\r\n\t}\r\n\r\n\tasync readonlyUpdated() {}\r\n\r\n\tasync updatedValue(value) {\r\n\t\tif(this.#selectionDialog)\r\n\t\t\tthis.#selectionDialog.remove()\r\n\t\t\r\n\t\tawait this.render(value);\r\n\t}\r\n}\r\n\r\ndefine(HTMLTeamMemberSearchFieldElement);\r\nexport default HTMLTeamMemberSearchFieldElement;\r\n","((global) => {\r\n\tconst toDate = (date = new Date()) => {\t\t\r\n\t\tconst year = date.getFullYear();\t\t\r\n\t\tconst month = date.getMonth();\r\n\t\tdate = date.getDate();\r\n\t\treturn {\r\n\t\t\tdate, month, year,\r\n\t\t\ttest: year * 10000 + month * 100 + date\r\n\t\t};\r\n\t};\r\n\r\n\tconst dateGreaterEqual = (a, b) => {\r\n\t\ta = toDate(a instanceof Date ? a : Date.parse(a));\r\n\t\tb = toDate(b instanceof Date ? b : Date.parse(b));\r\n\r\n\t\treturn a.test >= b.test;\r\n\t};\r\n\r\n\tconst dateGreater = (a, b) => {\r\n\t\ta = toDate(a instanceof Date ? a : Date.parse(a));\r\n\t\tb = toDate(b instanceof Date ? b : Date.parse(b));\r\n\r\n\t\treturn a.test > b.test;\r\n\t};\r\n\r\n\tglobal.formUtils = global.formUtils || {\r\n\t\tdate: {\r\n\t\t\tgreaterEqual: dateGreaterEqual,\r\n\t\t\tgreaterEqualNow: (date) => dateGreaterEqual(date, new Date()),\r\n            greater: dateGreater\r\n\t\t},\r\n\t};\r\n})(window);\r\n","((global) => {\r\n    const DATEFORMAT = new Intl.DateTimeFormat('default', {weekday: 'long',month: 'long', day:'numeric'});\r\n\tconst toDate = (date = new Date()) => {\r\n\t\treturn DATEFORMAT.format(date)\r\n\t};\r\n\r\n    global.DateFormats = global.DateFormats || {\r\n\t\ttoDate\r\n\t};\r\n})(window);","const BODY = document.body;\r\n\r\n\r\nBODY.on(\"action:management:sync-all-data\", async (event) => {\r\n    console.log({event});\r\n    await fetch(\"/api/management/sync-data\", location);\r\n});"],"names":["String","prototype","hashcode","this","length","hash","i","charCodeAt","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","g","globalThis","Function","e","window","GLOBAL","self","ORGFETCH","fetch","CURRENTORIGIN","location","origin","INSTANCE","constructor","ignoreDocumentOrigin","value","addOriginToIgnore","origins","Array","toString","addUrlToIgnore","urls","url","setup","Promise","push","addInterceptor","aInterceptor","forEach","interceptor","Error","doAccept","doHandle","reset","ready","interceptors","shift","async","aData","metadata","chain","request","data","result","setTimeout","XMLHttpRequest","ORGXHR","executeRequest","open","call","method","username","password","headers","Object","getOwnPropertyNames","aHeader","setRequestHeader","send","body","XHR","xhr","arguments","aName","aValue","aMethod","aUrl","isAsync","aUsername","aPassword","URL","protocol","hostname","port","path","pathname","query","search","aBody","then","bind","console","error","aRequest","Interceptor","defaultTokenAppender","token","TokenInterceptor","condition","fetchToken","appendToken","refreshInterval","refreshToken","super","type","includes","appender","timeout","OAuthInterceptor","aSetup","response","login","json","valueSelector","defaultjs","httpinterceptor","VERSION","Manager","TEMPLATE_BASEPATH","EVENT__GLOBAL_ACTION_RELOADPARENT","URL_LOGIN","APPGLOBAL","ROLEMAPPING","APPGLOBALS","STORAGE","localStorage","STORAGE_ITEM__LOGIN","MEMBER","ACCESSTOKEN","EXPIREAT","isloggedIn","ACCESSRIGHTS","isExpired","expireAt","Date","now","access","status","key","setItem","JSON","stringify","member","accessToken","accessRights","scheduleNexAccessTokenRefresh","cachedLogin","parse","getItem","loadValue","removeItem","params","searchParams","set","id","timeOffset","href","args","from","extender","global","globalVar","aInitValue","EXTENSIONS_MAP","aExtention","aType","extensions","name","warn","support","Prototype","EVENTSPLITER","getWrapperHandleMap","element","__wrapperhandlemap__","Map","removeWrapper","eventTypes","wrapper","option","events","handle","capture","split","event","index","indexOf","removeEventListener","splice","delete","on","filter","once","passive","target","is","apply","addEventListener","removeOn","get","trigger","timeouts","___EVENTTRIGGERTIMEOUTS___","timeoutid","clearTimeout","delegate","Event","CustomEvent","bubbles","cancelable","composed","detail","delegatedEvent","dispatchEvent","EventTarget","dataset","empty","nodes","childNodes","remove","content","html","innerHTML","outerHTML","Node","NodeList","HTMLCollection","append","appendChild","arg","create","prepend","aFirstElement","aElement","insertBefore","first","insert","replace","parent","parentNode","oldNode","newNode","aItem","replaceChild","after","next","nextSibling","before","inserter","node","DataSupport","ManipulationSupport","parentSelector","queryExecuter","aSelector","match","exec","querySelectorAll","substr","nextSelector","trim","find","Document","DocumentFragment","matches","selector","ignoreShadowRoot","ShadowRoot","host","parents","tagName","toLowerCase","sameTagSiblings","closest","aQuery","closests","parentElement","nested","attr","hasAttributes","getAttributeNames","getAttribute","removeAttribute","setAttribute","Element","QuerySupport","aFunction","document","readyState","addClass","clazz","classList","add","removeClass","toggleClass","toggle","HIDEVALUE","isHidden","style","display","init","show","hide","toggleShow","HTMLElement","HtmlClassSupport","InputTypes","selected","values","isArray","concat","checked","DefaultInputType","val","getInputType","HTMLInputElement","ValueSupport","HTMLTextAreaElement","HTMLSelectElement","callback","source","prop","getOwnPropertyDescriptor","map","last","ListSupport","applyTo","calling","isFunction","results","counter","enumerable","aFunctionName","theArguments","utils","Utils","aContent","asTemplate","template","createElement","importNode","aFile","aTarget","all","file","r","script","onload","onerror","src","reject","ObjectProperty","context","keyDefined","hasValue","static","keys","isPojo","aObject","merge","sources","propFilter","deep","recursive","accept","Set","RegExp","defValue","o","defineProperty","writable","configurable","defGet","aKey","load","buildPropertyFilter","names","allowed","defGetSet","lazyPromise","promiseResolve","promiseError","promise","resolved","componentEventname","eventType","nodename","nodeName","NODENAME","attributeChangeEventname","attribute","TIMEOUTS","WeakMap","buildClass","htmlBaseType","shadowRoot","createUID","uidPrefix","uidSuffix","attachShadow","mode","root","connectedCallback","ownerDocument","isConnected","component","resolve","adoptedCallback","attributeChangedCallback","oldValue","newValue","disconnectedCallback","destroy","CLAZZMAP","componentBaseOf","toNodeName","prefix","options","customElements","define","findClosest","depth","check","child","item","findClosestInDepth","PRIVATE_PROPERTIES","privateStore","obj","has","privateProperty","privatePropertyAccessor","varname","EVENT_INIT","EVENT_CLICK","EVENT_ACTIVATE","EVENT_DEACTIVATE","EVENT_TO_ROUTE","DefaultValue","Handle","resolver","cache","updateData","resetCache","getPropertyDef","property","seek","def","defined","proxy","seekAtChain","hasProperty","getProperty","setProperty","deleteProperty","Context","Proxy","EXPRESSION","DEFAULT_NOT_DEFINED","toDefaultValue","aResolver","aExpression","aFilter","aDefault","aStatement","aContext","expression","execute","resolveMatch","defaultValue","normalize","effectiveChain","contextChain","getData","mergeContext","ObjectUtils","aText","text","temp","join","aTimeout","resolveText","NODE_ATTRIBUTE_TEMPLATE","CACHE","fromSource","fromElement","HTMLTemplateElement","Template","cloneNode","importContent","doc","alias","loaction","getKey","fromURL","defaultTemplate","getTemplate","ATTR_NAME","ATTR_ACTIVE","ATTR_STATEFUL","ATTR_COMPONENT_TAG","ATTR_COMPONENT_TAG_ATTRIBUTES","ATTR_VIEW","ATTRIBUTES","EVENTS","_template","buildComponent","route","hasAttribute","loadNodeTemplate","tag","attributes","getTagAttributes","Route","observedAttributes","setting","active","view","stateful","refresh","ATTR_REFRESH","ATTR_TARGET","RouteLink","preventDefault","DEFINED_DIRECTIVES","PHASE","finish","Directive","MIN_RANK","MAX_RANK","rank","phase","directive","sort","a","b","defineDirective","directives","toTemplate","renderer","container","wait","callbacks","ignoreDirective","stop","ignore","subcontexts","closed","ignoreDirectives","acceptDirective","finished","subContext","clone","toRenderOption","DirectiveElement","hidden","ReplaceElement","renderOption","render","parseInt","MODES","scope","updateContext","children","whens","include","ATTRIBUTE","iterate","itemContext","count","start","step","array","Math","min","iteration","number","doForeach","doCount","DIRECTIVENAME","IGNOREDIRECTIVE","DATA","VAR","STATUS","COUNT","START","STEP","CONDITION","tagname","doRepeat","DEFAULT_OPTION","unsecure","preventFormat","maxLength","textContent","substring","trimTextLength","Text","readOption","ATTRIBUTE_NAME","DEFAULT_EVENT_FUNCTION","OPTION_PREVENT_DEFAULT","IGNORED_ATTRIBUTES","EVENTFUNCTIONS","eventhandle","delegater","toggleclass","toggleattribute","toggleAttribute","eventHandle","bindAttribute","isValue","bindEvent","bubble","binding","binder","stopPropagation","currentTarget","processed","jstl","ATTRIBUTE__ATTACHELEMENT","MODE_REPLACE","PRECHECK","test","getElement","log","NAME","ATTRIBUTE_ON_FINISHED","ATTRIBUTE_ON_FINISHED_ASYNC","asyncCall","$element","$root","$template","SCOPES","APPLICATION_SCOPE_RESOLVER","MODEWORKER","renderNode","executeDirectives","subTemplate","containerResolver","Renderer","calledWithContext","loadTemplateContent","nodeTemplate","nodeResolver","nodeContext","renderContainer","modeworker","addContent","_app","_route","ROUTEDATA","reference","weakmap","View","app","$view","$app","$store","store","$route","$context","_view","_store","ATTR_ROUTE","findRoute","findView","closestView","buildRouteContext","Application","addDays","days","date","setDate","getDate","navigator","serviceWorker","register","reg","installing","waiting","postMessage","catch","HTMLDialogExtentionElement","HTMLDialogElement","close","extends","WotLoginComponent","user","attrTemplate","TEMPLATE_URL__ROOT","HTMLClanElement","clanData","members","internalFetch","toURL","ok","getJSON","postJSON","deleteJSON","ENDPOINT","FULLLOADED","TEMPLATES_PATH","TEMPLATE_ROOT","HTMLMemberElement","memberId","getMember","getCampaigns","campaigns","size","campaign","getCampaign","HTML_TAG_PREFIX","EVENTHANDLE_INPUT_TIMEOUT","NODENAME_FORM","NODENAME_SUBMIT_ACTION","NODENAME_PAGE","NODENAME_FIELD","NODENAME_CONTAINER","NODENAME_LIST","NODENAME_LIST_ROWS","NODENAME_LIST_ROW","NODENAME_LIST_ADD_ROW","NODENAME_LIST_DELETE_ROW","NODENAME_PROGESSBAR","NODENAME_STEP","NODENAME_VALIDATION","NODENAME_MESSAGE","NODENAME_CONTROL","NODENAME_CONTROL_BACK","NODENAME_CONTROL_NEXT","NODENAME_CONTROL_SUMMARY","NODENAME_CONTROL_SUBMIT","FORMSTATE_INIT","FORMSTATE_VALIDATING","FORMSTATE_INPUT","FORMSTATE_SUMMARY","FORMSTATE_FINISHED","EVENT_PREFIX","EVENT_INITIALIZED","EVENT_INITIALIZE_SUBMIT_ACTION","EVENT_SUBMIT","EVENT_SUBMIT_RESULTS","EVENT_CONDITION_STATE_CHANGED","EVENT_SITE_CHANGED","EVENT_FORM_STATE_CHANGED","EVENT_FIELD_INPUT","EVENT_LIST_ROW_ADD","EVENT_LIST_ROW_DELETE","EVENT_PROGRESSBAR_CHANGED","EVENT_FIELD_INITIALIZED","EVENT_FIELD_REMOVED","EVENT_PAGE_INITIALIZED","EVENT_PAGE_REMOVED","EVENT_VALIDATION_INITIALIZED","EVENT_VALIDATION_REMOVED","EVENT_MESSAGE_INITIALIZED","EVENT_MESSAGE_REMOVED","EVENT_ACTIVE_STATE_CHANGED","EVENT_VALID_STATE_CHANGED","EVENT_EDITABLE_STATE_CHANGED","SPECIALVARS","ATTRIBUTE_ENDPOINT","ATTRIBUTE_METHOD","ATTRIBUTE_STATE","ATTRIBUTE_STEP","ATTRIBUTE_USE_SUMMARY_PAGE","ATTRIBUTE_INPUT_MODE_AFTER_SUBMIT","ATTRIBUTE_REQUIRED","ATTRIBUTE_CONDITION","ATTRIBUTE_ACTIVE","ATTRIBUTE_DISABLED","ATTRIBUTE_EDITABLE","ATTRIBUTE_EDITABLE_CONDITION","ATTRIBUTE_READONLY","ATTRIBUTE_NOVALUE","ATTRIBUTE_VALID","ATTRIBUTE_INVALID","ATTRIBUTE_EVALUATE","ATTRIBUTE_CONDITION_VALID","ATTRIBUTE_CONDITION_INVALID","ATTRIBUTE_MIN","ATTRIBUTE_MAX","ATTRIBUTE_PROGRESS","base","current","editable","addCustomValidation","validation","customs","validations","required","valid","validateCustomValidations","message","update","valueHelper","assign","fieldValueMapToObject","fieldOrder","field","NAME_SPLITTER","getValue","del","setValue","updateActiveState","initial","oldState","updateReadonlyState","readonly","_form","addValidation","_value","row","evaluationData","validate","form","activeUpdated","readonlyUpdated","updateEditableState","editableUpdated","conditionUpdated","updateValidState","validUpdated","_parent","publishValue","parentField","findParentField","currentValue","acceptValue","normalizeValue","updatedValue","currentCondition","currentValid","validationStateChanged","conditionChange","validationChanged","noValue","dataIsNoValue","childValueChanged","toTimeoutHandle","prevent","eventCopy","explicitOriginalTarget","originalTarget","srcElement","timeStamp","makeEventCopy","Wrapper","input","disabled","DEFAULTTYPE","valueAsNumber","Number","isNaN","datetime","TIMEFORMAT","Intl","DateTimeFormat","hour","minute","TYPES","valueAsDate","format","readFile","readFnName","reader","FileReader","FORMAT","readFiles","files","multiple","wrappers","checkValidity","floor","random","radio","filenameTarget","filename","Field","findInput","findWrapper","treeFilter","elements","validateFields","fields","reduce","fieldValid","Container","clear","fieldValue","hasField","DeleteRow","ListRow","EVENT__INITIALIZED__BUTTON__ADDROW","AddRow","ListRows","buildData","rows","List","createRow","max","rowTemplate","MAX_SAFE_INTEGER","Page","Message","BackButton","toPrevPage","NextButton","toNextPage","SummaryButton","SubmitButton","submit","BUTTONDUMMY","Control","state","back","summary","activePageIndex","activePage","nextPage","pages","useSummaryPage","hasNextPage","Step","ProgressBar","stepName","page","firstStepPageIndex","progress","pageStep","steps","STATE_SUCCESS","STATE_FAIL","action","DefaultFormSubmitAction","endpoint","ExpressionResolver","credentials","_submitActions","Form","actual","scrollIntoView","prevPage","prev","submitActions","actions","childs","executeActions","TEMPLATE_URL__CREATEDIALOG","HTMLCampaignsElement","openCreateDialog","storeCampaign","showModal","getCachedRegistrations","cacheRegistration","registration","campaignid","memberid","getRegistrations","registrations","getMyRegistration","getRegistrationByMember","getCachedRegistration","ENDPOINTBYMEMBER","TEMPLATE_REGISTRATION","TEMPLATE_REGISTRATIONS","getDatesBetweenTwoDates","ceil","abs","dates","HTMLCampaignElement","HTMLDetailsElement","showRegistrations","deleteCampaign","campaignId","openRegistrationDialog","startdate","enddate","dialog","availability","fullyavailable","day","available","storeRegistration","HTMLCampaignMemberElement","getRegistration","CACHE_CAMPAIGNTEAMS","getCampignCache","cacheKey","campaignCache","getTeam","team","storeTeam","TEMPLATE__ROOT","TEMPLATE__EDITOR","HTMLTeamElement","teamId","deleteTeam","editorDialog","HTMLTeamsElement","teams","getTeams","TEMPLATE_DIALOG","HTMLTeamMemberSearchFieldElement","showSelectionDialog","selections","memberids","filterContainer","getMembers","toDate","year","getFullYear","month","getMonth","dateGreaterEqual","formUtils","greaterEqual","greaterEqualNow","greater","DATEFORMAT","weekday","DateFormats"],"sourceRoot":""}